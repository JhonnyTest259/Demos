"use strict";var OO=Object.defineProperty,PO=Object.defineProperties,kO=Object.getOwnPropertyDescriptors,Bx=Object.getOwnPropertySymbols,FO=Object.prototype.hasOwnProperty,LO=Object.prototype.propertyIsEnumerable,jx=(tt,De,P)=>De in tt?OO(tt,De,{enumerable:!0,configurable:!0,writable:!0,value:P}):tt[De]=P,$x=(tt,De)=>{for(var P in De||(De={}))FO.call(De,P)&&jx(tt,P,De[P]);if(Bx)for(var P of Bx(De))LO.call(De,P)&&jx(tt,P,De[P]);return tt},Hx=(tt,De)=>PO(tt,kO(De));(self.webpackChunkempleados=self.webpackChunkempleados||[]).push([[179],{2011:(tt,De,P)=>{P.d(De,{Dh:()=>ae,GT:()=>ge,cc:()=>xe,hO:()=>$e,on:()=>z,pX:()=>le,xv:()=>ve});var p=P(5e3),V=P(127),R=P(5813);tt=P.hmd(tt);const se=["ngOnDestroy"],le=(be,We,Ge,Oe={})=>new Proxy(be,{get:(Ae,we)=>Ge.runOutsideAngular(()=>{var qe;if(be[we])return(null===(qe=null==Oe?void 0:Oe.spy)||void 0===qe?void 0:qe.get)&&Oe.spy.get(we,be[we]),be[we];if(se.indexOf(we)>-1)return()=>{};const te=We.toPromise().then(he=>{const _e=he&&he[we];return"function"==typeof _e?_e.bind(he):_e&&_e.then?_e.then(Y=>Ge.run(()=>Y)):Ge.run(()=>_e)});return new Proxy(()=>{},{get:(he,_e)=>te[_e],apply:(he,_e,Y)=>te.then(ne=>{var ie;const ye=ne&&ne(...Y);return(null===(ie=null==Oe?void 0:Oe.spy)||void 0===ie?void 0:ie.apply)&&Oe.spy.apply(we,Y,ye),ye})})})}),ge=(be,We)=>{We.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(Oe=>{Object.defineProperty(be.prototype,Oe,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,Oe))})})};class pe{constructor(We){return We}}const ae=new p.OlP("angularfire2.app.options"),ve=new p.OlP("angularfire2.app.name");function z(be,We,Ge){const Ae="object"==typeof Ge&&Ge||{};Ae.name=Ae.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const qe=V.Z.apps.filter(te=>te&&te.name===Ae.name)[0]||We.runOutsideAngular(()=>V.Z.initializeApp(be,Ae));try{JSON.stringify(be)!==JSON.stringify(qe.options)&&j("error",`${qe.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(te){}return new pe(qe)}const j=(be,...We)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[be](...We)},re={provide:pe,useFactory:z,deps:[ae,p.R0b,[new p.FiY,ve]]};let $e=(()=>{class be{constructor(Ge){V.Z.registerVersion("angularfire",R.q4.full,"core"),V.Z.registerVersion("angularfire",R.q4.full,"app-compat"),V.Z.registerVersion("angular",p.q4F.full,Ge.toString())}static initializeApp(Ge,Oe){return{ngModule:be,providers:[{provide:ae,useValue:Ge},{provide:ve,useValue:Oe}]}}}return be.\u0275fac=function(Ge){return new(Ge||be)(p.LFG(p.Lbi))},be.\u0275mod=p.oAB({type:be}),be.\u0275inj=p.cJS({providers:[re]}),be})();function xe(be,We,Ge,Oe,Ae){const[,we,qe]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===be)||[];if(we)return function ke(be,We){try{return be.toString()===We.toString()}catch(Ge){return be===We}}(Ae,qe)||(fe("error",`${We} was already initialized on the ${Ge} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:Ae,was:qe})),we;{const te=Oe();return globalThis.\u0275AngularfireInstanceCache.push([be,te,Ae]),te}}const Be=!!tt.hot,fe=(be,...We)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[be](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(tt,De,P)=>{P.d(De,{q4:()=>Qf,iC:()=>cu,HU:()=>Ls,vb:()=>xn,JM:()=>Jf,u3:()=>Ut});var p=P(5e3),V=P(5867),R=P(5861),se=P(9681),le=P(2090),ge=P(4859),pe=P(1877),ae=P(8766);const ve="@firebase/installations",z="0.5.12",re=`w:${z}`,$e="FIS_v2",We=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(D){return D instanceof le.ZR&&D.code.includes("request-failed")}function Oe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ae(D){return{token:D.token,requestStatus:2,expiresIn:ne(D.expiresIn),creationTime:Date.now()}}function we(D,C){return qe.apply(this,arguments)}function qe(){return(qe=(0,R.Z)(function*(D,C){const F=(yield C.json()).error;return We.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function te({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function he(D,{refreshToken:C}){const M=te(D);return M.append("Authorization",function ie(D){return`${$e} ${D}`}(C)),M}function _e(D){return Y.apply(this,arguments)}function Y(){return(Y=(0,R.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ne(D){return Number(D.replace("s","000"))}function ye(D,C){return ue.apply(this,arguments)}function ue(){return(ue=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:M}){const F=Oe(D),Z=te(D),oe=C.getImmediate({optional:!0});if(oe){const wt=yield oe.getHeartbeatsHeader();wt&&Z.append("x-firebase-client",wt)}const ze={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:$e,appId:D.appId,sdkVersion:re})},ut=yield _e(()=>fetch(F,ze));if(ut.ok){const wt=yield ut.json();return{fid:wt.fid||M,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Ae(wt.authToken)}}throw yield we("Create Installation",ut)})).apply(this,arguments)}function Fe(D){return new Promise(C=>{setTimeout(C,D)})}const qt=/^[cdef][\w-]{21}$/;function Ke(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function on(D){return function dt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return qt.test(M)?M:""}catch(D){return""}}function Mn(D){return`${D.appName}!${D.appId}`}const cn=new Map;function en(D,C){const M=Mn(D);_n(M,C),function Li(D,C){const M=function bn(){return!wr&&"BroadcastChannel"in self&&(wr=new BroadcastChannel("[Firebase] FID Change"),wr.onmessage=D=>{_n(D.data.key,D.data.fid)}),wr}();M&&M.postMessage({key:D,fid:C}),function rs(){0===cn.size&&wr&&(wr.close(),wr=null)}()}(M,C)}function _n(D,C){const M=cn.get(D);if(M)for(const F of M)F(C)}let wr=null;const Rn="firebase-installations-store";let is=null;function ht(){return is||(is=(0,ae.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Rn)}})),is}function Ir(D,C){return En.apply(this,arguments)}function En(){return(En=(0,R.Z)(function*(D,C){const M=Mn(D),Z=(yield ht()).transaction(Rn,"readwrite"),oe=Z.objectStore(Rn),Ne=yield oe.get(M);return yield oe.put(C,M),yield Z.done,(!Ne||Ne.fid!==C.fid)&&en(D,C.fid),C})).apply(this,arguments)}function nn(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,R.Z)(function*(D){const C=Mn(D),F=(yield ht()).transaction(Rn,"readwrite");yield F.objectStore(Rn).delete(C),yield F.done})).apply(this,arguments)}function Or(D,C){return er.apply(this,arguments)}function er(){return(er=(0,R.Z)(function*(D,C){const M=Mn(D),Z=(yield ht()).transaction(Rn,"readwrite"),oe=Z.objectStore(Rn),Ne=yield oe.get(M),ze=C(Ne);return void 0===ze?yield oe.delete(M):yield oe.put(ze,M),yield Z.done,ze&&(!Ne||Ne.fid!==ze.fid)&&en(D,ze.fid),ze})).apply(this,arguments)}function wn(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,R.Z)(function*(D){let C;const M=yield Or(D.appConfig,F=>{const Z=Cs(F),oe=$t(D,Z);return C=oe.registrationPromise,oe.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function Cs(D){return Di(D||{fid:Ke(),registrationStatus:0})}function $t(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(We.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function lt(D,C){return rt.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:ai(D)}:{installationEntry:C}}function rt(){return(rt=(0,R.Z)(function*(D,C){try{const M=yield ye(D,C);return Ir(D.appConfig,M)}catch(M){throw Ge(M)&&409===M.customData.serverCode?yield nn(D.appConfig):yield Ir(D.appConfig,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function ai(D){return ui.apply(this,arguments)}function ui(){return(ui=(0,R.Z)(function*(D){let C=yield Lt(D.appConfig);for(;1===C.registrationStatus;)yield Fe(100),C=yield Lt(D.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield wn(D);return F||M}return C})).apply(this,arguments)}function Lt(D){return Or(D,C=>{if(!C)throw We.create("installation-not-found");return Di(C)})}function Di(D){return function Nn(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function dn(D,C){return ct.apply(this,arguments)}function ct(){return(ct=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:C},M){const F=Pr(D,M),Z=he(D,M),oe=C.getImmediate({optional:!0});if(oe){const wt=yield oe.getHeartbeatsHeader();wt&&Z.append("x-firebase-client",wt)}const ze={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:re,appId:D.appId}})},ut=yield _e(()=>fetch(F,ze));if(ut.ok)return Ae(yield ut.json());throw yield we("Generate Auth Token",ut)})).apply(this,arguments)}function Pr(D,{fid:C}){return`${Oe(D)}/${C}/authTokens:generate`}function $(D){return U.apply(this,arguments)}function U(){return(U=(0,R.Z)(function*(D,C=!1){let M;const F=yield Or(D.appConfig,oe=>{if(!yt(oe))throw We.create("not-registered");const Ne=oe.authToken;if(!C&&Qt(Ne))return oe;if(1===Ne.requestStatus)return M=L(D,C),oe;{if(!navigator.onLine)throw We.create("app-offline");const ze=Kn(oe);return M=Me(D,ze),ze}});return M?yield M:F.authToken})).apply(this,arguments)}function L(D,C){return B.apply(this,arguments)}function B(){return(B=(0,R.Z)(function*(D,C){let M=yield H(D.appConfig);for(;1===M.authToken.requestStatus;)yield Fe(100),M=yield H(D.appConfig);const F=M.authToken;return 0===F.requestStatus?$(D,C):F})).apply(this,arguments)}function H(D){return Or(D,C=>{if(!yt(C))throw We.create("not-registered");return function J(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Me(D,C){return He.apply(this,arguments)}function He(){return(He=(0,R.Z)(function*(D,C){try{const M=yield dn(D,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield Ir(D.appConfig,F),M}catch(M){if(!Ge(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ir(D.appConfig,F)}else yield nn(D.appConfig);throw M}})).apply(this,arguments)}function yt(D){return void 0!==D&&2===D.registrationStatus}function Qt(D){return 2===D.requestStatus&&!function Kt(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function Kn(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function W(){return(W=(0,R.Z)(function*(D){const C=D,{installationEntry:M,registrationPromise:F}=yield wn(C);return F?F.catch(console.error):$(C).catch(console.error),M.fid})).apply(this,arguments)}function Ye(){return(Ye=(0,R.Z)(function*(D,C=!1){const M=D;return yield ot(M),(yield $(M,C)).token})).apply(this,arguments)}function ot(D){return Et.apply(this,arguments)}function Et(){return(Et=(0,R.Z)(function*(D){const{registrationPromise:C}=yield wn(D);C&&(yield C)})).apply(this,arguments)}function Xo(D){return We.create("missing-app-config-values",{valueName:D})}const qr="installations",xt=D=>{const C=D.getProvider("app").getImmediate(),M=function nr(D){if(!D||!D.options)throw Xo("App Configuration");if(!D.name)throw Xo("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!D.options[M])throw Xo(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},hn=D=>{const C=D.getProvider("app").getImmediate(),M=(0,se._getProvider)(C,qr).getImmediate();return{getId:()=>function q(D){return W.apply(this,arguments)}(M),getToken:Z=>function Ce(D){return Ye.apply(this,arguments)}(M,Z)}};(function kr(){(0,se._registerComponent)(new ge.wA(qr,xt,"PUBLIC")),(0,se._registerComponent)(new ge.wA("installations-internal",hn,"PRIVATE"))})(),(0,se.registerVersion)(ve,z),(0,se.registerVersion)(ve,z,"esm2017");const ss="@firebase/remote-config",On=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class uc{constructor(C,M,F,Z){this.client=C,this.storage=M,this.storageCache=F,this.logger=Z}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Z=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Z}.`),Z}fetch(C){var M=this;return(0,R.Z)(function*(){const[F,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Z;C.eTag=Z&&Z.eTag;const oe=yield M.client.fetch(C),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ne),oe})()}}function za(D=navigator){return D.languages&&D.languages[0]||D.language}class $n{constructor(C,M,F,Z,oe,Ne){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=Z,this.apiKey=oe,this.appId=Ne}fetch(C){var M=this;return(0,R.Z)(function*(){var F,Z,oe;const[Ne,ze]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,_t={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},gt={sdk_version:M.sdkVersion,app_instance_id:Ne,app_instance_id_token:ze,app_id:M.appId,language_code:za()},Cn={method:"POST",headers:_t,body:JSON.stringify(gt)},dr=fetch(wt,Cn),lo=new Promise((pi,gi)=>{C.signal.addEventListener(()=>{const Vc=new Error("The operation was aborted.");Vc.name="AbortError",gi(Vc)})});let Vs;try{yield Promise.race([dr,lo]),Vs=yield dr}catch(pi){let gi="fetch-client-network";throw"AbortError"===(null===(F=pi)||void 0===F?void 0:F.name)&&(gi="fetch-timeout"),On.create(gi,{originalErrorMessage:null===(Z=pi)||void 0===Z?void 0:Z.message})}let qi=Vs.status;const hu=Vs.headers.get("ETag")||void 0;let ll,Us;if(200===Vs.status){let pi;try{pi=yield Vs.json()}catch(gi){throw On.create("fetch-client-parse",{originalErrorMessage:null===(oe=gi)||void 0===oe?void 0:oe.message})}ll=pi.entries,Us=pi.state}if("INSTANCE_STATE_UNSPECIFIED"===Us?qi=500:"NO_CHANGE"===Us?qi=304:("NO_TEMPLATE"===Us||"EMPTY_CONFIG"===Us)&&(ll={}),304!==qi&&200!==qi)throw On.create("fetch-status",{httpStatus:qi});return{status:qi,eTag:hu,config:ll}})()}}class as{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,R.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var Z=this;return(0,R.Z)(function*(){yield function lc(D,C){return new Promise((M,F)=>{const Z=Math.max(C-Date.now(),0),oe=setTimeout(M,Z);D.addEventListener(()=>{clearTimeout(oe),F(On.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const oe=yield Z.client.fetch(C);return yield Z.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Vf(D){if(!(D instanceof le.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(oe))throw oe;const Ne={throttleEndTimeMillis:Date.now()+(0,le.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Ne),Z.attemptFetch(C,Ne)}})()}}class Bf{constructor(C,M,F,Z,oe){this.app=C,this._client=M,this._storageCache=F,this._storage=Z,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ea(D,C){var M;const F=D.target.error||void 0;return On.create(C,{originalErrorMessage:F&&(null===(M=F)||void 0===M?void 0:M.message)})}const So="app_namespace_store";class hc{constructor(C,M,F,Z=function $f(){return new Promise((D,C)=>{var M;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Z=>{C(ea(Z,"storage-open"))},F.onsuccess=Z=>{D(Z.target.result)},F.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(So,{keyPath:"compositeKey"})}}catch(F){C(On.create("storage-open",{originalErrorMessage:null===(M=F)||void 0===M?void 0:M.message}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,R.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,oe)=>{var Ne;const ut=F.transaction([So],"readonly").objectStore(So),wt=M.createCompositeKey(C);try{const _t=ut.get(wt);_t.onerror=gt=>{oe(ea(gt,"storage-get"))},_t.onsuccess=gt=>{const Cn=gt.target.result;Z(Cn?Cn.value:void 0)}}catch(_t){oe(On.create("storage-get",{originalErrorMessage:null===(Ne=_t)||void 0===Ne?void 0:Ne.message}))}})})()}set(C,M){var F=this;return(0,R.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((oe,Ne)=>{var ze;const wt=Z.transaction([So],"readwrite").objectStore(So),_t=F.createCompositeKey(C);try{const gt=wt.put({compositeKey:_t,value:M});gt.onerror=Cn=>{Ne(ea(Cn,"storage-set"))},gt.onsuccess=()=>{oe()}}catch(gt){Ne(On.create("storage-set",{originalErrorMessage:null===(ze=gt)||void 0===ze?void 0:ze.message}))}})})()}delete(C){var M=this;return(0,R.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,oe)=>{var Ne;const ut=F.transaction([So],"readwrite").objectStore(So),wt=M.createCompositeKey(C);try{const _t=ut.delete(wt);_t.onerror=gt=>{oe(ea(gt,"storage-delete"))},_t.onsuccess=()=>{Z()}}catch(_t){oe(On.create("storage-delete",{originalErrorMessage:null===(Ne=_t)||void 0===Ne?void 0:Ne.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class xo{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,R.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Z=C.storage.getActiveConfig(),oe=yield M;oe&&(C.lastFetchStatus=oe);const Ne=yield F;Ne&&(C.lastSuccessfulFetchTimestampMillis=Ne);const ze=yield Z;ze&&(C.activeConfig=ze)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function _m(){return ta.apply(this,arguments)}function ta(){return(ta=(0,R.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Hf(){(0,se._registerComponent)(new ge.wA("remote-config",function D(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),Z=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw On.create("registration-window");if(!(0,le.hl)())throw On.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ne,appId:ze}=F.options;if(!oe)throw On.create("registration-project-id");if(!Ne)throw On.create("registration-api-key");if(!ze)throw On.create("registration-app-id");const ut=new hc(ze,F.name,M=M||"firebase"),wt=new xo(ut),_t=new pe.Yd(ss);_t.logLevel=pe.in.ERROR;const gt=new $n(Z,se.SDK_VERSION,M,oe,Ne,ze),Cn=new as(gt,ut),dr=new uc(Cn,ut,wt,_t),lo=new Bf(F,dr,wt,ut,_t);return function an(D){const C=(0,le.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(lo),lo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(ss,"0.3.11"),(0,se.registerVersion)(ss,"0.3.11","esm2017")}();const Ss="/firebase-messaging-sw.js",di="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ra="google.c.a.c_id",Zd="google.c.a.c_l",Gf="google.c.a.ts",Ys="google.c.a.e";var ls=(()=>{return(D=ls||(ls={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ls;var D})();function Ci(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pc(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Z=new Uint8Array(F.length);for(let oe=0;oe<F.length;++oe)Z[oe]=F.charCodeAt(oe);return Z}const Cr="fcm_token_details_db",gc="fcm_token_object_Store";function mc(D){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,R.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Cr))return null;let C=null;return(yield(0,ae.X3)(Cr,5,{upgrade:(F=(0,R.Z)(function*(Z,oe,Ne,ze){var ut;if(oe<2||!Z.objectStoreNames.contains(gc))return;const wt=ze.objectStore(gc),_t=yield wt.index("fcmSenderId").get(D);if(yield wt.clear(),_t)if(2===oe){const gt=_t;if(!gt.auth||!gt.p256dh||!gt.endpoint)return;C={token:gt.fcmToken,createTime:null!==(ut=gt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:gt.auth,p256dh:gt.p256dh,endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:"string"==typeof gt.vapidKey?gt.vapidKey:Ci(gt.vapidKey)}}}else if(3===oe){const gt=_t;C={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:Ci(gt.auth),p256dh:Ci(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:Ci(gt.vapidKey)}}}else if(4===oe){const gt=_t;C={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:Ci(gt.auth),p256dh:Ci(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:Ci(gt.vapidKey)}}}}),function(oe,Ne,ze,ut){return F.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Cr),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),qa(C)?C:null;var F}),Wa.apply(this,arguments)}function qa(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const cs="firebase-messaging-store";let Ku=null;function fn(){return Ku||(Ku=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(cs)}})),Ku}function ia(D){return xs.apply(this,arguments)}function xs(){return(xs=(0,R.Z)(function*(D){const C=rr(D),F=yield(yield fn()).transaction(cs).objectStore(cs).get(C);if(F)return F;{const Z=yield mc(D.appConfig.senderId);if(Z)return yield un(D,Z),Z}})).apply(this,arguments)}function un(D,C){return Za.apply(this,arguments)}function Za(){return(Za=(0,R.Z)(function*(D,C){const M=rr(D),Z=(yield fn()).transaction(cs,"readwrite");return yield Z.objectStore(cs).put(C,M),yield Z.done,C})).apply(this,arguments)}function sa(D){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,R.Z)(function*(D){const C=rr(D),F=(yield fn()).transaction(cs,"readwrite");yield F.objectStore(cs).delete(C),yield F.done})).apply(this,arguments)}function rr({appConfig:D}){return D.appId}const Pn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ds(D,C){return ir.apply(this,arguments)}function ir(){return(ir=(0,R.Z)(function*(D,C){var M;const F=yield Rs(D),Z=Js(C),oe={method:"POST",headers:F,body:JSON.stringify(Z)};let Ne;try{Ne=yield(yield fetch(Ms(D.appConfig),oe)).json()}catch(ze){throw Pn.create("token-subscribe-failed",{errorInfo:null===(M=ze)||void 0===M?void 0:M.toString()})}if(Ne.error)throw Pn.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Pn.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function Mo(D,C){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,R.Z)(function*(D,C){var M;const F=yield Rs(D),Z=Js(C.subscriptionOptions),oe={method:"PATCH",headers:F,body:JSON.stringify(Z)};let Ne;try{Ne=yield(yield fetch(`${Ms(D.appConfig)}/${C.token}`,oe)).json()}catch(ze){throw Pn.create("token-update-failed",{errorInfo:null===(M=ze)||void 0===M?void 0:M.toString()})}if(Ne.error)throw Pn.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Pn.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Zu(D,C){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,R.Z)(function*(D,C){var M;const Z={method:"DELETE",headers:yield Rs(D)};try{const Ne=yield(yield fetch(`${Ms(D.appConfig)}/${C}`,Z)).json();if(Ne.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(oe){throw Pn.create("token-unsubscribe-failed",{errorInfo:null===(M=oe)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function Ms({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Rs(D){return mt.apply(this,arguments)}function mt(){return(mt=(0,R.Z)(function*({appConfig:D,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Js({p256dh:D,auth:C,endpoint:M,vapidKey:F}){const Z={web:{endpoint:M,auth:C,p256dh:D}};return F!==Zs&&(Z.web.applicationPubKey=F),Z}const Qa=6048e5;function yc(D){return oa.apply(this,arguments)}function oa(){return(oa=(0,R.Z)(function*(D){const C=yield Ja(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Ci(C.getKey("auth")),p256dh:Ci(C.getKey("p256dh"))},F=yield ia(D.firebaseDependencies);if(F){if(_c(F.subscriptionOptions,M))return Date.now()>=F.createTime+Qa?Yd(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Zu(D.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return Re(D.firebaseDependencies,M)}return Re(D.firebaseDependencies,M)})).apply(this,arguments)}function vc(D){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,R.Z)(function*(D){const C=yield ia(D.firebaseDependencies);C&&(yield Zu(D.firebaseDependencies,C.token),yield sa(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Yd(D,C){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,R.Z)(function*(D,C){try{const M=yield Mo(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield un(D.firebaseDependencies,F),M}catch(M){throw yield vc(D),M}})).apply(this,arguments)}function Re(D,C){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,R.Z)(function*(D,C){const F={token:yield ds(D,C),createTime:Date.now(),subscriptionOptions:C};return yield un(D,F),F.token})).apply(this,arguments)}function Ja(D,C){return mn.apply(this,arguments)}function mn(){return(mn=(0,R.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pc(C)})})).apply(this,arguments)}function _c(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function hs(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Bi(D,C){if(!C.notification)return;D.notification={};const M=C.notification.title;M&&(D.notification.title=M);const F=C.notification.body;F&&(D.notification.body=F);const Z=C.notification.image;Z&&(D.notification.image=Z)}(C,D),function Yu(D,C){!C.data||(D.data=C.data)}(C,D),function aa(D,C){var M,F,Z,oe,Ne;if(!C.fcmOptions&&!(null===(M=C.notification)||void 0===M?void 0:M.click_action))return;D.fcmOptions={};const ze=null!==(Z=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(oe=C.notification)||void 0===oe?void 0:oe.click_action;ze&&(D.fcmOptions.link=ze);const ut=null===(Ne=C.fcmOptions)||void 0===Ne?void 0:Ne.analytics_label;ut&&(D.fcmOptions.analyticsLabel=ut)}(C,D),C}function Qd(D){return"object"==typeof D&&!!D&&ra in D}function Ec(D,C){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function Xs(D){return Pn.create("missing-app-config-values",{valueName:D})}Ec("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ec("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class sr{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function wc(D){if(!D||!D.options)throw Xs("App Configuration Object");if(!D.name)throw Xs("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of C)if(!M[F])throw Xs(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ji(D){return No.apply(this,arguments)}function No(){return(No=(0,R.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Ss,{scope:di}),D.swRegistration.update().catch(()=>{})}catch(M){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=M)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function Oo(D,C){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,R.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield ji(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Jd(D,C){return Po.apply(this,arguments)}function Po(){return(Po=(0,R.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Zs)})).apply(this,arguments)}function ua(){return(ua=(0,R.Z)(function*(D,C){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield Jd(D,null==C?void 0:C.vapidKey),yield Oo(D,null==C?void 0:C.serviceWorkerRegistration),yc(D)})).apply(this,arguments)}function Qu(D,C,M){return ko.apply(this,arguments)}function ko(){return(ko=(0,R.Z)(function*(D,C,M){const F=Dc(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[ra],message_name:M[Zd],message_time:M[Gf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Dc(D){switch(D){case ls.NOTIFICATION_CLICKED:return"notification_open";case ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ju(){return(Ju=(0,R.Z)(function*(D,C){const M=C.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===ls.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(hs(M)):D.onMessageHandler.next(hs(M)));const F=M.data;Qd(F)&&"1"===F[Ys]&&(yield Qu(D,M.messageType,F))})).apply(this,arguments)}const la="@firebase/messaging",eo=D=>{const C=new sr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function bc(D,C){return Ju.apply(this,arguments)}(C,M)),C},Cc=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Ic(D,C){return ua.apply(this,arguments)}(C,F)}};function Xa(){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,R.Z)(function*(){try{yield(0,le.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xd(){(0,se._registerComponent)(new ge.wA("messaging",eo,"PUBLIC")),(0,se._registerComponent)(new ge.wA("messaging-internal",Cc,"PRIVATE")),(0,se.registerVersion)(la,"0.9.16"),(0,se.registerVersion)(la,"0.9.16","esm2017")}();const Tc="analytics",zf="firebase_id",da="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ha="https://www.googletagmanager.com/gtag/js",Zn=new pe.Yd("@firebase/analytics");function Sc(D){return Promise.all(D.map(C=>C.catch(M=>M)))}function Wf(D,C){const M=document.createElement("script");M.src=`${ha}?l=${D}&id=${C}`,M.async=!0,document.head.appendChild(M)}function Fo(D,C,M,F,Z,oe){return xc.apply(this,arguments)}function xc(){return(xc=(0,R.Z)(function*(D,C,M,F,Z,oe){const Ne=F[Z];try{if(Ne)yield C[Ne];else{const ut=(yield Sc(M)).find(wt=>wt.measurementId===Z);ut&&(yield C[ut.appId])}}catch(ze){Zn.error(ze)}D("config",Z,oe)})).apply(this,arguments)}function el(D,C,M,F,Z){return no.apply(this,arguments)}function no(){return(no=(0,R.Z)(function*(D,C,M,F,Z){try{let oe=[];if(Z&&Z.send_to){let Ne=Z.send_to;Array.isArray(Ne)||(Ne=[Ne]);const ze=yield Sc(M);for(const ut of Ne){const wt=ze.find(gt=>gt.measurementId===ut),_t=wt&&C[wt.appId];if(!_t){oe=[];break}oe.push(_t)}}0===oe.length&&(oe=Object.values(C)),yield Promise.all(oe),D("event",F,Z||{})}catch(oe){Zn.error(oe)}})).apply(this,arguments)}function Tn(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(ha))return C;return null}const at=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fa=new class Ti{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Lo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Mc(D){return pn.apply(this,arguments)}function pn(){return(pn=(0,R.Z)(function*(D){var C;const{appId:M,apiKey:F}=D,Z={method:"GET",headers:Lo(F)},oe=da.replace("{app-id}",M),Ne=yield fetch(oe,Z);if(200!==Ne.status&&304!==Ne.status){let ze="";try{const ut=yield Ne.json();(null===(C=ut.error)||void 0===C?void 0:C.message)&&(ze=ut.error.message)}catch(ut){}throw at.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:ze})}return Ne.json()})).apply(this,arguments)}function Rc(D){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,R.Z)(function*(D,C=fa,M){const{appId:F,apiKey:Z,measurementId:oe}=D.options;if(!F)throw at.create("no-app-id");if(!Z){if(oe)return{measurementId:oe,appId:F};throw at.create("no-api-key")}const Ne=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new tu;return setTimeout((0,R.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),Os({appId:F,apiKey:Z,measurementId:oe},Ne,ze,C)})).apply(this,arguments)}function Os(D,C,M){return It.apply(this,arguments)}function It(){return(It=(0,R.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:M},F,Z=fa){var oe,Ne;const{appId:ze,measurementId:ut}=D;try{yield Kf(F,C)}catch(wt){if(ut)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null===(oe=wt)||void 0===oe?void 0:oe.message}]`),{appId:ze,measurementId:ut};throw wt}try{const wt=yield Mc(D);return Z.deleteThrottleMetadata(ze),wt}catch(wt){const _t=wt;if(!Nc(_t)){if(Z.deleteThrottleMetadata(ze),ut)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null==_t?void 0:_t.message}]`),{appId:ze,measurementId:ut};throw wt}const gt=503===Number(null===(Ne=null==_t?void 0:_t.customData)||void 0===Ne?void 0:Ne.httpStatus)?(0,le.$s)(M,Z.intervalMillis,30):(0,le.$s)(M,Z.intervalMillis),Cn={throttleEndTimeMillis:Date.now()+gt,backoffCount:M+1};return Z.setThrottleMetadata(ze,Cn),Zn.debug(`Calling attemptFetch again in ${gt} millis`),Os(D,Cn,F,Z)}})).apply(this,arguments)}function Kf(D,C){return new Promise((M,F)=>{const Z=Math.max(C-Date.now(),0),oe=setTimeout(M,Z);D.addEventListener(()=>{clearTimeout(oe),F(at.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Nc(D){if(!(D instanceof le.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class tu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let nu,ya;function Ps(){return(Ps=(0,R.Z)(function*(D,C,M,F,Z){if(Z&&Z.global)D("event",M,F);else{const oe=yield C;D("event",M,Object.assign(Object.assign({},F),{send_to:oe}))}})).apply(this,arguments)}function ru(D){ya=D}function va(D){nu=D}function iu(){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,R.Z)(function*(){var D;if(!(0,le.hl)())return Zn.warn(at.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(C){return Zn.warn(at.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function or(){return(or=(0,R.Z)(function*(D,C,M,F,Z,oe,Ne){var ze;const ut=Rc(D);ut.then(dr=>{M[dr.measurementId]=dr.appId,D.options.measurementId&&dr.measurementId!==D.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${dr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(dr=>Zn.error(dr)),C.push(ut);const wt=iu().then(dr=>{if(dr)return F.getId()}),[_t,gt]=yield Promise.all([ut,wt]);Tn()||Wf(oe,_t.measurementId),ya&&(Z("consent","default",ya),ru(void 0)),Z("js",new Date);const Cn=null!==(ze=null==Ne?void 0:Ne.config)&&void 0!==ze?ze:{};return Cn.origin="firebase",Cn.update=!0,null!=gt&&(Cn[zf]=gt),Z("config",_t.measurementId,Cn),nu&&(Z("set",nu),va(void 0)),_t.measurementId})).apply(this,arguments)}class nl{constructor(C){this.app=C}_delete(){return delete vr[this.app.options.appId],Promise.resolve()}}let vr={},ar=[];const io={};let Ai,yn,zi="dataLayer",Si=!1;function su(D,C,M){!function Wi(){const D=[];if((0,le.ru)()&&D.push("This is a browser extension environment."),(0,le.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),M=at.create("invalid-analytics-context",{errorInfo:C});Zn.warn(M.message)}}();const F=D.options.appId;if(!F)throw at.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw at.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vr[F])throw at.create("already-exists",{id:F});if(!Si){!function ps(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(zi);const{wrappedGtag:oe,gtagCore:Ne}=function qf(D,C,M,F,Z){let oe=function(...Ne){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(oe=window[Z]),window[Z]=function tl(D,C,M,F){function oe(){return(oe=(0,R.Z)(function*(Ne,ze,ut){try{"event"===Ne?yield el(D,C,M,ze,ut):"config"===Ne?yield Fo(D,C,M,F,ze,ut):"consent"===Ne?D("consent","update",ut):D("set",ze)}catch(wt){Zn.error(wt)}})).apply(this,arguments)}return function Z(Ne,ze,ut){return oe.apply(this,arguments)}}(oe,D,C,M),{gtagCore:oe,wrappedGtag:window[Z]}}(vr,ar,io,zi,"gtag");yn=oe,Ai=Ne,Si=!0}return vr[F]=function Oc(D,C,M,F,Z,oe,Ne){return or.apply(this,arguments)}(D,ar,io,C,Ai,zi,M),new nl(D)}function Pc(){return kc.apply(this,arguments)}function kc(){return(kc=(0,R.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}const Sn="@firebase/analytics";!function ao(){(0,se._registerComponent)(new ge.wA(Tc,(C,{options:M})=>su(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new ge.wA("analytics-internal",function D(C){try{const M=C.getProvider(Tc).getImmediate();return{logEvent:(F,Z,oe)=>function xi(D,C,M,F){D=(0,le.m9)(D),function Yn(D,C,M,F,Z){return Ps.apply(this,arguments)}(yn,vr[D.app.options.appId],C,M,F).catch(Z=>Zn.error(Z))}(M,F,Z,oe)}}catch(M){throw at.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(Sn,"0.8.0"),(0,se.registerVersion)(Sn,"0.8.0","esm2017")}();var Yf=P(4408),Ar=P(7565);const il=new class Qr extends Ar.v{}(class rl extends Yf.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):C.flush(this)}});var wa=P(4986),ms=P(8306),sl=P(8505),ol=P(9468),Ot=P(5363);const Qf=new p.GfV("7.4.1"),Mi="__angularfire_symbol__analyticsIsSupportedValue",lr="__angularfire_symbol__analyticsIsSupported",uo="__angularfire_symbol__remoteConfigIsSupportedValue",Fs="__angularfire_symbol__remoteConfigIsSupported",au="__angularfire_symbol__messagingIsSupportedValue",uu="__angularfire_symbol__messagingIsSupported";function Jf(D,C,M){if(C){if(1===C.length)return C[0];const oe=C.filter(Ne=>Ne.app===M);if(1===oe.length)return oe[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[lr]||(globalThis[lr]=Pc().then(D=>globalThis[Mi]=D).catch(()=>globalThis[Mi]=!1)),globalThis[uu]||(globalThis[uu]=Xa().then(D=>globalThis[au]=D).catch(()=>globalThis[au]=!1)),globalThis[Fs]||(globalThis[Fs]=_m().then(D=>globalThis[uo]=D).catch(()=>globalThis[uo]=!1));const xn=(D,C)=>{const M=C?[C]:(0,V.C6)(),F=[];return M.forEach(Z=>{Z.container.getProvider(D).instances.forEach(Ne=>{F.includes(Ne)||F.push(Ne)})}),F};function cr(){}class Ia{constructor(C,M=il){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const Z=this.zone;return this.delegate.schedule(function(Ne){Z.runGuarded(()=>{C.apply(this,[Ne])})},M,F)}}class Fc{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cr,{},cr,cr)),M.pipe((0,sl.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ls=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Ia(Zone.current)),this.insideAngular=M.run(()=>new Ia(Zone.current,wa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function fi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function lu(D){return fi().ngZone.runOutsideAngular(()=>D())}function ys(D){return fi().ngZone.run(()=>D())}function cu(D){return fi(),function du(D){return function(M){return(M=M.lift(new Fc(D.ngZone))).pipe((0,ol.R)(D.outsideAngular),(0,Ot.Q)(D.insideAngular))}}(fi())(D)}const Jr=(D,C)=>function(){const F=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),ys(()=>D.apply(void 0,F))},Ut=(D,C)=>function(){let M;const F=arguments;for(let oe=0;oe<arguments.length;oe++)"function"==typeof F[oe]&&(C&&(M||(M=ys(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cr,{},cr,cr)))),F[oe]=Jr(F[oe],M));const Z=lu(()=>D.apply(this,F));if(!C){if(Z instanceof ms.y){const oe=fi();return Z.pipe((0,ol.R)(oe.outsideAngular),(0,Ot.Q)(oe.insideAngular))}return ys(()=>Z)}return Z instanceof ms.y?Z.pipe(cu):Z instanceof Promise?ys(()=>new Promise((oe,Ne)=>Z.then(ze=>ys(()=>oe(ze)),ze=>ys(()=>Ne(ze))))):"function"==typeof Z&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),Z.apply(this,arguments)}:ys(()=>Z)}},6457:(tt,De,P)=>{P.d(De,{$:()=>Ms,A:()=>j,B:()=>xe,G:()=>hn,H:()=>rn,J:()=>as,L:()=>Qt,M:()=>ta,N:()=>na,P:()=>wa,Q:()=>ra,R:()=>oo,T:()=>Zd,U:()=>Zs,V:()=>ls,W:()=>Ci,X:()=>mc,Y:()=>Ya,Z:()=>ds,_:()=>Mo,a:()=>Fr,a0:()=>yc,a1:()=>vc,a2:()=>Yd,a3:()=>Re,a4:()=>Ja,a5:()=>_c,a6:()=>Bi,a7:()=>Yu,a8:()=>Qd,a9:()=>Ec,aA:()=>Cn,aB:()=>ze,aC:()=>ys,aD:()=>lu,aE:()=>Ue,aI:()=>Lo,aL:()=>Ys,aa:()=>ji,ab:()=>Oo,ac:()=>Jd,af:()=>Qu,ag:()=>Dc,ah:()=>bc,ak:()=>cs,al:()=>Xu,an:()=>ha,ao:()=>xc,ap:()=>Ln,aq:()=>_e,ar:()=>Rt,as:()=>ot,at:()=>Ge,au:()=>lh,av:()=>qi,aw:()=>Oe,ax:()=>te,ay:()=>ne,az:()=>Kt,b:()=>at,c:()=>Fs,d:()=>ih,e:()=>uu,f:()=>cu,g:()=>M,h:()=>Ut,i:()=>Lr,j:()=>oe,k:()=>np,l:()=>ou,m:()=>ip,o:()=>ae,r:()=>Yf,s:()=>Zf,u:()=>il});var p=P(5861),V=P(2090),R=P(9681),se=P(655),le=P(1877),ge=P(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new le.Yd("@firebase/auth");function We(v,...f){be.logLevel<=le.in.ERROR&&be.error(`Auth (${R.SDK_VERSION}): ${v}`,...f)}function Ge(v,...f){throw qe(v,...f)}function Oe(v,...f){return qe(v,...f)}function Ae(v,f,m){const w=Object.assign(Object.assign({},ke()),{[f]:m});return new V.LL("auth","Firebase",w).create(f,{appName:v.name})}function we(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ge(v,"argument-error"),Ae(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(v,...f){if("string"!=typeof v){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return Be.create(v,...f)}function te(v,f,...m){if(!v)throw qe(f,...m)}function he(v){const f="INTERNAL ASSERTION FAILED: "+v;throw We(f),new Error(f)}function _e(v,f){v||he(f)}const Y=new Map;function ne(v){_e(v instanceof Function,"Expected a class definition");let f=Y.get(v);return f?(_e(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Y.set(v,f),f)}function ue(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Fe(){return"http:"===dt()||"https:"===dt()}function dt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ke{constructor(f,m){this.shortDelay=f,this.longDelay=m,_e(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function qt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fe()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(v,f){_e(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Mn{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new Ke(3e4,6e4);function Mt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Yt(v,f,m,w){return _n.apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(v,f,m,w,A={}){return Li(v,A,(0,p.Z)(function*(){let O={},ee={};w&&("GET"===f?ee=w:O={body:JSON.stringify(w)});const Te=(0,V.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),Qe=yield v._getAdditionalHeaders();return Qe["Content-Type"]="application/json",v.languageCode&&(Qe["X-Firebase-Locale"]=v.languageCode),Mn.fetch()(oi(v,v.config.apiHost,m,Te),Object.assign({method:f,headers:Qe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Li(v,f,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(v,f,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},cn),f);try{const A=new Ii(v),O=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const ee=yield O.json();if("needConfirmation"in ee)throw Rn(v,"account-exists-with-different-credential",ee);if(O.ok&&!("errorMessage"in ee))return ee;{const Te=O.ok?ee.errorMessage:ee.error.message,[Qe,pt]=Te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qe)throw Rn(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Qe)throw Rn(v,"email-already-in-use",ee);if("USER_DISABLED"===Qe)throw Rn(v,"user-disabled",ee);const Ct=w[Qe]||Qe.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw Ae(v,Ct,pt);Ge(v,Ct)}}catch(A){if(A instanceof V.ZR)throw A;Ge(v,"network-request-failed")}})).apply(this,arguments)}function bn(v,f,m,w){return rs.apply(this,arguments)}function rs(){return(rs=(0,p.Z)(function*(v,f,m,w,A={}){const O=yield Yt(v,f,m,w,A);return"mfaPendingCredential"in O&&Ge(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function oi(v,f,m,w){const A=`${f}${m}?${w}`;return v.config.emulator?on(v.config,A):`${v.config.apiScheme}://${A}`}class Ii{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Oe(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(v,f,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const A=Oe(v,f,w);return A.customData._tokenResponse=m,A}function ht(){return(ht=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ir(v,f){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function nn(v,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Or(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function tr(){return(tr=(0,p.Z)(function*(v,f=!1){const m=(0,V.m9)(v),w=yield m.getIdToken(f),A=$t(w);te(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,ee=null==O?void 0:O.sign_in_provider;return{claims:A,token:w,authTime:Or(Cs(A.auth_time)),issuedAtTime:Or(Cs(A.iat)),expirationTime:Or(Cs(A.exp)),signInProvider:ee||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Cs(v){return 1e3*Number(v)}function $t(v){var f;const[m,w,A]=v.split(".");if(void 0===m||void 0===w||void 0===A)return We("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,V.tV)(w);return O?JSON.parse(O):(We("Failed to decode base64 JWT payload"),null)}catch(O){return We("Caught error parsing JWT payload as JSON",null===(f=O)||void 0===f?void 0:f.toString()),null}}function rt(v,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof V.ZR&&ui(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function ui({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Lt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,p.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(m=w)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Di{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Or(this.lastLoginAt),this.creationTime=Or(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(v){return dn.apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(v){var f;const m=v.auth,w=yield v.getIdToken(),A=yield rt(v,nn(m,{idToken:w}));te(null==A?void 0:A.users.length,m,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const ee=(null===(f=O.providerUserInfo)||void 0===f?void 0:f.length)?U(O.providerUserInfo):[],Te=$(v.providerData,ee),Ct=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==Te?void 0:Te.length)),kn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Te,metadata:new Di(O.createdAt,O.lastLoginAt),isAnonymous:Ct};Object.assign(v,kn)})).apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(v){const f=(0,V.m9)(v);yield Nn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function $(v,f){return[...v.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function U(v){return v.map(f=>{var{providerId:m}=f,w=(0,se._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function B(){return(B=(0,p.Z)(function*(v,f){const m=yield Li(v,{},(0,p.Z)(function*(){const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,ee=oi(v,A,"/v1/token",`key=${O}`),Te=yield v._getAdditionalHeaders();return Te["Content-Type"]="application/x-www-form-urlencoded",Mn.fetch()(ee,{method:"POST",headers:Te,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class H{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(void 0!==f.idToken,"internal-error"),te(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function lt(v){const f=$t(v);return te(f,"internal-error"),te(void 0!==f.exp,"internal-error"),te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,p.Z)(function*(){return te(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,p.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:ee}=yield function L(v,f){return B.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(A,O,Number(ee))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:A,expirationTime:O}=m,ee=new H;return w&&(te("string"==typeof w,"internal-error",{appName:f}),ee.refreshToken=w),A&&(te("string"==typeof A,"internal-error",{appName:f}),ee.accessToken=A),O&&(te("number"==typeof O,"internal-error",{appName:f}),ee.expirationTime=O),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new H,this.toJSON())}_performRefresh(){return he("not implemented")}}function Me(v,f){te("string"==typeof v||void 0===v,"internal-error",{appName:f})}class He{constructor(f){var{uid:m,auth:w,stsTokenManager:A}=f,O=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Di(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const w=yield rt(m,m.stsTokenManager.getToken(m.auth,f));return te(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function wn(v){return tr.apply(this,arguments)}(this,f)}reload(){return function ct(v){return Pr.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new He(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,p.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield Nn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield rt(f,function is(v,f){return ht.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,A,O,ee,Te,Qe,pt,Ct;const kn=null!==(w=m.displayName)&&void 0!==w?w:void 0,Ki=null!==(A=m.email)&&void 0!==A?A:void 0,Bs=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,gu=null!==(ee=m.photoURL)&&void 0!==ee?ee:void 0,pl=null!==(Te=m.tenantId)&&void 0!==Te?Te:void 0,mu=null!==(Qe=m._redirectEventId)&&void 0!==Qe?Qe:void 0,hh=null!==(pt=m.createdAt)&&void 0!==pt?pt:void 0,yu=null!==(Ct=m.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:gl,emailVerified:op,isAnonymous:fh,providerData:ml,stsTokenManager:yl}=m;te(gl&&yl,f,"internal-error");const Sm=H.fromJSON(this.name,yl);te("string"==typeof gl,f,"internal-error"),Me(kn,f.name),Me(Ki,f.name),te("boolean"==typeof op,f,"internal-error"),te("boolean"==typeof fh,f,"internal-error"),Me(Bs,f.name),Me(gu,f.name),Me(pl,f.name),Me(mu,f.name),Me(hh,f.name),Me(yu,f.name);const Ca=new He({uid:gl,auth:f,email:Ki,emailVerified:op,displayName:kn,isAnonymous:fh,photoURL:gu,phoneNumber:Bs,tenantId:pl,stsTokenManager:Sm,createdAt:hh,lastLoginAt:yu});return ml&&Array.isArray(ml)&&(Ca.providerData=ml.map(Zi=>Object.assign({},Zi))),mu&&(Ca._redirectEventId=mu),Ca}static _fromIdTokenResponse(f,m,w=!1){return(0,p.Z)(function*(){const A=new H;A.updateFromServerResponse(m);const O=new He({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield Nn(O),O})()}}const Qt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,w){var A=this;return(0,p.Z)(function*(){A.storage[m]=w})()}_get(m){var w=this;return(0,p.Z)(function*(){const A=w.storage[m];return void 0===A?null:A})()}_remove(m){var w=this;return(0,p.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function Kt(v,f,m){return`firebase:${v}:${f}:${m}`}class Kn{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:A,name:O}=this.auth;this.fullUserKey=Kt(this.userKey,A.apiKey,O),this.fullPersistenceKey=Kt("persistence",A.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?He._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,p.Z)(function*(){if(!m.length)return new Kn(ne(Qt),f,w);const A=(yield Promise.all(m.map(function(){var pt=(0,p.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let O=A[0]||ne(Qt);const ee=Kt(w,f.config.apiKey,f.name);let Te=null;for(const pt of m)try{const Ct=yield pt._get(ee);if(Ct){const kn=He._fromJSON(f,Ct);pt!==O&&(Te=kn),O=pt;break}}catch(Ct){}const Qe=A.filter(pt=>pt._shouldAllowMigration);return O._shouldAllowMigration&&Qe.length?(O=Qe[0],Te&&(yield O._set(ee,Te.toJSON())),yield Promise.all(m.map(function(){var pt=(0,p.Z)(function*(Ct){if(Ct!==O)try{yield Ct._remove(ee)}catch(kn){}});return function(Ct){return pt.apply(this,arguments)}}())),new Kn(O,f,w)):new Kn(O,f,w)})()}}function J(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ye(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(q(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Et(f))return"Blackberry";if(Ht(f))return"Webos";if(W(f))return"Safari";if((f.includes("chrome/")||Ce(f))&&!f.includes("edge/"))return"Chrome";if(ot(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function q(v=(0,V.z$)()){return/firefox\//i.test(v)}function W(v=(0,V.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ce(v=(0,V.z$)()){return/crios\//i.test(v)}function Ye(v=(0,V.z$)()){return/iemobile/i.test(v)}function ot(v=(0,V.z$)()){return/android/i.test(v)}function Et(v=(0,V.z$)()){return/blackberry/i.test(v)}function Ht(v=(0,V.z$)()){return/webos/i.test(v)}function Rt(v=(0,V.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ln(v=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Dr(v=(0,V.z$)()){return Rt(v)||ot(v)||Ht(v)||Et(v)||/windows phone/i.test(v)||Ye(v)}function nr(v,f=[]){let m;switch(v){case"Browser":m=J((0,V.z$)());break;case"Worker":m=`${J((0,V.z$)())}-${v}`;break;default:m=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${R.SDK_VERSION}/${w}`}class Xo{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=O=>new Promise((ee,Te)=>{try{ee(f(O))}catch(Qe){Te(Qe)}});w.onAbort=m,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){var w;if(m.auth.currentUser===f)return;const A=[];try{for(const O of m.queue)yield O(f),O.onAbort&&A.push(O.onAbort)}catch(O){A.reverse();for(const ee of A)try{ee()}catch(Te){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=O)||void 0===w?void 0:w.message})}})()}}class qr{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.beforeStateQueue=new Xo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=ne(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var A,O;if(!w._deleted&&(w.persistenceManager=yield Kn.create(w,f),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(ee){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var w;const A=yield m.assertedPersistence.getCurrentUser();let O=A,ee=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Te=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Qe=null==O?void 0:O._redirectEventId,pt=yield m.tryRedirectSignIn(f);(!Te||Te===Qe)&&(null==pt?void 0:pt.user)&&(O=pt.user,ee=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(ee)try{yield m.beforeStateQueue.runMiddleware(O)}catch(Te){O=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Te))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(A){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){var w;try{yield Nn(f)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ft(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const w=f?(0,V.m9)(f):null;return w&&te(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,p.Z)(function*(){if(!w._deleted)return f&&te(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,p.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(ne(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,p.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&ne(f)||m._popupRedirectResolver;te(w,m,"argument-error"),m.redirectPersistenceManager=yield Kn.create(m,[ne(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var w,A;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,A){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return te(ee,this,"internal-error"),ee.then(()=>O(this.currentUser)),"function"==typeof m?f.addObserver(m,w,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=nr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Ue(v){return(0,V.m9)(v)}class xt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hn(v,f,m){const w=Ue(v);te(w._canInitEmulator,w,"emulator-config-failed"),te(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),O=kr(f),{host:ee,port:Te}=function ss(v){const f=kr(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const O=A[1];return{host:O,port:Vn(w.substr(O.length+1))}}{const[O,ee]=w.split(":");return{host:O,port:Vn(ee)}}}(f);w.config.emulator={url:`${O}//${ee}${null===Te?"":`:${Te}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ee,port:Te,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function os(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function kr(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Vn(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class rn{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return he("not implemented")}_getIdTokenResponse(f){return he("not implemented")}_linkToIdToken(f,m){return he("not implemented")}_getReauthenticationResolver(f){return he("not implemented")}}function Ws(v,f){return On.apply(this,arguments)}function On(){return(On=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:resetPassword",Mt(v,f))})).apply(this,arguments)}function Tt(v,f){return bo.apply(this,arguments)}function bo(){return(bo=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Co(v,f){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:update",Mt(v,f))})).apply(this,arguments)}function jn(){return(jn=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signInWithPassword",Mt(v,f))})).apply(this,arguments)}function Ts(v,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:sendOobCode",Mt(v,f))})).apply(this,arguments)}function br(v,f){return an.apply(this,arguments)}function an(){return(an=(0,p.Z)(function*(v,f){return Ts(v,f)})).apply(this,arguments)}function oc(v,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,p.Z)(function*(v,f){return Ts(v,f)})).apply(this,arguments)}function bi(v,f){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(v,f){return Ts(v,f)})).apply(this,arguments)}function ac(v,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,p.Z)(function*(v,f){return Ts(v,f)})).apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signInWithEmailLink",Mt(v,f))})).apply(this,arguments)}function uc(){return(uc=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signInWithEmailLink",Mt(v,f))})).apply(this,arguments)}class za extends rn{constructor(f,m,w,A=null){super("password",w),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new za(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new za(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function Ao(v,f){return jn.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function As(v,f){return ci.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ge(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return Tt(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function qd(v,f){return uc.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Ge(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function $n(v,f){return lc.apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signInWithIdp",Mt(v,f))})).apply(this,arguments)}class as extends rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new as(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ge("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=m,O=(0,se._T)(m,["providerId","signInMethod"]);if(!w||!A)return null;const ee=new as(w,A);return ee.idToken=O.idToken||void 0,ee.accessToken=O.accessToken||void 0,ee.secret=O.secret,ee.nonce=O.nonce,ee.pendingToken=O.pendingToken||null,ee}_getIdTokenResponse(f){return $n(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,$n(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,$n(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,V.xO)(m)}return f}}function Uf(v,f){return cc.apply(this,arguments)}function cc(){return(cc=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:sendVerificationCode",Mt(v,f))})).apply(this,arguments)}function ea(){return(ea=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Mt(v,f))})).apply(this,arguments)}function dc(){return(dc=(0,p.Z)(function*(v,f){const m=yield bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Mt(v,f));if(m.temporaryProof)throw Rn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const jf={USER_NOT_FOUND:"user-not-found"};function hc(){return(hc=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Mt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),jf)})).apply(this,arguments)}class xo extends rn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new xo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new xo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Bf(v,f){return ea.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function So(v,f){return dc.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function $f(v,f){return hc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:O}=f;return w||m||A||O?new xo({verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:O}):null}}class us{constructor(f){var m,w,A,O,ee,Te;const Qe=(0,V.zd)((0,V.pd)(f)),pt=null!==(m=Qe.apiKey)&&void 0!==m?m:null,Ct=null!==(w=Qe.oobCode)&&void 0!==w?w:null,kn=function Hf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Qe.mode)&&void 0!==A?A:null);te(pt&&Ct&&kn,"argument-error"),this.apiKey=pt,this.operation=kn,this.code=Ct,this.continueUrl=null!==(O=Qe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ee=Qe.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(Te=Qe.tenantId)&&void 0!==Te?Te:null}static parseLink(f){const m=function Kd(v){const f=(0,V.zd)((0,V.pd)(v)).link,m=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(v)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||m||f||v}(f);try{return new us(m)}catch(w){return null}}}let ta=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return za._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const A=us.parseLink(w);return te(A,"argument-error"),za._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ss{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class di extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Zs extends di{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return te("providerId"in m&&"signInMethod"in m,"argument-error"),as._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Zs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Zs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:O,nonce:ee,providerId:Te}=f;if(!w&&!A&&!m&&!O||!Te)return null;try{return new Zs(Te)._credential({idToken:m,accessToken:w,nonce:ee,pendingToken:O})}catch(Qe){return null}}}let na=(()=>{class v extends di{constructor(){super("facebook.com")}static credential(m){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ra=(()=>{class v extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:A}=m;if(!w&&!A)return null;try{return v.credential(w,A)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Zd=(()=>{class v extends di{constructor(){super("github.com")}static credential(m){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ys extends rn{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return $n(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,$n(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,$n(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:O}=m;return w&&A&&O&&w===A?new Ys(w,O):null}static _create(f,m){return new Ys(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ls extends Ss{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ls.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ls.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Ys.fromJSON(f);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return Ys._create(w,m)}catch(A){return null}}}let Ci=(()=>{class v extends di{constructor(){super("twitter.com")}static credential(m,w){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=m;if(!w||!A)return null;try{return v.credential(w,A)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function pc(v,f){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signUp",Mt(v,f))})).apply(this,arguments)}class Tr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,A=!1){return(0,p.Z)(function*(){const O=yield He._fromIdTokenResponse(f,w,A),ee=gc(w);return new Tr({user:O,providerId:ee,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=gc(w);return new Tr({user:f,providerId:A,_tokenResponse:w,operationType:m})})()}}function gc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function mc(v){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,p.Z)(function*(v){var f;const m=Ue(v);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new Tr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield pc(m,{returnSecureToken:!0}),A=yield Tr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class qa extends V.ZR{constructor(f,m,w,A){var O;super(m.code,m.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,qa.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,A){return new qa(f,m,w,A)}}function Ka(v,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?qa._fromErrorAndOperation(v,O,f,w):O})}function qu(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function cs(v,f){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,p.Z)(function*(v,f){const m=(0,V.m9)(v);yield xs(!0,m,f);const{providerUserInfo:w}=yield Ir(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=qu(w||[]);return m.providerData=m.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function fn(v,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,p.Z)(function*(v,f,m=!1){const w=yield rt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return Tr._forOperation(v,"link",w)})).apply(this,arguments)}function xs(v,f,m){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(v,f,m){yield Nn(f);const A=!1===v?"provider-already-linked":"no-such-provider";te(qu(f.providerData).has(m)===v,f.auth,A)})).apply(this,arguments)}function Za(v,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(v,f,m=!1){var w;const{auth:A}=v,O="reauthenticate";try{const ee=yield rt(v,Ka(A,O,f,v),m);te(ee.idToken,A,"internal-error");const Te=$t(ee.idToken);te(Te,A,"internal-error");const{sub:Qe}=Te;return te(v.uid===Qe,A,"user-mismatch"),Tr._forOperation(v,O,ee)}catch(ee){throw"auth/user-not-found"===(null===(w=ee)||void 0===w?void 0:w.code)&&Ge(A,"user-mismatch"),ee}})).apply(this,arguments)}function Qs(v,f){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(v,f,m=!1){const w="signIn",A=yield Ka(v,w,f),O=yield Tr._fromIdTokenResponse(v,w,A);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Ya(v,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(v,f){return Qs(Ue(v),f)})).apply(this,arguments)}function ds(v,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,p.Z)(function*(v,f){const m=(0,V.m9)(v);return yield xs(!1,m,f.providerId),fn(m,f)})).apply(this,arguments)}function Mo(v,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,p.Z)(function*(v,f){return Za((0,V.m9)(v),f)})).apply(this,arguments)}function Zu(v,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,p.Z)(function*(v,f){return bn(v,"POST","/v1/accounts:signInWithCustomToken",Mt(v,f))})).apply(this,arguments)}function Ms(v,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(v,f){const m=Ue(v),w=yield Zu(m,{token:f,returnSecureToken:!0}),A=yield Tr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class mt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Js._fromServerResponse(f,m):Ge(f,"internal-error")}}class Js extends mt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Js(m)}}function Qa(v,f,m){var w;te((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function yc(v,f,m){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v),A={requestType:"PASSWORD_RESET",email:f};m&&Qa(w,A,m),yield oc(w,A)})).apply(this,arguments)}function vc(v,f,m){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,p.Z)(function*(v,f,m){yield Ws((0,V.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Yd(v,f){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(v,f){yield Co((0,V.m9)(v),{oobCode:f})})).apply(this,arguments)}function Re(v,f){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,p.Z)(function*(v,f){const m=(0,V.m9)(v),w=yield Ws(m,{oobCode:f}),A=w.requestType;switch(te(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(w.mfaInfo,m,"internal-error");default:te(w.email,m,"internal-error")}let O=null;return w.mfaInfo&&(O=mt._fromServerResponse(Ue(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function Ja(v,f){return mn.apply(this,arguments)}function mn(){return(mn=(0,p.Z)(function*(v,f){const{data:m}=yield Re((0,V.m9)(v),f);return m.email})).apply(this,arguments)}function _c(v,f,m){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(v,f,m){const w=Ue(v),A=yield pc(w,{returnSecureToken:!0,email:f,password:m}),O=yield Tr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Bi(v,f,m){return Ya((0,V.m9)(v),ta.credential(f,m))}function Yu(v,f,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v),A={requestType:"EMAIL_SIGNIN",email:f};te(m.handleCodeInApp,w,"argument-error"),m&&Qa(w,A,m),yield bi(w,A)})).apply(this,arguments)}function Qd(v,f){const m=us.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Ec(v,f,m){return wc.apply(this,arguments)}function wc(){return(wc=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v),A=ta.credentialWithLink(f,m||ue());return te(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ya(w,A)})).apply(this,arguments)}function Xs(v,f){return sr.apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:createAuthUri",Mt(v,f))})).apply(this,arguments)}function ji(v,f){return No.apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(v,f){const w={identifier:f,continueUri:Fe()?ue():"http://localhost"},{signinMethods:A}=yield Xs((0,V.m9)(v),w);return A||[]})).apply(this,arguments)}function Oo(v,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(v,f){const m=(0,V.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Qa(m.auth,A,f);const{email:O}=yield br(m.auth,A);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Jd(v,f,m){return Po.apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Qa(w.auth,O,m);const{email:ee}=yield ac(w.auth,O);ee!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ic(v,f){return ua.apply(this,arguments)}function ua(){return(ua=(0,p.Z)(function*(v,f){return Yt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Qu(v,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,V.m9)(v),O={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},ee=yield rt(w,Ic(w.auth,O));w.displayName=ee.displayName||null,w.photoURL=ee.photoUrl||null;const Te=w.providerData.find(({providerId:Qe})=>"password"===Qe);Te&&(Te.displayName=w.displayName,Te.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ee)})).apply(this,arguments)}function Dc(v,f){return Ju((0,V.m9)(v),f,null)}function bc(v,f){return Ju((0,V.m9)(v),null,f)}function Ju(v,f,m){return la.apply(this,arguments)}function la(){return(la=(0,p.Z)(function*(v,f,m){const{auth:w}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(O.email=f),m&&(O.password=m);const ee=yield rt(v,Tt(w,O));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class eo{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class Cc extends eo{constructor(f,m,w,A){super(f,m,w),this.username=A}}class Xd extends eo{constructor(f,m){super(f,"facebook.com",m)}}class Xa extends Cc{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Yr extends eo{constructor(f,m){super(f,"google.com",m)}}class eh extends Cc{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Xu(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ca(v){var f,m;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const ee=null===(m=null===(f=$t(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(ee)return new eo(O,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!w)return null;switch(w){case"facebook.com":return new Xd(O,A);case"github.com":return new Xa(O,A);case"google.com":return new Yr(O,A);case"twitter.com":return new eh(O,A,v.screenName||null);case"custom":case"anonymous":return new eo(O,null);default:return new eo(O,w,A)}}(m)}class fs{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new fs("enroll",f)}static _fromMfaPendingCredential(f){return new fs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return fs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return fs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class da{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=Ue(f),A=m.customData._serverResponse,O=(A.mfaInfo||[]).map(Te=>mt._fromServerResponse(w,Te));te(A.mfaPendingCredential,w,"internal-error");const ee=fs._fromMfaPendingCredential(A.mfaPendingCredential);return new da(ee,O,function(){var Te=(0,p.Z)(function*(Qe){const pt=yield Qe._process(w,ee);delete A.mfaInfo,delete A.mfaPendingCredential;const Ct=Object.assign(Object.assign({},A),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(m.operationType){case"signIn":const kn=yield Tr._fromIdTokenResponse(w,m.operationType,Ct);return yield w._updateCurrentUser(kn.user),kn;case"reauthenticate":return te(m.user,w,"internal-error"),Tr._forOperation(m.user,m.operationType,Ct);default:Ge(w,"internal-error")}});return function(Qe){return Te.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function ha(v,f){var m;const w=(0,V.m9)(v),A=f;return te(f.customData.operationType,w,"argument-error"),te(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),da._fromError(w,A)}function Zn(v,f){return Yt(v,"POST","/v2/accounts/mfaEnrollment:start",Mt(v,f))}class ps{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>mt._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new ps(f)}getSession(){var f=this;return(0,p.Z)(function*(){return fs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,p.Z)(function*(){const A=f,O=yield w.getSession(),ee=yield rt(w.user,A._process(w.user.auth,O,m));return yield w.user._updateTokensIfNecessary(ee),w.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){var w;const A="string"==typeof f?f:f.uid,O=yield m.user.getIdToken(),ee=yield rt(m.user,function Wf(v,f){return Yt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Mt(v,f))}(m.user.auth,{idToken:O,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Te})=>Te!==A),yield m.user._updateTokensIfNecessary(ee);try{yield m.user.reload()}catch(Te){if("auth/user-token-expired"!==(null===(w=Te)||void 0===w?void 0:w.code))throw Te}})()}}const Fo=new WeakMap;function xc(v){const f=(0,V.m9)(v);return Fo.has(f)||Fo.set(f,ps._fromUser(f)),Fo.get(f)}const el="__sak";class no{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(el,"1"),this.storage.removeItem(el),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const at=(()=>{class v extends no{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function tl(){const v=(0,V.z$)();return W(v)||Rt(v)}()&&function Vi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Dr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),O=this.localCache[w];A!==O&&m(w,O,A)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Te,Qe,pt)=>{this.notifyListeners(Te,pt)});const A=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Te=this.storage.getItem(A);if(m.newValue!==Te)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!w)return}const O=()=>{const Te=this.storage.getItem(A);!w&&this.localCache[A]===Te||this.notifyListeners(A,Te)},ee=this.storage.getItem(A);!function Nt(){return(0,V.w1)()&&10===document.documentMode}()||ee===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var A=()=>super._set,O=this;return(0,p.Z)(function*(){yield A().call(O,m,w),O.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,A=this;return(0,p.Z)(function*(){const O=yield w().call(A,m);return A.localCache[m]=JSON.stringify(O),O})()}_remove(m){var w=()=>super._remove,A=this;return(0,p.Z)(function*(){yield w().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),Fr=(()=>{class v extends no{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let fa=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(O=>O.isListeningto(m));if(w)return w;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,p.Z)(function*(){const A=m,{eventId:O,eventType:ee,data:Te}=A.data,Qe=w.handlersMap[ee];if(!(null==Qe?void 0:Qe.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:ee});const pt=Array.from(Qe).map(function(){var kn=(0,p.Z)(function*(Ki){return Ki(A.origin,Te)});return function(Ki){return kn.apply(this,arguments)}}()),Ct=yield function Ti(v){return Promise.all(v.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(pt);A.ports[0].postMessage({status:"done",eventId:O,eventType:ee,response:Ct})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Lo(v="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return v+m}class Mc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var A=this;return(0,p.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ee,Te;return new Promise((Qe,pt)=>{const Ct=Lo("",20);O.port1.start();const kn=setTimeout(()=>{pt(new Error("unsupported_event"))},w);Te={messageChannel:O,onMessage(Ki){const Bs=Ki;if(Bs.data.eventId===Ct)switch(Bs.data.status){case"ack":clearTimeout(kn),ee=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Qe(Bs.data.response);break;default:clearTimeout(kn),clearTimeout(ee),pt(new Error("invalid_response"))}}},A.handlers.add(Te),O.port1.addEventListener("message",Te.onMessage),A.target.postMessage({eventType:f,eventId:Ct,data:m},[O.port2])}).finally(()=>{Te&&A.removeMessageHandler(Te)})})()}}function pn(){return window}function Hi(){return void 0!==pn().WorkerGlobalScope&&"function"==typeof pn().importScripts}function It(){return(It=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const tu="firebaseLocalStorageDb",Yn="firebaseLocalStorage",Ps="fbase_key";class ro{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ks(v,f){return v.transaction([Yn],f?"readwrite":"readonly").objectStore(Yn)}function Gi(){const v=indexedDB.open(tu,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Yn,{keyPath:Ps})}catch(A){m(A)}}),v.addEventListener("success",(0,p.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Yn)?f(w):(w.close(),yield function pa(){const v=indexedDB.deleteDatabase(tu);return new ro(v).toPromise()}(),f(yield Gi()))}))})}function ga(v,f,m){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,p.Z)(function*(v,f,m){const w=ks(v,!0).put({[Ps]:f,value:m});return new ro(w).toPromise()})).apply(this,arguments)}function gs(){return(gs=(0,p.Z)(function*(v,f){const m=ks(v,!1).get(f),w=yield new ro(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ya(v,f){const m=ks(v,!0).delete(f);return new ro(m).toPromise()}const Lr=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield Gi()),m.db})()}_withRetries(m){var w=this;return(0,p.Z)(function*(){let A=0;for(;;)try{const O=yield w._openDb();return yield m(O)}catch(O){if(A++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return Hi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=fa._getInstance(function Nc(){return Hi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(A,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(A,O){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var w,A;if(m.activeServiceWorker=yield function Os(){return It.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Mc(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Kf(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Gi();return yield ga(m,el,"1"),yield ya(m,el),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(O=>ga(O,m,w)),A.localCache[m]=w,A.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,p.Z)(function*(){const A=yield w._withRetries(O=>function ma(v,f){return gs.apply(this,arguments)}(O,m));return w.localCache[m]=A,A})()}_remove(m){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(A=>ya(A,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const w=yield m._withRetries(ee=>{const Te=ks(ee,!1).getAll();return new ro(Te).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:ee,value:Te}of w)O.add(ee),JSON.stringify(m.localCache[ee])!==JSON.stringify(Te)&&(m.notifyListeners(ee,Te),A.push(ee));for(const ee of Object.keys(m.localCache))m.localCache[ee]&&!O.has(ee)&&(m.notifyListeners(ee,null),A.push(ee));return A})()}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Oc(v,f){return Yt(v,"POST","/v2/accounts/mfaSignIn:start",Mt(v,f))}function vr(){return(vr=(0,p.Z)(function*(v){return(yield Yt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function io(v){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=A=>{const O=Oe("internal-error");O.customData=A,m(O)},w.type="text/javascript",w.charset="UTF-8",function ar(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function zi(v){return`__${v}${Math.floor(1e6*Math.random())}`}const yn=1e12;class Si{constructor(f){this.auth=f,this.counter=yn,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new ur(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||yn;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||yn))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var w;return null===(w=m._widgets.get(f||yn))||void 0===w||w.execute(),""})()}}class ur{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;te(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Wi(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const su=zi("rcb"),nh=new Ke(3e4,6e4);class Pc{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=pn().grecaptcha)||void 0===f?void 0:f.render)}load(f,m=""){return te(function kc(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(pn().grecaptcha):new Promise((w,A)=>{const O=pn().setTimeout(()=>{A(Oe(f,"network-request-failed"))},nh.get());pn()[su]=()=>{pn().clearTimeout(O),delete pn()[su];const Te=pn().grecaptcha;if(!Te)return void A(Oe(f,"internal-error"));const Qe=Te.render;Te.render=(pt,Ct)=>{const kn=Qe(pt,Ct);return this.counter++,kn},this.hostLanguage=m,w(Te)},io(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:su,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),A(Oe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!!(null===(m=pn().grecaptcha)||void 0===m?void 0:m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _a{load(f){return(0,p.Z)(function*(){return new Si(f)})()}clearedOneInstance(){}}const hi="recaptcha",wm={theme:"light",type:"image"};class oo{constructor(f,m=Object.assign({},wm),w){this.parameters=m,this.type=hi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ue(w),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _a:new Pc,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(O=>{const ee=Te=>{!Te||(f.tokenChangeListeners.delete(ee),O(Te))};f.tokenChangeListeners.add(ee),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=pn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){te(Fe()&&!Hi(),f.auth,"internal-error"),yield function rh(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function nl(v){return vr.apply(this,arguments)}(f.auth);te(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xi{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=xo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Zf(v,f,m){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(v,f,m){const w=Ue(v),A=yield Ar(w,f,(0,V.m9)(m));return new xi(A,O=>Ya(w,O))})).apply(this,arguments)}function ou(v,f,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v);yield xs(!1,w,"phone");const A=yield Ar(w.auth,f,(0,V.m9)(m));return new xi(A,O=>ds(w,O))})).apply(this,arguments)}function Yf(v,f,m){return rl.apply(this,arguments)}function rl(){return(rl=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v),A=yield Ar(w.auth,f,(0,V.m9)(m));return new xi(A,O=>Mo(w,O))})).apply(this,arguments)}function Ar(v,f,m){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(v,f,m){var w;const A=yield m.verify();try{let O;if(te("string"==typeof A,v,"argument-error"),te(m.type===hi,v,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const ee=O.session;if("phoneNumber"in O)return te("enroll"===ee.type,v,"internal-error"),(yield Zn(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te("signin"===ee.type,v,"internal-error");const Te=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return te(Te,v,"missing-multi-factor-info"),(yield Oc(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Te,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield Uf(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return ee}}finally{m._reset()}})).apply(this,arguments)}function il(v,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(v,f){yield fn((0,V.m9)(v),f)})).apply(this,arguments)}let wa=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Ue(m)}verifyPhoneNumber(m,w){return Ar(this.auth,m,(0,V.m9)(w))}static credential(m,w){return xo._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:A}=m;return w&&A?xo._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ms(v,f){return f?ne(f):(te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class sl extends rn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return $n(f,this._buildIdpRequest())}_linkToIdToken(f,m){return $n(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return $n(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function ol(v){return Qs(v.auth,new sl(v),v.bypassAuthState)}function Ot(v){const{auth:f,user:m}=v;return te(m,f,"internal-error"),Za(m,new sl(v),v.bypassAuthState)}function Qf(v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(v){const{auth:f,user:m}=v;return te(m,f,"internal-error"),fn(m,new sl(v),v.bypassAuthState)})).apply(this,arguments)}class lr{constructor(f,m,w,A,O=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(w,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:O,tenantId:ee,error:Te,type:Qe}=f;if(Te)return void m.reject(Te);const pt={auth:m.auth,requestUri:w,sessionId:A,tenantId:ee||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Qe)(pt))}catch(Ct){m.reject(Ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ol;case"linkViaPopup":case"linkViaRedirect":return Qf;case"reauthViaPopup":case"reauthViaRedirect":return Ot;default:Ge(this.auth,"internal-error")}}resolve(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uo=new Ke(2e3,1e4);function Fs(v,f,m){return au.apply(this,arguments)}function au(){return(au=(0,p.Z)(function*(v,f,m){const w=Ue(v);we(v,f,Ss);const A=ms(w,m);return new ul(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function uu(v,f,m){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v);we(w.auth,f,Ss);const A=ms(w.auth,m);return new ul(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function ih(v,f,m){return al.apply(this,arguments)}function al(){return(al=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v);we(w.auth,f,Ss);const A=ms(w.auth,m);return new ul(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let ul=(()=>{class v extends lr{constructor(m,w,A,O,ee){super(m,w,O,ee),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const w=yield m.execute();return te(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,p.Z)(function*(){_e(1===m.filter.length,"Popup operations only handle one event");const w=Lo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Oe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,uo.get())};m()}}return v.currentPopupAction=null,v})();const xn=new Map;class cr extends lr{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let w=xn.get(m.auth._key());if(!w){try{const O=(yield function Ia(v,f){return Fc.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(O)}catch(A){w=()=>Promise.reject(A)}xn.set(m.auth._key(),w)}return m.bypassAuthState||xn.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Fc(){return(Fc=(0,p.Z)(function*(v,f){const m=Lc(f),w=sh(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(m));return yield w._remove(m),A})).apply(this,arguments)}function Ls(v,f){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(v,f){return sh(v)._set(Lc(f),"true")})).apply(this,arguments)}function lu(){xn.clear()}function ys(v,f){xn.set(v._key(),f)}function sh(v){return ne(v._redirectPersistence)}function Lc(v){return Kt("pendingRedirect",v.config.apiKey,v.name)}function cu(v,f,m){return function du(v,f,m){return Jr.apply(this,arguments)}(v,f,m)}function Jr(){return(Jr=(0,p.Z)(function*(v,f,m){const w=Ue(v);we(v,f,Ss);const A=ms(w,m);return yield Ls(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function Ut(v,f,m){return function D(v,f,m){return C.apply(this,arguments)}(v,f,m)}function C(){return(C=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v);we(w.auth,f,Ss);const A=ms(w.auth,m);yield Ls(A,w.auth);const O=yield wt(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function M(v,f,m){return function F(v,f,m){return Z.apply(this,arguments)}(v,f,m)}function Z(){return(Z=(0,p.Z)(function*(v,f,m){const w=(0,V.m9)(v);we(w.auth,f,Ss);const A=ms(w.auth,m);yield xs(!1,w,f.providerId),yield Ls(A,w.auth);const O=yield wt(w);return A._openRedirect(w.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function oe(v,f){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,p.Z)(function*(v,f){return yield Ue(v)._initializationPromise,ze(v,f,!1)})).apply(this,arguments)}function ze(v,f){return ut.apply(this,arguments)}function ut(){return(ut=(0,p.Z)(function*(v,f,m=!1){const w=Ue(v),A=ms(w,f),ee=yield new cr(w,A,m).execute();return ee&&!m&&(delete ee.user._redirectEventId,yield w._persistUserIfCurrent(ee.user),yield w._setRedirectUser(null,f)),ee})).apply(this,arguments)}function wt(v){return _t.apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(v){const f=Lo(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Cn{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Vs(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lo(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!lo(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Oe(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dr(f))}saveEventToCache(f){this.cachedEventUids.add(dr(f)),this.lastProcessedEventTime=Date.now()}}function dr(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function lo({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function qi(v){return hu.apply(this,arguments)}function hu(){return(hu=(0,p.Z)(function*(v,f={}){return Yt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const ll=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Us=/^https?/;function gi(){return(gi=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield qi(v);for(const m of f)try{if(Vc(m))return}catch(w){}Ge(v,"unauthorized-domain")})).apply(this,arguments)}function Vc(v){const f=ue(),{protocol:m,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&ee.hostname===w}if(!Us.test(m))return!1;if(ll.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const L_=new Ke(3e4,6e4);function oh(){const v=pn().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let cl=null;function ah(v){return cl=cl||function Xf(v){return new Promise((f,m)=>{var w,A,O;function ee(){oh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{oh(),m(Oe(v,"network-request-failed"))},timeout:L_.get()})}if(null===(A=null===(w=pn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(O=pn().gapi)||void 0===O?void 0:O.load)){const Te=zi("iframefcb");return pn()[Te]=()=>{gapi.load?ee():m(Oe(v,"network-request-failed"))},io(`https://apis.google.com/js/api.js?onload=${Te}`).catch(Qe=>m(Qe))}ee()}}).catch(f=>{throw cl=null,f})}(v),cl}const co=new Ke(5e3,15e3),Uc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Da(v){const f=v.config;te(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?on(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:R.SDK_VERSION},A=pu.get(v.config.apiHost);A&&(w.eid=A);const O=v._getFrameworks();return O.length&&(w.fw=O.join(",")),`${m}?${(0,V.xO)(w).slice(1)}`}function tp(){return tp=(0,p.Z)(function*(v){const f=yield ah(v),m=pn().gapi;return te(m,v,"internal-error"),f.open({where:document.body,url:Da(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uc,dontclear:!0},w=>new Promise(function(){var A=(0,p.Z)(function*(O,ee){yield w.restyle({setHideOnLeave:!1});const Te=Oe(v,"network-request-failed"),Qe=pn().setTimeout(()=>{ee(Te)},co.get());function pt(){pn().clearTimeout(Qe),O(w)}w.ping(pt).then(pt,()=>{ee(Te)})});return function(O,ee){return A.apply(this,arguments)}}()))}),tp.apply(this,arguments)}const ba={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hl{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function lh(v,f,m,w,A,O){te(v.config.authDomain,v,"auth-domain-config-required"),te(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:R.SDK_VERSION,eventId:A};if(f instanceof Ss){f.setDefaultLanguage(v.languageCode),ee.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(ee.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Qe,pt]of Object.entries(O||{}))ee[Qe]=pt}if(f instanceof di){const Qe=f.getScopes().filter(pt=>""!==pt);Qe.length>0&&(ee.scopes=Qe.join(","))}v.tenantId&&(ee.tid=v.tenantId);const Te=ee;for(const Qe of Object.keys(Te))void 0===Te[Qe]&&delete Te[Qe];return`${function vs({config:v}){return v.emulator?on(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,V.xO)(Te).slice(1)}`}const _s="webStorageSupport",np=class ch{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fr,this._completeRedirectFn=ze,this._overrideRedirectResult=ys}_openPopup(f,m,w,A){var O=this;return(0,p.Z)(function*(){var ee;_e(null===(ee=O.eventManagers[f._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const Te=lh(f,m,w,ue(),A);return function Im(v,f,m,w=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),ee=Math.max((window.screen.availWidth-w)/2,0).toString();let Te="";const Qe=Object.assign(Object.assign({},ba),{width:w.toString(),height:A.toString(),top:O,left:ee}),pt=(0,V.z$)().toLowerCase();m&&(Te=Ce(pt)?"_blank":m),q(pt)&&(f=f||"http://localhost",Qe.scrollbars="yes");const Ct=Object.entries(Qe).reduce((Ki,[Bs,gu])=>`${Ki}${Bs}=${gu},`,"");if(function Wr(v=(0,V.z$)()){var f;return Rt(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(pt)&&"_self"!==Te)return function fl(v,f){const m=document.createElement("a");m.href=v,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",Te),new hl(null);const kn=window.open(f||"",Te,Ct);te(kn,v,"popup-blocked");try{kn.focus()}catch(Ki){}return new hl(kn)}(f,Te,Lo())})()}_openRedirect(f,m,w,A){var O=this;return(0,p.Z)(function*(){return yield O._originValidation(f),function Rc(v){pn().location.href=v}(lh(f,m,w,ue(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:O}=this.eventManagers[m];return A?Promise.resolve(A):(_e(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const w=yield function ep(v){return tp.apply(this,arguments)}(f),A=new Cn(f);return w.register("authEvent",O=>(te(null==O?void 0:O.authEvent,f,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(_s,{type:_s},A=>{var O;const ee=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[_s];void 0!==ee&&m(!!ee),Ge(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function pi(v){return gi.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Dr()||W()||Rt()}};class rp extends class Cm{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new rp(f)}_finalizeEnroll(f,m,w){return function Sc(v,f){return Yt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(v,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function or(v,f){return Yt(v,"POST","/v2/accounts/mfaSignIn:finalize",Mt(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ip=(()=>{class v{constructor(){}static assertion(m){return rp._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Tm="@firebase/auth";class Am{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Hc(v){(0,R._registerComponent)(new ge.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:O,authDomain:ee}=w.options;return((Te,Qe)=>{te(O&&!O.includes(":"),"invalid-api-key",{appName:Te.name}),te(!(null==ee?void 0:ee.includes(":")),"argument-error",{appName:Te.name});const pt={apiKey:O,authDomain:ee,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nr(v)},Ct=new qr(Te,Qe,pt);return function ye(v,f){const m=(null==f?void 0:f.persistence)||[],w=(Array.isArray(m)?m:[m]).map(ne);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Ct,m),Ct})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new ge.wA("auth-internal",f=>{const m=Ue(f.getProvider("auth").getImmediate());return new Am(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(Tm,"0.20.5",function sp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,R.registerVersion)(Tm,"0.20.5","esm2017")}("Browser")},2090:(tt,De,P)=>{P.d(De,{$s:()=>Nn,BH:()=>$e,G6:()=>te,L:()=>ae,LL:()=>ue,Mn:()=>we,Sg:()=>xe,UG:()=>fe,US:()=>ge,ZB:()=>j,ZR:()=>ye,b$:()=>Ge,d:()=>Oe,eu:()=>_e,hl:()=>he,jU:()=>be,m9:()=>Pr,ne:()=>ht,pd:()=>Rn,r3:()=>Mt,ru:()=>We,tV:()=>ve,uI:()=>Be,vZ:()=>wr,w1:()=>Ae,xO:()=>oi,xb:()=>_n,z$:()=>ke,zI:()=>Y,zd:()=>Ii});const se=function($){const U=[];let L=0;for(let B=0;B<$.length;B++){let H=$.charCodeAt(B);H<128?U[L++]=H:H<2048?(U[L++]=H>>6|192,U[L++]=63&H|128):55296==(64512&H)&&B+1<$.length&&56320==(64512&$.charCodeAt(B+1))?(H=65536+((1023&H)<<10)+(1023&$.charCodeAt(++B)),U[L++]=H>>18|240,U[L++]=H>>12&63|128,U[L++]=H>>6&63|128,U[L++]=63&H|128):(U[L++]=H>>12|224,U[L++]=H>>6&63|128,U[L++]=63&H|128)}return U},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,U){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let H=0;H<$.length;H+=3){const Me=$[H],He=H+1<$.length,yt=He?$[H+1]:0,Qt=H+2<$.length,Kt=Qt?$[H+2]:0;let q=(15&yt)<<2|Kt>>6,W=63&Kt;Qt||(W=64,He||(q=64)),B.push(L[Me>>2],L[(3&Me)<<4|yt>>4],L[q],L[W])}return B.join("")},encodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa($):this.encodeByteArray(se($),U)},decodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?atob($):function($){const U=[];let L=0,B=0;for(;L<$.length;){const H=$[L++];if(H<128)U[B++]=String.fromCharCode(H);else if(H>191&&H<224){const Me=$[L++];U[B++]=String.fromCharCode((31&H)<<6|63&Me)}else if(H>239&&H<365){const Qt=((7&H)<<18|(63&$[L++])<<12|(63&$[L++])<<6|63&$[L++])-65536;U[B++]=String.fromCharCode(55296+(Qt>>10)),U[B++]=String.fromCharCode(56320+(1023&Qt))}else{const Me=$[L++],He=$[L++];U[B++]=String.fromCharCode((15&H)<<12|(63&Me)<<6|63&He)}}return U.join("")}(this.decodeStringToByteArray($,U))},decodeStringToByteArray($,U){this.init_();const L=U?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let H=0;H<$.length;){const Me=L[$.charAt(H++)],yt=H<$.length?L[$.charAt(H)]:0;++H;const Kt=H<$.length?L[$.charAt(H)]:64;++H;const J=H<$.length?L[$.charAt(H)]:64;if(++H,null==Me||null==yt||null==Kt||null==J)throw Error();B.push(Me<<2|yt>>4),64!==Kt&&(B.push(yt<<4&240|Kt>>2),64!==J&&B.push(Kt<<6&192|J))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},ae=function($){return function($){const U=se($);return ge.encodeByteArray(U,!0)}($).replace(/\./g,"")},ve=function($){try{return ge.decodeString($,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function j($,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return U}for(const L in U)!U.hasOwnProperty(L)||!re(L)||($[L]=j($[L],U[L]));return $}function re($){return"__proto__"!==$}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,L)=>{this.resolve=U,this.reject=L})}wrapCallback(U){return(L,B)=>{L?this.reject(L):this.resolve(B),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(L):U(L,B))}}}function xe($,U){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=U||"demo-project",H=$.iat||0,Me=$.sub||$.user_id;if(!Me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const He=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:H,exp:H+3600,auth_time:H,sub:Me,user_id:Me,firebase:{sign_in_provider:"custom",identities:{}}},$);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(He)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function be(){return"object"==typeof self&&self.self===self}function We(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Oe(){return ke().indexOf("Electron/")>=0}function Ae(){const $=ke();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function we(){return ke().indexOf("MSAppHost/")>=0}function te(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function _e(){return new Promise(($,U)=>{try{let L=!0;const B="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(B);H.onsuccess=()=>{H.result.close(),L||self.indexedDB.deleteDatabase(B),$(!0)},H.onupgradeneeded=()=>{L=!1},H.onerror=()=>{var Me;U((null===(Me=H.error)||void 0===Me?void 0:Me.message)||"")}}catch(L){U(L)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(U,L,B){super(L),this.code=U,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(U,L,B){this.service=U,this.serviceName=L,this.errors=B}create(U,...L){const B=L[0]||{},H=`${this.service}/${U}`,Me=this.errors[U],He=Me?function Fe($,U){return $.replace(dt,(L,B)=>{const H=U[B];return null!=H?String(H):`<${B}?>`})}(Me,B):"Error";return new ye(H,`${this.serviceName}: ${He} (${H}).`,B)}}const dt=/\{\$([^}]+)}/g;function Mt($,U){return Object.prototype.hasOwnProperty.call($,U)}function _n($){for(const U in $)if(Object.prototype.hasOwnProperty.call($,U))return!1;return!0}function wr($,U){if($===U)return!0;const L=Object.keys($),B=Object.keys(U);for(const H of L){if(!B.includes(H))return!1;const Me=$[H],He=U[H];if(bn(Me)&&bn(He)){if(!wr(Me,He))return!1}else if(Me!==He)return!1}for(const H of B)if(!L.includes(H))return!1;return!0}function bn($){return null!==$&&"object"==typeof $}function oi($){const U=[];for(const[L,B]of Object.entries($))Array.isArray(B)?B.forEach(H=>{U.push(encodeURIComponent(L)+"="+encodeURIComponent(H))}):U.push(encodeURIComponent(L)+"="+encodeURIComponent(B));return U.length?"&"+U.join("&"):""}function Ii($){const U={};return $.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[H,Me]=B.split("=");U[decodeURIComponent(H)]=decodeURIComponent(Me)}}),U}function Rn($){const U=$.indexOf("?");if(!U)return"";const L=$.indexOf("#",U);return $.substring(U,L>0?L:void 0)}function ht($,U){const L=new Ir($,U);return L.subscribe.bind(L)}class Ir{constructor(U,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{U(this)}).catch(B=>{this.error(B)})}next(U){this.forEachObserver(L=>{L.next(U)})}error(U){this.forEachObserver(L=>{L.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,L,B){let H;if(void 0===U&&void 0===L&&void 0===B)throw new Error("Missing Observer.");H=function nn($,U){if("object"!=typeof $||null===$)return!1;for(const L of U)if(L in $&&"function"==typeof $[L])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:L,complete:B},void 0===H.next&&(H.next=qn),void 0===H.error&&(H.error=qn),void 0===H.complete&&(H.complete=qn);const Me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(He){}}),this.observers.push(H),Me}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,U)}sendOne(U,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{L(this.observers[U])}catch(B){"undefined"!=typeof console&&console.error&&console.error(B)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qn(){}function Nn($,U=1e3,L=2){const B=U*Math.pow(L,$),H=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+H)}function Pr($){return $&&$._delegate?$._delegate:$}},2938:(tt,De,P)=>{var p=P(5e3);let V=null;function R(){return V}const pe=new p.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ve(){return(0,p.LFG)(j)}()},providedIn:"platform"}),n})();const z=new p.OlP("Location Initialized");let j=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){re()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){re()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function $e(){return new j((0,p.LFG)(pe))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function be(n){const e=(0,p.LFG)(pe).location;return new Ge((0,p.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new p.OlP("appBaseHref");let Ge=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Be(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Be(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ae),p.LFG(We,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ae),p.LFG(We,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(te(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Be,n.joinWithSlash=xe,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(ae))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function we(){return new Ae((0,p.LFG)(fe),(0,p.LFG)(ae))}()},providedIn:"root"}),n})();function te(n){return n.replace(/\/index.html$/,"")}const he={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var _e=(()=>((_e=_e||{})[_e.Decimal=0]="Decimal",_e[_e.Percent=1]="Percent",_e[_e.Currency=2]="Currency",_e[_e.Scientific=3]="Scientific",_e))(),ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Group=1]="Group",ue[ue.List=2]="List",ue[ue.PercentSign=3]="PercentSign",ue[ue.PlusSign=4]="PlusSign",ue[ue.MinusSign=5]="MinusSign",ue[ue.Exponential=6]="Exponential",ue[ue.SuperscriptingExponent=7]="SuperscriptingExponent",ue[ue.PerMille=8]="PerMille",ue[ue.Infinity=9]="Infinity",ue[ue.NaN=10]="NaN",ue[ue.TimeSeparator=11]="TimeSeparator",ue[ue.CurrencyDecimal=12]="CurrencyDecimal",ue[ue.CurrencyGroup=13]="CurrencyGroup",ue))();function _n(n,e){const t=(0,p.cg1)(n),r=t[p.wAp.NumberSymbols][e];if(void 0===r){if(e===ue.CurrencyDecimal)return t[p.wAp.NumberSymbols][ue.Decimal];if(e===ue.CurrencyGroup)return t[p.wAp.NumberSymbols][ue.Group]}return r}const Et=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function qr(n,e,t,r,o){const d=function hn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),o=r[0],u=r[1],d=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],g=d[0],E=d[1]||"";t.posPre=g.substr(0,g.indexOf("#"));for(let S=0;S<E.length;S++){const N=E.charAt(S);"0"===N?t.minFrac=t.maxFrac=S+1:"#"===N?t.maxFrac=S+1:t.posSuf+=N}const b=g.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,u){const S=o.length-t.posPre.length-t.posSuf.length,N=u.indexOf("#");t.negPre=u.substr(0,N).replace(/'/g,""),t.negSuf=u.substr(N+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Li(n,e){return(0,p.cg1)(n)[p.wAp.NumberFormats][e]}(e,_e.Currency),_n(e,ue.MinusSign));return d.minFrac=function er(n){let e;const t=he[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),d.maxFrac=d.minFrac,function Xo(n,e,t,r,o,u,d=!1){let g="",E=!1;if(isFinite(n)){let b=function ss(n){let r,o,u,d,g,e=Math.abs(n)+"",t=0;for((o=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(o<0&&(o=u),o+=+e.slice(u+1),e=e.substring(0,u)):o<0&&(o=e.length),u=0;"0"===e.charAt(u);u++);if(u===(g=e.length))r=[0],o=1;else{for(g--;"0"===e.charAt(g);)g--;for(o-=u,r=[],d=0;u<=g;u++,d++)r[d]=Number(e.charAt(u))}return o>22&&(r=r.splice(0,21),t=o-1,o=1),{digits:r,exponent:t,integerLen:o}}(n);d&&(b=function kr(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let S=e.minInt,N=e.minFrac,K=e.maxFrac;if(u){const Gt=u.match(Et);if(null===Gt)throw new Error(`${u} is not a valid digit info`);const tn=Gt[1],jt=Gt[3],Xt=Gt[5];null!=tn&&(S=os(tn)),null!=jt&&(N=os(jt)),null!=Xt?K=os(Xt):null!=jt&&N>K&&(K=N)}!function Vn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,o=r.length-n.integerLen;const u=Math.min(Math.max(e,o),t);let d=u+n.integerLen,g=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let N=d;N<r.length;N++)r[N]=0}else{o=Math.max(0,o),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let N=1;N<d;N++)r[N]=0}if(g>=5)if(d-1<0){for(let N=0;N>d;N--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;o<Math.max(0,u);o++)r.push(0);let E=0!==u;const b=e+n.integerLen,S=r.reduceRight(function(N,K,Q,me){return me[Q]=(K+=N)<10?K:K-10,E&&(0===me[Q]&&Q>=b?me.pop():E=!1),K>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(b,N,K);let Q=b.digits,me=b.integerLen;const je=b.exponent;let et=[];for(E=Q.every(Gt=>!Gt);me<S;me++)Q.unshift(0);for(;me<0;me++)Q.unshift(0);me>0?et=Q.splice(me,Q.length):(et=Q,Q=[0]);const kt=[];for(Q.length>=e.lgSize&&kt.unshift(Q.splice(-e.lgSize,Q.length).join(""));Q.length>e.gSize;)kt.unshift(Q.splice(-e.gSize,Q.length).join(""));Q.length&&kt.unshift(Q.join("")),g=kt.join(_n(t,r)),et.length&&(g+=_n(t,o)+et.join("")),je&&(g+=_n(t,ue.Exponential)+"+"+je)}else g=_n(t,ue.Infinity);return g=n<0&&!E?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,d,e,ue.CurrencyGroup,ue.CurrencyDecimal,o).replace("\xa4",t).replace("\xa4","").trim()}function os(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Ao{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ao(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),Ts(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ts(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ts(n,e){n.context.$implicit=e.item}let br=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new an,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class an{constructor(){this.$implicit=null,this.ngIf=null}}function oc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Zs=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,o="symbol",u,d){if(!function na(n){return!(null==n||""===n||n!=n)}(t))return null;d=d||this._locale,"boolean"==typeof o&&(o=o?"symbol":"code");let g=r||this._defaultCurrencyCode;"code"!==o&&(g="symbol"===o||"symbol-narrow"===o?function qn(n,e,t="en"){const r=function oi(n){return(0,p.cg1)(n)[p.wAp.Currencies]}(t)[n]||he[n]||[],o=r[1];return"narrow"===e&&"string"==typeof o?o:r[0]||n}(g,"symbol"===o?"wide":"narrow",d):o);try{return qr(function ra(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),d,g,r,u)}catch(E){throw function $n(n,e){return new p.vHH(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.soG,16),p.Y36(p.EJc,16))},n.\u0275pipe=p.Yjl({name:"currency",type:n,pure:!0}),n})();let Ys=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Tr(n){return"server"===n}let qa=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Ka((0,p.LFG)(pe),window)}),n})();class Ka{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qu(this.window.history)||qu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs extends class ia extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){V||(V=n)}(new xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Za(){return un=un||document.querySelector("base"),un?un.getAttribute("href"):null}();return null==t?null:function Qs(n){sa=sa||document.createElement("a"),sa.setAttribute("href",n);const e=sa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){un=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let sa,un=null;const rr=new p.OlP("TRANSITION_ID"),Pn=[{provide:p.ip1,useFactory:function Ya(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=R(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[rr,pe,p.zs3],multi:!0}];class ds{static init(){(0,p.VLi)(new ds)}addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ir=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Mo=new p.OlP("EventManagerPlugins");let Ui=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Zu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=R().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n extends Kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Rs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Rs))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Rs(n){R().remove(n)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Js=/%COMP%/g;function Ns(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ns(n,o,t):(o=o.replace(Js,n),t.push(o))}return t}function Re(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ja=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new mn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Bi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new Yu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ns(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ui),p.LFG(Ms),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class mn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=mt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=mt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Re(r)):this.eventManager.addEventListener(e,t,Re(r))}}class Bi extends mn{constructor(e,t,r,o){super(e),this.component=r;const u=Ns(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ro(n){return"_ngcontent-%COMP%".replace(Js,n)}(o+"-"+r.id),this.hostAttr=function Yd(n){return"_nghost-%COMP%".replace(Js,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Yu extends mn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ns(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let aa=(()=>{class n extends Zu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Qd=["alt","control","meta","shift"],wc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ji=(()=>{class n extends Zu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Qd.forEach(E=>{const b=r.indexOf(E);b>-1&&(r.splice(b,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=d,g}static getEventFullKey(t){let r="",o=function No(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Xs.hasOwnProperty(e)&&(e=Xs[e]))}return wc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Qd.forEach(u=>{u!=o&&sr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ic=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Oo(){xs.makeCurrent(),ds.init()},multi:!0},{provide:pe,useFactory:function Jd(){return(0,p.RDi)(document),document},deps:[]}]),ua=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Zr(){return new p.qLn},deps:[]},{provide:Mo,useClass:aa,multi:!0,deps:[pe,p.R0b,p.Lbi]},{provide:Mo,useClass:ji,multi:!0,deps:[pe]},{provide:Ja,useClass:Ja,deps:[Ui,Ms,p.AFp]},{provide:p.FYo,useExisting:Ja},{provide:Kr,useExisting:Ms},{provide:Ms,useClass:Ms,deps:[pe]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:Ui,useClass:Ui,deps:[Mo,p.R0b]},{provide:class fn{},useClass:ir,deps:[]}];let Qu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:rr,useExisting:p.AFp},Pn]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:ua,imports:[Ys,p.hGG]}),n})();"undefined"!=typeof window&&window;var Tn=P(8996),eu=P(7669);function at(...n){const e=(0,eu.yG)(n);return(0,Tn.D)(n,e)}var $i=P(7579);class Fr extends $i.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ti=P(8306);const{isArray:fa}=Array,{getPrototypeOf:Lo,prototype:Mc,keys:pn}=Object;function Rc(n){if(1===n.length){const e=n[0];if(fa(e))return{args:e,keys:null};if(function Hi(n){return n&&"object"==typeof n&&Lo(n)===Mc}(e)){const t=pn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Os=P(4671),It=P(4004);const{isArray:Kf}=Array;function tu(n){return(0,It.U)(e=>function Nc(n,e){return Kf(e)?n(...e):n(e)}(n,e))}function nu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Yn=P(5403),Ps=P(9672);function pa(n,e,t){n?(0,Ps.f)(t,n,e):e()}var Gi=P(576);function ga(n,e){const t=(0,Gi.m)(n)?n:()=>n,r=o=>o.error(t());return new Ti.y(e?o=>e.schedule(r,0,o):r)}const ma=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var gs=P(8189);function ru(...n){return function ya(){return(0,gs.J)(1)}()((0,Tn.D)(n,(0,eu.yG)(n)))}var va=P(8421);function iu(n){return new Ti.y(e=>{(0,va.Xf)(n()).subscribe(e)})}var Lr=P(515),Oc=P(727),or=P(4482);function nl(){return(0,or.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class vr extends Ti.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,or.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oc.w0.EMPTY)}return e}refCount(){return nl()(this)}}function ar(n,e){return(0,or.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,Yn.x)(r,E=>{null==o||o.unsubscribe();let b=0;const S=u++;(0,va.Xf)(n(E,S)).subscribe(o=(0,Yn.x)(r,N=>r.next(e?e(E,N,S,b++):N),()=>{o=null,g()}))},()=>{d=!0,g()}))})}function io(n){return n<=0?()=>Lr.E:(0,or.e)((e,t)=>{let r=0;e.subscribe((0,Yn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function zi(...n){const e=(0,eu.yG)(n);return(0,or.e)((t,r)=>{(e?ru(n,t,e):ru(n,t)).subscribe(r)})}function so(n,e,t,r,o){return(u,d)=>{let g=t,E=e,b=0;u.subscribe((0,Yn.x)(d,S=>{const N=b++;E=g?n(E,S,N):(g=!0,S),r&&d.next(E)},o&&(()=>{g&&d.next(E),d.complete()})))}}function Ai(n,e){return(0,or.e)(so(n,e,arguments.length>=2,!0))}function yn(n,e){return(0,or.e)((t,r)=>{let o=0;t.subscribe((0,Yn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Si(n){return(0,or.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Yn.x)(t,void 0,void 0,d=>{u=(0,va.Xf)(n(d,Si(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var ur=P(5577);function Wi(n,e){return(0,Gi.m)(e)?(0,ur.z)(n,e,1):(0,ur.z)(n,1)}function su(n){return n<=0?()=>Lr.E:(0,or.e)((e,t)=>{let r=[];e.subscribe((0,Yn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function nh(n=An){return(0,or.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function An(){return new ma}function Pc(n){return(0,or.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function _a(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yn((o,u)=>n(o,u,r)):Os.y,io(1),t?Pc(e):nh(()=>new ma))}var hi=P(8505);class oo{constructor(e,t){this.id=e,this.url=t}}class rh extends oo{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xi extends oo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zf extends oo{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sn extends oo{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ou extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ao extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yf extends oo{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rl extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class il{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ea{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ms{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ol{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class Qf{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mi(n){return new Qf(n)}const lr="ngNavigationCancelingError";function uo(n){const e=Error("NavigationCancelingError: "+n);return e[lr]=!0,e}function au(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Vr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ih(n[o],e[o]))return!1;return!0}function ih(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function al(n){return Array.prototype.concat.apply([],n)}function ul(n){return n.length>0?n[n.length-1]:null}function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function cr(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):at(n)}const Fc={exact:function ys(n,e,t){if(!M(n.segments,e.segments)||!du(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ys(n.children[r],e.children[r],t))return!1;return!0},subset:Lc},Ls={exact:function lu(n,e){return Vr(n,e)},subset:function sh(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ih(n[t],e[t]))},ignored:()=>!0};function fi(n,e,t){return Fc[t.paths](n.root,e.root,t.matrixParams)&&Ls[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lc(n,e,t){return cu(n,e,e.segments,t)}function cu(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!M(o,t)||e.hasChildren()||!du(o,t,r))}if(n.segments.length===t.length){if(!M(n.segments,t)||!du(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Lc(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(M(n.segments,o)&&du(n.segments,o,r)&&n.children[Ot])&&cu(n.children[Ot],e,u,r)}}function du(n,e,t){return e.every((r,o)=>Ls[t](n[o].parameters,r.parameters))}class Jr{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mi(this.queryParams)),this._queryParamMap}toString(){return Ne.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,xn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ze(this)}}class D{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mi(this.parameters)),this._parameterMap}toString(){return Vs(this)}}function M(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Z{}class oe{parse(e){const t=new oh(e);return new Jr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ut(e.root,!0)}`,r=function hu(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${_t(t)}=${_t(o)}`).join("&"):`${_t(t)}=${_t(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function gt(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ne=new oe;function ze(n){return n.segments.map(e=>Vs(e)).join("/")}function ut(n,e){if(!n.hasChildren())return ze(n);if(e){const t=n.children[Ot]?ut(n.children[Ot],!1):"",r=[];return xn(n.children,(o,u)=>{u!==Ot&&r.push(`${u}:${ut(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function F(n,e){let t=[];return xn(n.children,(r,o)=>{o===Ot&&(t=t.concat(e(r,o)))}),xn(n.children,(r,o)=>{o!==Ot&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ot?[ut(n.children[Ot],!1)]:[`${o}:${ut(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${ze(n)}/${t[0]}`:`${ze(n)}/(${t.join("//")})`}}function wt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _t(n){return wt(n).replace(/%3B/gi,";")}function Cn(n){return wt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dr(n){return decodeURIComponent(n)}function lo(n){return dr(n.replace(/\+/g,"%20"))}function Vs(n){return`${Cn(n.path)}${function qi(n){return Object.keys(n).map(e=>`;${Cn(e)}=${Cn(n[e])}`).join("")}(n.parameters)}`}const ll=/^[^\/()?;=#]+/;function Us(n){const e=n.match(ll);return e?e[0]:""}const pi=/^[^=?&#]+/,Vc=/^[^&#]+/;class oh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Ut(e,t)),r}parseSegment(){const e=Us(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new D(dr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Us(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Us(this.remaining);o&&(r=o,this.capture(r))}e[dr(t)]=dr(r)}parseQueryParam(e){const t=function gi(n){const e=n.match(pi);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function L_(n){const e=n.match(Vc);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=lo(t),u=lo(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Us(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ot);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Ot]:new Ut([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Xf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=cl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=cl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ah(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ah(e,this._root).map(t=>t.value)}}function cl(n,e){if(n===e.value)return e;for(const t of e.children){const r=cl(n,t);if(r)return r}return null}function ah(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ah(n,t);if(r.length)return r.unshift(e),r}return[]}class co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dl extends Xf{constructor(e,t){super(e),this.snapshot=t,jc(this,e)}toString(){return this.snapshot.toString()}}function Uc(n,e){const t=function pu(n,e){const d=new ba([],{},{},"",{},Ot,e,null,n.root,-1,{});return new Bc("",new co(d,[]))}(n,e),r=new Fr([new D("",{})]),o=new Fr({}),u=new Fr({}),d=new Fr({}),g=new Fr(""),E=new Da(r,o,d,g,u,Ot,e,t.root);return E.snapshot=t.root,new dl(new co(E,[]),t)}class Da{constructor(e,t,r,o,u,d,g,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>Mi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>Mi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ep(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function tp(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ba{constructor(e,t,r,o,u,d,g,E,b,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.routeConfig=E,this._urlSegment=b,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Bc extends Xf{constructor(e,t){super(t),this.url=e,jc(this,t)}toString(){return uh(this._root)}}function jc(n,e){e.value._routerState=n,e.children.forEach(t=>jc(n,t))}function uh(n){const e=n.children.length>0?` { ${n.children.map(uh).join(", ")} } `:"";return`${n.value}${e}`}function $c(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Vr(e.params,t.params)||n.params.next(t.params),function uu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Vr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function hl(n,e){const t=Vr(n.params,e.params)&&function C(n,e){return M(n,e)&&n.every((t,r)=>Vr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hl(n.parent,e.parent))}function fl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Dm(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return fl(n,r,o);return fl(n,r)})}(n,e,t);return new co(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>fl(n,g)),d}}const r=function bm(n){return new Da(new Fr(n.url),new Fr(n.params),new Fr(n.queryParams),new Fr(n.fragment),new Fr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>fl(n,u));return new co(r,o)}}function vs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _s(n){return"object"==typeof n&&null!=n&&n.outlets}function ch(n,e,t,r,o){let u={};if(r&&xn(r,(g,E)=>{u[E]=Array.isArray(g)?g.map(b=>`${b}`):`${g}`}),n===e)return new Jr(t,u,o);const d=np(n,e,t);return new Jr(d,u,o)}function np(n,e,t){const r={};return xn(n.children,(o,u)=>{r[u]=o===e?t:np(o,e,t)}),new Ut(n.segments,r)}class Cm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vs(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(_s);if(o&&o!==ul(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ip{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function sp(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return Hc(n,e,t);const r=function V_(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(_s(g))break;const E=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&b&&"object"==typeof b&&void 0===b.outlets){if(!w(E,b,d))return u;r+=2}else{if(!w(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ut(n.segments.slice(0,r.pathIndex),{});return u.children[Ot]=new Ut(n.segments.slice(r.pathIndex),n.children),Hc(u,0,o)}return r.match&&0===o.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?v(n,e,t):r.match?Hc(n,0,o):v(n,e,t)}function Hc(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function Am(n){return _s(n[0])?n[0].outlets:{[Ot]:n}}(t),o={};return xn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=sp(n.children[d],e,u))}),xn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ut(n.segments,o)}}function v(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(_s(u)){const E=f(u.outlets);return new Ut(r,E)}if(0===o&&vs(t[0])){r.push(new D(n.segments[e].path,m(t[0]))),o++;continue}const d=_s(u)?u.outlets[Ot]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&vs(g)?(r.push(new D(d,m(g))),o+=2):(r.push(new D(d,{})),o++)}return new Ut(r,{})}function f(n){const e={};return xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=v(new Ut([],{}),0,t))}),e}function m(n){const e={};return xn(n,(t,r)=>e[r]=`${t}`),e}function w(n,e,t){return n==t.path&&Vr(e,t.parameters)}class O{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$c(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=fu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),xn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=fu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=fu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=fu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new sl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new wa(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if($c(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),$c(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=function ee(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=g?g.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Te{constructor(e,t){this.routes=e,this.module=t}}function Qe(n){return"function"==typeof n}function Ct(n){return n instanceof Jr}const pl=Symbol("INITIAL_VALUE");function mu(){return ar(n=>function ro(...n){const e=(0,eu.yG)(n),t=(0,eu.jO)(n),{args:r,keys:o}=Rc(n);if(0===r.length)return(0,Tn.D)([],e);const u=new Ti.y(function ks(n,e,t=Os.y){return r=>{pa(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let E=0;E<o;E++)pa(e,()=>{const b=(0,Tn.D)(n[E],e);let S=!1;b.subscribe((0,Yn.x)(r,N=>{u[E]=N,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>nu(o,d):Os.y));return t?u.pipe(tu(t)):u}(n.map(e=>e.pipe(io(1),zi(pl)))).pipe(Ai((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==pl?o:(u===pl&&(r=!0),r||!1!==u&&d!==t.length-1&&!Ct(u)?o:u),e)},pl),yn(e=>e!==pl),(0,It.U)(e=>Ct(e)?e:!0===e),io(1)))}class hh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new yu,this.attachRef=null}}class yu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new hh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let gl=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=u||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,E=new op(t,g,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(yu),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class op{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Da?this.route:e===yu?this.childContexts:this.parent.get(e,t)}}let fh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[gl],encapsulation:2}),n})();function ml(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];yl(r,Sm(e,r))}}function yl(n,e){n.children&&ml(n.children,e)}function Sm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ca(n){const e=n.children&&n.children.map(Ca),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=fh),t}function Zi(n){return n.outlet||Ot}function hr(n,e){const t=n.filter(r=>Zi(r)===e);return t.push(...n.filter(r=>Zi(r)!==e)),t}const U_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ap(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},U_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||au)(t,n,e);if(!u)return Object.assign({},U_);const d={};xn(u.posParams,(E,b)=>{d[b]=E.path});const g=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Gc(n,e,t,r,o="corrected"){if(t.length>0&&function MI(n,e,t){return t.some(r=>up(n,e,r)&&Zi(r)!==Ot)}(n,t,r)){const d=new Ut(e,function xI(n,e,t,r){const o={};o[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Zi(u)!==Ot){const d=new Ut([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Zi(u)]=d}return o}(n,e,r,new Ut(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function RI(n,e,t){return t.some(r=>up(n,e,r))}(n,t,r)){const d=new Ut(n.segments,function B_(n,e,t,r,o,u){const d={};for(const g of r)if(up(n,t,g)&&!o[Zi(g)]){const E=new Ut([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Zi(g)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ut(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function up(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function j_(n,e,t,r){return!!(Zi(n)===r||r!==Ot&&up(e,t,n))&&("**"===n.path||ap(e,n,t).matched)}function NI(n,e,t){return 0===e.length&&!n.children[t]}class xm{constructor(e){this.segmentGroup=e||null}}class zc{constructor(e){this.urlTree=e}}function Sr(n){return ga(new xm(n))}function lp(n){return ga(new zc(n))}class ph{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Gc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ot).pipe((0,It.U)(u=>this.createUrlTree(Rm(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Si(u=>{if(u instanceof zc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof xm?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ot).pipe((0,It.U)(o=>this.createUrlTree(Rm(o),e.queryParams,e.fragment))).pipe(Si(o=>{throw o instanceof xm?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ut([],{[Ot]:e}):e;return new Jr(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new Ut([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Tn.D)(o).pipe(Wi(u=>{const d=r.children[u],g=hr(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,It.U)(E=>({segment:E,outlet:u})))}),Ai((u,d)=>(u[d.outlet]=d.segment,u),{}),function kc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yn((o,u)=>n(o,u,r)):Os.y,su(1),t?Pc(e):nh(()=>new ma))}())}expandSegment(e,t,r,o,u,d){return(0,Tn.D)(r).pipe(Wi(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(Si(b=>{if(b instanceof xm)return at(null);throw b}))),_a(g=>!!g),Si((g,E)=>{if(g instanceof ma||"EmptyError"===g.name)return NI(t,o,u)?at(new Ut([],{})):Sr(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return j_(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Sr(t):Sr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?lp(u):this.lineralizeSegments(r,u).pipe((0,ur.z)(d=>{const g=new Ut(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:E,remainingSegments:b,positionalParamSegments:S}=ap(t,o,u);if(!g)return Sr(t);const N=this.applyRedirectCommands(E,o.redirectTo,S);return o.redirectTo.startsWith("/")?lp(N):this.lineralizeSegments(o,N).pipe((0,ur.z)(K=>this.expandSegment(e,t,r,K.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?at(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(N=>(r._loadedConfig=N,new Ut(o,{})))):at(new Ut(o,{}));const{matched:d,consumedSegments:g,remainingSegments:E}=ap(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,ur.z)(S=>{const N=S.module,K=S.routes,{segmentGroup:Q,slicedSegments:me}=Gc(t,g,E,K),je=new Ut(Q.segments,Q.children);if(0===me.length&&je.hasChildren())return this.expandChildren(N,K,je).pipe((0,It.U)(tn=>new Ut(g,tn)));if(0===K.length&&0===me.length)return at(new Ut(g,{}));const et=Zi(r)===u;return this.expandSegment(N,je,K,me,et?Ot:u,!0).pipe((0,It.U)(Gt=>new Ut(g.concat(Gt.segments),Gt.children)))})):Sr(t)}getChildConfig(e,t,r){return t.children?at(new Te(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?at(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ur.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,It.U)(u=>(t._loadedConfig=u,u))):function H_(n){return ga(uo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):at(new Te([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?at(o.map(d=>{const g=e.get(d);let E;if(function kn(n){return n&&Qe(n.canLoad)}(g))E=g.canLoad(t,r);else{if(!Qe(g))throw new Error("Invalid CanLoad guard");E=g(t,r)}return cr(E)})).pipe(mu(),(0,hi.b)(d=>{if(!Ct(d))return;const g=uo(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw g.url=d,g}),(0,It.U)(d=>!0===d)):at(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return at(r);if(o.numberOfChildren>1||!o.children[Ot])return ga(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Jr(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return xn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return xn(t.children,(g,E)=>{d[E]=this.createSegmentGroup(e,g,r,o)}),new Ut(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Rm(n){const e={};for(const r of Object.keys(n.children)){const u=Rm(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Mm(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}class Nm{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cp{constructor(e,t){this.component=e,this.route=t}}function G_(n,e,t){const r=n._root;return mh(r,e?e._root:null,t,[r.value])}function gh(n,e,t){const r=function kI(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function mh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=fu(e);return n.children.forEach(d=>{(function Om(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function FI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!M(n.url,e.url);case"pathParamsOrQueryParamsChange":return!M(n.url,e.url)||!Vr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hl(n,e)||!Vr(n.queryParams,e.queryParams);default:return!hl(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Nm(r)):(u.data=d.data,u._resolvedData=d._resolvedData),mh(n,e,u.component?g?g.children:null:t,r,o),E&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new cp(g.outlet.component,d))}else d&&yh(e,g,o),o.canActivateChecks.push(new Nm(r)),mh(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),xn(u,(d,g)=>yh(d,t.getContext(g),o)),o}function yh(n,e,t){const r=fu(n),o=n.value;xn(r,(u,d)=>{yh(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new cp(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class HI{}function km(n){return new Ti.y(e=>e.error(n))}class zI{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Gc(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ot);if(null===t)return null;const r=new ba([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new co(r,t),u=new Bc(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=ep(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],g=hr(e,u),E=this.processSegmentGroup(g,d,u);if(null===E)return null;r.push(...E)}const o=z_(r);return function WI(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return NI(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!j_(e,t,r,o))return null;let u,d=[],g=[];if("**"===e.path){const Q=r.length>0?ul(r).parameters:{};u=new ba(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ho(e),Zi(e),e.component,e,W_(t),vl(t)+r.length,ZI(e))}else{const Q=ap(t,e,r);if(!Q.matched)return null;d=Q.consumedSegments,g=Q.remainingSegments,u=new ba(d,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ho(e),Zi(e),e.component,e,W_(t),vl(t)+d.length,ZI(e))}const E=function qI(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=Gc(t,d,g,E.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const Q=this.processChildren(E,b);return null===Q?null:[new co(u,Q)]}if(0===E.length&&0===S.length)return[new co(u,[])];const N=Zi(e)===o,K=this.processSegment(E,b,S,N?Ot:o);return null===K?null:[new co(u,K)]}}function KI(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function z_(n){const e=[],t=new Set;for(const r of n){if(!KI(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=z_(r.children);e.push(new co(r.value,o))}return e.filter(r=>!t.has(r))}function W_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function vl(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ho(n){return n.data||{}}function ZI(n){return n.resolve||{}}function hp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Lm(n){return ar(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,It.U)(()=>e)):at(e)})}class Z_ extends class vh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fp=new p.OlP("ROUTES");class pp{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new Te(al(d.injector.get(fp,void 0,p.XFs.Self|p.XFs.Optional)).map(Ca),d)}),Si(u=>{throw t._loader$=void 0,u}));return t._loader$=new vr(o,()=>new $i.x).pipe(nl()),t._loader$}loadModuleFactory(e){return cr(e()).pipe((0,ur.z)(t=>t instanceof p.YKP?at(t):(0,Tn.D)(this.compiler.compileModuleAsync(t))))}}class Y_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qT(n){throw n}function Wc(n,e,t){return e.parse("/")}function gp(n,e){return at(null)}const Q_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yi=(()=>{class n{constructor(t,r,o,u,d,g,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $i.x,this.errorHandler=qT,this.malformedUriErrorHandler=Wc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gp,afterPreactivation:gp},this.urlHandlingStrategy=new Y_,this.routeReuseStrategy=new Z_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(p.h0i),this.console=d.get(p.c2e);const N=d.get(p.R0b);this.isNgZoneEnabled=N instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function Ia(){return new Jr(new Ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pp(d,g,K=>this.triggerEvent(new Qr(K)),K=>this.triggerEvent(new il(K))),this.routerState=Uc(this.currentUrlTree,this.rootComponentType),this.transitions=new Fr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(yn(o=>0!==o.id),(0,It.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ar(o=>{let u=!1,d=!1;return at(o).pipe((0,hi.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ar(g=>{const E=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return J_(g.source)&&(this.browserUrlTree=g.extractedUrl),at(g).pipe(ar(N=>{const K=this.transitions.getValue();return r.next(new rh(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),K!==this.transitions.getValue()?Lr.E:Promise.resolve(N)}),function OI(n,e,t,r){return ar(o=>function mi(n,e,t,r,o){return new ph(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,hi.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function zT(n,e,t,r,o){return(0,ur.z)(u=>function GI(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new zI(n,e,t,r,o,u).recognize();return null===d?km(new HI):at(d)}catch(d){return km(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,It.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,hi.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const K=new ou(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(K)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:K,extractedUrl:Q,source:me,restoredState:je,extras:et}=g,kt=new rh(K,this.serializeUrl(Q),me,je);r.next(kt);const Gt=Uc(Q,this.rootComponentType).snapshot;return at(Object.assign(Object.assign({},g),{targetSnapshot:Gt,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},et),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Lr.E}),Lm(g=>{const{targetSnapshot:E,id:b,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:K,replaceUrl:Q}}=g;return this.hooks.beforePreactivation(E,{navigationId:b,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!K,replaceUrl:!!Q})}),(0,hi.b)(g=>{const E=new ao(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(E)}),(0,It.U)(g=>Object.assign(Object.assign({},g),{guards:G_(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Pm(n,e){return(0,ur.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?at(Object.assign(Object.assign({},t),{guardsResult:!0})):function LI(n,e,t,r){return(0,Tn.D)(n).pipe((0,ur.z)(o=>function $I(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(g=>{const E=gh(g,e,o);let b;if(function gu(n){return n&&Qe(n.canDeactivate)}(E))b=cr(E.canDeactivate(n,e,t,r));else{if(!Qe(E))throw new Error("Invalid CanDeactivate guard");b=cr(E(n,e,t,r))}return b.pipe(_a())})).pipe(mu()):at(!0)}(o.component,o.route,t,e,r)),_a(o=>!0!==o,!0))}(d,r,o,n).pipe((0,ur.z)(g=>g&&function pt(n){return"boolean"==typeof n}(g)?function VI(n,e,t,r){return(0,Tn.D)(e).pipe(Wi(o=>ru(function UI(n,e){return null!==n&&e&&e(new Ea(n)),at(!0)}(o.route.parent,r),function dp(n,e){return null!==n&&e&&e(new ms(n)),at(!0)}(o.route,r),function jI(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function PI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>iu(()=>at(d.guards.map(E=>{const b=gh(E,d.node,t);let S;if(function Bs(n){return n&&Qe(n.canActivateChild)}(b))S=cr(b.canActivateChild(r,n));else{if(!Qe(b))throw new Error("Invalid CanActivateChild guard");S=cr(b(r,n))}return S.pipe(_a())})).pipe(mu())));return at(u).pipe(mu())}(n,o.path,t),function BI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const o=r.map(u=>iu(()=>{const d=gh(u,e,t);let g;if(function Ki(n){return n&&Qe(n.canActivate)}(d))g=cr(d.canActivate(e,n));else{if(!Qe(d))throw new Error("Invalid CanActivate guard");g=cr(d(e,n))}return g.pipe(_a())}));return at(o).pipe(mu())}(n,o.route,t))),_a(o=>!0!==o,!0))}(r,u,n,e):at(g)),(0,It.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,hi.b)(g=>{if(Ct(g.guardsResult)){const b=uo(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw b.url=g.guardsResult,b}const E=new Yf(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(E)}),yn(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),Lm(g=>{if(g.guards.canActivateChecks.length)return at(g).pipe((0,hi.b)(E=>{const b=new rl(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}),ar(E=>{let b=!1;return at(E).pipe(function q_(n,e){return(0,ur.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return at(t);let u=0;return(0,Tn.D)(o).pipe(Wi(d=>function WT(n,e,t,r){return function Uo(n,e,t,r){const o=hp(n);if(0===o.length)return at({});const u={};return(0,Tn.D)(o).pipe((0,ur.z)(d=>function Fm(n,e,t,r){const o=gh(n,e,r);return cr(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,hi.b)(g=>{u[d]=g}))),su(1),(0,ur.z)(()=>hp(u).length===o.length?at(u):Lr.E))}(n._resolve,n,e,r).pipe((0,It.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),ep(n,t).resolve),null)))}(d.route,r,n,e)),(0,hi.b)(()=>u++),su(1),(0,ur.z)(d=>u===o.length?at(t):Lr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,hi.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,hi.b)(E=>{const b=new Ar(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}))}),Lm(g=>{const{targetSnapshot:E,id:b,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:K,replaceUrl:Q}}=g;return this.hooks.afterPreactivation(E,{navigationId:b,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!K,replaceUrl:!!Q})}),(0,It.U)(g=>{const E=function Im(n,e,t){const r=fl(n,e._root,t?t._root:void 0);return new dl(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:E})}),(0,hi.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new O(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,hi.b)({next(){u=!0},complete(){u=!0}}),function wm(n){return(0,or.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Si(g=>{if(d=!0,function Fs(n){return n&&n[lr]}(g)){const E=Ct(g.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const b=new Zf(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(b),E?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||J_(o.source)};this.scheduleNavigation(S,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new Sn(o.id,this.serializeUrl(o.extractedUrl),g);r.next(E);try{o.resolve(this.errorHandler(g))}catch(b){o.reject(b)}}return Lr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ml(t),this.config=t.map(Ca),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:E}=r,b=o||this.routerState.root,S=E?this.currentUrlTree.fragment:d;let N=null;switch(g){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function lh(n,e,t,r,o){if(0===t.length)return ch(e.root,e.root,e.root,r,o);const u=function rp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Cm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return xn(u.outlets,(E,b)=>{g[b]="string"==typeof E?E.split("/"):E}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,E)=>{0==E&&"."===g||(0==E&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new Cm(t,e,r)}(t);if(u.toRoot())return ch(e.root,e.root,new Ut([],{}),r,o);const d=function Tm(n,e,t){if(n.isAbsolute)return new ip(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new ip(u,u===e.root,0)}const r=vs(n.commands[0])?0:1;return function dh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new ip(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=d.processChildren?Hc(d.segmentGroup,d.index,u.commands):sp(d.segmentGroup,d.index,u.commands);return ch(e.root,d.segmentGroup,g,r,o)}(b,this.currentUrlTree,t,N,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ct(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function QI(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Q_):!1===r?Object.assign({},YI):r,Ct(t))return fi(this.currentUrlTree,t,o);const u=this.parseUrl(t);return fi(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var g,E;if(this.disposed)return Promise.resolve(!1);let b,S,N;d?(b=d.resolve,S=d.reject,N=d.promise):N=new Promise((me,je)=>{b=me,S=je});const K=++this.navigationId;let Q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Q=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Q=0,this.setTransition({id:K,targetPageId:Q,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(me=>Promise.reject(me))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Zf(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function J_(n){return"imperative"!==n}let _h=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new $i.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:qc(this.skipLocationChange),replaceUrl:qc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(yi),p.Y36(Da),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();function qc(n){return""===n||!!n}class mp{}class yp{preload(e,t){return at(null)}}let t0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new pp(o,r,E=>t.triggerEvent(new Qr(E)),E=>t.triggerEvent(new il(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(yn(t=>t instanceof xi),Wi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Tn.D)(o).pipe((0,gs.J)(),(0,It.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?at(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ur.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(mp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Bm=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ol&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ol(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const vu=new p.OlP("ROUTER_CONFIGURATION"),_u=new p.OlP("ROUTER_FORROOT_GUARD"),n0=[Ae,{provide:Z,useClass:oe},{provide:yi,useFactory:function a0(n,e,t,r,o,u,d={},g,E){const b=new yi(null,n,e,t,r,o,al(u));return g&&(b.urlHandlingStrategy=g),E&&(b.routeReuseStrategy=E),function $m(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(S=>{var N,K;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(K=console.groupEnd)||void 0===K||K.call(console)}),b},deps:[Z,yu,Ae,p.zs3,p.Sil,fp,vu,[class Vm{},new p.FiY],[class K_{},new p.FiY]]},yu,{provide:Da,useFactory:function u0(n){return n.routerState.root},deps:[yi]},t0,yp,class e0{preload(e,t){return t().pipe(Si(()=>at(null)))}},{provide:vu,useValue:{enableTracing:!1}}];function r0(){return new p.PXZ("Router",yi)}let s0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[n0,jm(t),{provide:_u,useFactory:o0,deps:[[yi,new p.FiY,new p.tp0]]},{provide:vu,useValue:r||{}},{provide:fe,useFactory:eD,deps:[ae,[new p.tBr(We),new p.FiY],vu]},{provide:Bm,useFactory:vp,deps:[yi,qa,vu]},{provide:mp,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:yp},{provide:p.PXZ,multi:!0,useFactory:r0},[Kc,{provide:p.ip1,multi:!0,useFactory:_p,deps:[Kc]},{provide:Ep,useFactory:l0,deps:[Kc]},{provide:p.tb,multi:!0,useExisting:Ep}]]}}static forChild(t){return{ngModule:n,providers:[jm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_u,8),p.LFG(yi,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function vp(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Bm(n,e,t)}function eD(n,e,t={}){return t.useHash?new Oe(n,e):new Ge(n,e)}function o0(n){return"guarded"}function jm(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:fp,multi:!0,useValue:n}]}let Kc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new $i.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(yi),d=this.injector.get(vu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?at(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(vu),o=this.injector.get(t0),u=this.injector.get(Bm),d=this.injector.get(yi),g=this.injector.get(p.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function _p(n){return n.appInitializer.bind(n)}function l0(n){return n.bootstrapListener.bind(n)}const Ep=new p.OlP("Router Initializer");let h0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Eu=(()=>{class n extends h0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Bo=new p.OlP("NgValueAccessor"),Gm={provide:Bo,useExisting:(0,p.Gpc)(()=>wh),multi:!0},KT=new p.OlP("CompositionEventMode");let wh=(()=>{class n extends h0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function f0(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(KT,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([Gm]),p.qOj]}),n})();function wu(n){return null==n||0===n.length}function zm(n){return null!=n&&"number"==typeof n.length}const vi=new p.OlP("NgValidators"),Iu=new p.OlP("NgAsyncValidators"),fo=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wp{static min(e){return function Wm(n){return e=>{if(wu(e.value)||wu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function p0(n){return e=>{if(wu(e.value)||wu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function g0(n){return wu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function m0(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function y0(n){return wu(n.value)||fo.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function qm(n){return e=>wu(e.value)||!zm(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function v0(n){return e=>zm(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function _0(n){if(!n)return Ip;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(wu(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return Qm(e)}static composeAsync(e){return bp(e)}}function Ip(n){return null}function At(n){return null!=n}function Km(n){const e=(0,p.QGY)(n)?(0,Tn.D)(n):n;return(0,p.CqO)(e),e}function Zm(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ym(n,e){return e.map(t=>t(n))}function js(n){return n.map(e=>function Dp(n){return!n.validate}(e)?e:t=>e.validate(t))}function Qm(n){if(!n)return null;const e=n.filter(At);return 0==e.length?null:function(t){return Zm(Ym(t,e))}}function Jm(n){return null!=n?Qm(js(n)):null}function bp(n){if(!n)return null;const e=n.filter(At);return 0==e.length?null:function(t){return function Eh(...n){const e=(0,eu.jO)(n),{args:t,keys:r}=Rc(n),o=new Ti.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let E=d,b=d;for(let S=0;S<d;S++){let N=!1;(0,va.Xf)(t[S]).subscribe((0,Yn.x)(u,K=>{N||(N=!0,b--),g[S]=K},()=>E--,void 0,()=>{(!E||!N)&&(b||u.next(r?nu(r,g):g),u.complete())}))}});return e?o.pipe(tu(e)):o}(Ym(t,e).map(Km)).pipe((0,It.U)(Zm))}}function po(n){return null!=n?bp(js(n)):null}function Cp(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Xm(n){return n._rawValidators}function Tp(n){return n._rawAsyncValidators}function E0(n){return n?Array.isArray(n)?n:[n]:[]}function Ih(n,e){return Array.isArray(n)?n.includes(e):n===e}function nD(n,e){const t=E0(e);return E0(n).forEach(o=>{Ih(t,o)||t.push(o)}),t}function Dh(n,e){return E0(e).filter(t=>!Ih(n,t))}class bh{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=po(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jo extends bh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xr extends bh{get formDirective(){return null}get path(){return null}}class Ap{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let w0=(()=>{class n extends Ap{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(jo,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),I0=(()=>{class n extends Ap{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Xr,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function Sp(n,e){sy(n,e),e.valueAccessor.writeValue(n.value),function oy(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xp(n,e)})}(n,e),function oD(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function b0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xp(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function iy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ry(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Th(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function go(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sy(n,e){const t=Xm(n);null!==e.validator?n.setValidators(Cp(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Tp(n);null!==e.asyncValidator?n.setAsyncValidators(Cp(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();go(e._rawValidators,o),go(e._rawAsyncValidators,o)}function Th(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Xm(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Tp(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return go(e._rawValidators,r),go(e._rawAsyncValidators,r),t}function xp(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ah(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $o="VALID",Mp="INVALID",El="PENDING",Yc="DISABLED";function xh(n){return(Mh(n)?n.validators:n)||null}function cy(n){return Array.isArray(n)?Jm(n):n||null}function Qc(n,e){return(Mh(e)?e.asyncValidators:n)||null}function A0(n){return Array.isArray(n)?po(n):n||null}function Mh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const S0=n=>n instanceof Ri,Rh=n=>n instanceof Rp,dy=n=>n instanceof R0;function x0(n){return S0(n)?n.value:n.getRawValue()}function hy(n,e){const t=Rh(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function M0(n,e){Rh(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new p.vHH(1002,"")})}class fy{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=cy(this._rawValidators),this._composedAsyncValidatorFn=A0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$o}get invalid(){return this.status===Mp}get pending(){return this.status==El}get disabled(){return this.status===Yc}get enabled(){return this.status!==Yc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=cy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=A0(e)}addValidators(e){this.setValidators(nD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Dh(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Dh(e,this._rawAsyncValidators))}hasValidator(e){return Ih(this._rawValidators,e)}hasAsyncValidator(e){return Ih(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=El,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$o,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$o||this.status===El)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yc:$o}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=El,this._hasOwnPendingAsyncValidator=!0;const t=Km(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function ly(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Rh(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:dy(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Yc:this.errors?Mp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(El)?El:this._anyControlsHaveStatus(Mp)?Mp:$o}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ri extends fy{constructor(e=null,t,r){super(xh(t),Qc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mh(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ah(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ah(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Rp extends fy{constructor(e,t,r){super(xh(t),Qc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){M0(this,e),Object.keys(e).forEach(r=>{hy(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=x0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class R0 extends fy{constructor(e,t,r){super(xh(t),Qc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){M0(this,e),e.forEach((r,o)=>{hy(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>x0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let F0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const hD={provide:Bo,useExisting:(0,p.Gpc)(()=>Pp),multi:!0};let Pp=(()=>{class n extends Eu{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[p._Bn([hD]),p.qOj]}),n})(),mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const kp=new p.OlP("NgModelWithFormControlWarning"),mD={provide:Xr,useExisting:(0,p.Gpc)(()=>Jc)};let Jc=(()=>{class n extends Xr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Th(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Sp(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ry(t.control||null,t,!1),Ah(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Zc(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ry(r||null,t),S0(o)&&(Sp(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ta(n,e){sy(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function C0(n,e){return Th(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sy(this.form,this),this._oldForm&&Th(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(vi,10),p.Y36(Iu,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([mD]),p.qOj,p.TTD]}),n})();const yy={provide:jo,useExisting:(0,p.Gpc)(()=>Oh)};let Oh=(()=>{class n extends jo{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Du(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===wh?t=u:function uD(n){return Object.getPrototypeOf(n.constructor)===Eu}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function uy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ny(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(Xr,13),p.Y36(vi,10),p.Y36(Iu,10),p.Y36(Bo,10),p.Y36(kp,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([yy]),p.qOj,p.TTD]}),n})(),Xc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[mo]]}),n})(),Z0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Xc]}),n})(),TD=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let g,u=null,d=null;return null!=r&&(function CD(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,g=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Rp(o,{asyncValidators:d,updateOn:g,validators:u})}control(t,r,o){return new Ri(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new R0(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return S0(t)||Rh(t)||dy(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:Z0}),n})();var wy=P(4986),In=P(5813);function $p(){return(0,or.e)((n,e)=>{let t,r=!1;n.subscribe((0,Yn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Q0(n,e){return n===e}var it,yo=P(2011),AD=(P(5881),P(3942)),Ie=P(5861),Go=P(9681),Iy=P(4859),Sa=P(1877),Wt=P(2090),SD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bu={},Lh=Lh||{},St=SD||self;function Vh(){}function Hp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Gp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var J0="closure_uid_"+(1e9*Math.random()>>>0),gA=0;function X0(n,e,t){return n.call.apply(n.bind,arguments)}function eE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Ur(n,e,t){return(Ur=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?X0:eE).apply(null,arguments)}function zp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _i(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function xa(){this.s=this.s,this.o=this.o}var xD={};xa.prototype.s=!1,xa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vo(n){return Object.prototype.hasOwnProperty.call(n,J0)&&n[J0]||(n[J0]=++gA)}(this);delete xD[n]}},xa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},tE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function nE(n){return Array.prototype.concat.apply([],arguments)}function by(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function qp(n){return/^[\s\xa0]*$/.test(n)}var Ni,rE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Br(n,e){return-1!=n.indexOf(e)}function Cu(n,e){return n<e?-1:n>e?1:0}e:{var ed=St.navigator;if(ed){var iE=ed.userAgent;if(iE){Ni=iE;break e}}Ni=""}function Cy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Kp(n){const e={};for(const t in n)e[t]=n[t];return e}var _o="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function td(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<_o.length;u++)t=_o[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jr(n){return jr[" "](n),n}jr[" "]=Vh;var Ma,n,Zp=Br(Ni,"Opera"),ei=Br(Ni,"Trident")||Br(Ni,"MSIE"),Yp=Br(Ni,"Edge"),Tu=Yp||ei,bl=Br(Ni,"Gecko")&&!(Br(Ni.toLowerCase(),"webkit")&&!Br(Ni,"Edge"))&&!(Br(Ni,"Trident")||Br(Ni,"MSIE"))&&!Br(Ni,"Edge"),nd=Br(Ni.toLowerCase(),"webkit")&&!Br(Ni,"Edge");function Cl(){var n=St.document;return n?n.documentMode:void 0}e:{var Au="",Su=(n=Ni,bl?/rv:([^\);]+)(\)|;)/.exec(n):Yp?/Edge\/([\d\.]+)/.exec(n):ei?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nd?/WebKit\/(\S+)/.exec(n):Zp?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Su&&(Au=Su?Su[1]:""),ei){var xu=Cl();if(null!=xu&&xu>parseFloat(Au)){Ma=String(xu);break e}}Ma=Au}var rd={};var oE=St.document&&ei&&(Cl()||parseInt(Ma,10))||void 0,aE=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",Vh,e),St.removeEventListener("test",Vh,e)}catch(t){}return n}();function ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function id(n,e){if(ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(bl){e:{try{jr(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:uE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&id.Z.h.call(this)}}ti.prototype.h=function(){this.defaultPrevented=!0},_i(id,ti);var uE={2:"touch",3:"pen",4:"mouse"};id.prototype.h=function(){id.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sd="closure_listenable_"+(1e6*Math.random()|0),RD=0;function lE(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++RD,this.ca=this.fa=!1}function Jp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Xp(n){this.src=n,this.g={},this.h=0}function eg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Wp(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Jp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ay(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Xp.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Ay(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new lE(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Sy="closure_lm_"+(1e6*Math.random()|0),tg={};function cE(n,e,t,r,o){if(r&&r.once)return dE(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)cE(n,e[u],t,r,o);return null}return t=fE(t),n&&n[sd]?n.N(e,t,Gp(r)?!!r.capture:!!r,o):xy(n,e,t,!1,r,o)}function xy(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Gp(o)?!!o.capture:!!o,g=Ny(n);if(g||(n[Sy]=g=new Xp(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function ND(){var e=Ry;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)aE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(ng(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function dE(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)dE(n,e[u],t,r,o);return null}return t=fE(t),n&&n[sd]?n.O(e,t,Gp(r)?!!r.capture:!!r,o):xy(n,e,t,!0,r,o)}function OD(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)OD(n,e[u],t,r,o);else r=Gp(r)?!!r.capture:!!r,t=fE(t),n&&n[sd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ay(u=n.g[e],t,r,o))&&(Jp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ny(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ay(e,t,r,o)),(t=-1<n?e[n]:null)&&My(t))}function My(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[sd])eg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ng(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ny(e))?(eg(t,n),0==t.h&&(t.src=null,e[Sy]=null)):Jp(n)}}}function ng(n){return n in tg?tg[n]:tg[n]="on"+n}function Ry(n,e){if(n.ca)n=!0;else{e=new id(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&My(n),n=t.call(r,e)}return n}function Ny(n){return(n=n[Sy])instanceof Xp?n:null}var hE="__closure_events_fn_"+(1e9*Math.random()>>>0);function fE(n){return"function"==typeof n?n:(n[hE]||(n[hE]=function(e){return n.handleEvent(e)}),n[hE])}function ni(){xa.call(this),this.i=new Xp(this),this.P=this,this.I=null}function ri(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ti(e,n);else if(e instanceof ti)e.target=e.target||n;else{var o=e;td(e=new ti(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Uh(d,r,!0,e)&&o}if(o=Uh(d=e.g=n,r,!0,e)&&o,o=Uh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Uh(d=e.g=t[u],r,!1,e)&&o}function Uh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var g=d.listener,E=d.ia||d.src;d.fa&&eg(n.i,d),o=!1!==g.call(E,r)&&o}}return o&&!r.defaultPrevented}_i(ni,xa),ni.prototype[sd]=!0,ni.prototype.removeEventListener=function(n,e,t,r){OD(this,n,e,t,r)},ni.prototype.M=function(){if(ni.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jp(t[r]);delete n.g[e],n.h--}}this.I=null},ni.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ni.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var pE=St.JSON.stringify;function PD(){var n=yE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ad,gE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mE,n=>n.reset());class mE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kD(n){St.setTimeout(()=>{throw n},0)}function rg(n,e){ad||function FD(){var n=St.Promise.resolve(void 0);ad=function(){n.then(LD)}}(),ig||(ad(),ig=!0),yE.add(n,e)}var ig=!1,yE=new class od{constructor(){this.h=this.g=null}add(e,t){const r=gE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function LD(){for(var n;n=PD();){try{n.h.call(n.g)}catch(t){kD(t)}var e=gE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ig=!1}function sg(n,e){ni.call(this),this.h=n||1,this.g=e||St,this.j=Ur(this.kb,this),this.l=Date.now()}function Oy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Py(n,e,t){if("function"==typeof n)t&&(n=Ur(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ur(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function ky(n){n.g=Py(()=>{n.g=null,n.i&&(n.i=!1,ky(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_i(sg,ni),(it=sg.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ri(this,"tick"),this.da&&(Oy(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){sg.Z.M.call(this),Oy(this),delete this.g};class VD extends xa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ky(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ud(n){xa.call(this),this.h=n,this.g={}}_i(ud,xa);var Fy=[];function og(n,e,t,r){Array.isArray(t)||(t&&(Fy[0]=t.toString()),t=Fy);for(var o=0;o<t.length;o++){var u=cE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function UD(n){Cy(n.g,function(e,t){this.g.hasOwnProperty(t)&&My(e)},n),n.g={}}function ld(){this.g=!0}function zo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ly(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return pE(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}ud.prototype.M=function(){ud.Z.M.call(this),UD(this)},ud.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ld.prototype.Aa=function(){this.g=!1},ld.prototype.info=function(){};var Ra={},_E=null;function Tl(){return _E=_E||new ni}function Bh(n){ti.call(this,Ra.Ma,n)}function Al(n){const e=Tl();ri(e,new Bh(e,n))}function jD(n,e){ti.call(this,Ra.STAT_EVENT,n),this.stat=e}function Oi(n){const e=Tl();ri(e,new jD(e,n))}function ag(n,e){ti.call(this,Ra.Na,n),this.size=e}function Sl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}Ra.Ma="serverreachability",_i(Bh,ti),Ra.STAT_EVENT="statevent",_i(jD,ti),Ra.Na="timingevent",_i(ag,ti);var jh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vy={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $h(){}function By(){}$h.prototype.h=null;var lg,xl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ug(){ti.call(this,"d")}function jy(){ti.call(this,"c")}function Hh(){}function Ml(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ud(this),this.P=$D,this.W=new sg(n=Tu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $y}function $y(){this.i=null,this.g="",this.h=!1}_i(ug,ti),_i(jy,ti),_i(Hh,$h),Hh.prototype.g=function(){return new XMLHttpRequest},Hh.prototype.i=function(){return{}},lg=new Hh;var $D=45e3,Hy={},cg={};function dg(n,e,t){n.K=1,n.v=pg(Wo(e)),n.s=t,n.U=!0,hg(n,null)}function hg(n,e){n.F=Date.now(),cd(n),n.A=Wo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),bE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new $y,n.g=nb(n.l,t?e:null,!n.s),0<n.O&&(n.L=new VD(Ur(n.Ia,n,n.g),n.O)),og(n.V,n.g,"readystatechange",n.gb),e=n.H?Kp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Al(1),function BD(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),E=0;E<g.length;E++){var b=g[E].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+b+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Gy(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function zy(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=EE(n,t),o==cg){4==e&&(n.o=4,Oi(14),r=!1),zo(n.j,n.m,null,"[Incomplete Response]");break}if(o==Hy){n.o=4,Oi(15),zo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}zo(n.j,n.m,o,null),wE(n,o)}Gy(n)&&o!=cg&&o!=Hy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),bg(e),e.L=!0,Oi(11))):(zo(n.j,n.m,t,"[Invalid Chunked Response]"),Mu(n),dd(n))}function EE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cg:(t=Number(e.substring(t,r)),isNaN(t)?Hy:(r+=1)+t>e.length?cg:(e=e.substr(r,t),n.C=r+t,e))}function cd(n){n.Y=Date.now()+n.P,Wy(n,n.P)}function Wy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sl(Ur(n.eb,n),e)}function Gh(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function dd(n){0==n.l.G||n.I||LE(n.l,n)}function Mu(n){Gh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Oy(n.W),UD(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xy(t.i,n)))if(t.I=n.N,!n.J&&Xy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Sl(Ur(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Zo(t),wg(t)}Dg(t),Oi(18)}if(1>=Jy(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else $s(t,11)}else if((n.J||t.g==n)&&Zo(t),!qp(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const N=b[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const K=b[5];null!=K&&"number"==typeof K&&0<K&&(t.K=r=1.5*K,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const me=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(me){var u=r.i;!u.g&&(Br(me,"spdy")||Br(me,"quic")||Br(me,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(vg(u,u.h),u.h=null))}if(r.D){const je=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;je&&(r.sa=je,Un(r.F,r.D,je))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Cg(r,r.H?r.la:null,r.W),d.J){ev(r.i,d);var g=d,E=r.K;E&&g.setTimeout(E),g.B&&(Gh(g),cd(g)),r.g=d}else lv(r);0<t.l.length&&Qh(t)}else"stop"!=b[0]&&"close"!=b[0]||$s(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?$s(t,7):sv(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Al(4)}catch(b){}}function qy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hp(n)||"string"==typeof n)tE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Hp(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function HD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Hp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Rl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Rl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ky(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Fn(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Fn(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Fn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=Ml.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==Na(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const S=Na(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>S)&&(3!=S||Tu||this.g&&(this.h.h||this.g.ga()||PE(this.g)))){this.I||4!=S||7==e||Al(8==e||0>=N?3:2),Gh(this);var t=this.g.ba();this.N=t;t:if(Gy(this)){var r=PE(this.g);n="";var o=r.length,u=4==Na(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Mu(this),dd(this);var d="";break t}this.h.i=new St.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function mA(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,E=this.g;if((g=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qp(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Oi(12),Mu(this),dd(this);break e}zo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wE(this,t)}this.U?(zy(this,S,d),Tu&&this.i&&3==S&&(og(this.V,this.W,"tick",this.fb),this.W.start())):(zo(this.j,this.m,d,null),wE(this,d)),4==S&&Mu(this),this.i&&!this.I&&(4==S?LE(this.l,this):(this.i=!1,cd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),Mu(this),dd(this)}}}catch(S){}},it.fb=function(){if(this.g){var n=Na(this.g),e=this.g.ga();this.C<e.length&&(Gh(this),zy(this,n,e),this.i&&4!=n&&cd(this))}},it.cancel=function(){this.I=!0,Mu(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Al(3),Oi(17)),Mu(this),this.o=2,dd(this)):Wy(this,this.Y-n)},(it=Rl.prototype).R=function(){Ky(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return Ky(this),this.g.concat()},it.get=function(n,e){return Fn(this.h,n)?this.h[n]:e},it.set=function(n,e){Fn(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Zy=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Nl){this.g=void 0!==e?e:n.g,fg(this,n.j),this.s=n.s,zh(this,n.i),Wh(this,n.m),this.l=n.l,e=n.h;var t=new Pi;t.i=e.i,e.g&&(t.g=new Rl(e.g),t.h=e.h),Ol(this,t),this.o=n.o}else n&&(t=String(n).match(Zy))?(this.g=!!e,fg(this,t[1]||"",!0),this.s=hd(t[2]||""),zh(this,t[3]||"",!0),Wh(this,t[4]),this.l=hd(t[5]||"",!0),Ol(this,t[6]||"",!0),this.o=hd(t[7]||"")):(this.g=!!e,this.h=new Pi(null,this.g))}function Wo(n){return new Nl(n)}function fg(n,e,t){n.j=t?hd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zh(n,e,t){n.i=t?hd(e,!0):e}function Wh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ol(n,e,t){e instanceof Pi?(n.h=e,function KD(n,e){e&&!n.j&&($r(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Yy(this,r),bE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=gg(e,qD)),n.h=new Pi(e,n.g))}function Un(n,e,t){n.h.set(e,t)}function pg(n){return Un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function hd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,DE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function DE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Nl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gg(e,mg,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gg(e,mg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(gg(t,"/"==t.charAt(0)?WD:qo,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gg(t,Ko)),n.join("")};var mg=/[#\/\?@]/g,qo=/[#\?:]/g,WD=/[#\?]/g,qD=/[#\?@]/g,Ko=/#/g;function Pi(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $r(n){n.g||(n.g=new Rl,n.h=0,n.i&&function GD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Yy(n,e){$r(n),e=fd(n,e),Fn(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Fn((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ky(n)))}function Qy(n,e){return $r(n),e=fd(n,e),Fn(n.g.h,e)}function bE(n,e,t){Yy(n,e),0<t.length&&(n.i=null,n.g.set(fd(n,e),by(t)),n.h+=t.length)}function fd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yg(n){this.l=n||qh,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ea&&St.g.Ea()&&St.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Pi.prototype).add=function(n,e){$r(this),this.i=null,n=fd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){$r(this),this.g.forEach(function(t,r){tE(t,function(o){n.call(e,o,r,this)},this)},this)},it.T=function(){$r(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},it.R=function(n){$r(this);var e=[];if("string"==typeof n)Qy(this,n)&&(e=nE(e,this.g.get(fd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=nE(e,n[t])}return e},it.set=function(n,e){return $r(this),this.i=null,Qy(this,n=fd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var qh=10;function CE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Jy(n){return n.h?1:n.g?n.g.size:0}function Xy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vg(n,e){n.g?n.g.add(e):n.h=e}function ev(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Kh(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return by(n.i)}function tv(){}function TE(){this.g=new tv}function AE(n,e,t){const r=t||"";try{qy(n,function(o,u){let d=o;Gp(o)&&(d=pE(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Pl(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function pd(n){this.l=n.$b||null,this.j=n.ib||!1}function Zh(n,e){ni.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_g,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yg.prototype.cancel=function(){if(this.i=Kh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},tv.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},tv.prototype.parse=function(n){return St.JSON.parse(n,void 0)},_i(pd,$h),pd.prototype.g=function(){return new Zh(this.l,this.j)},pd.prototype.i=function(n){return function(){return n}}({}),_i(Zh,ni);var _g=0;function rv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function gd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,md(n)}function md(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Zh.prototype).open=function(n,e){if(this.readyState!=_g)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,md(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gd(this)),this.readyState=_g},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,md(this)),this.g&&(this.readyState=3,md(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==St.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?gd(this):md(this),3==this.readyState&&rv(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,gd(this))},it.Ta=function(n){this.g&&(this.response=n,gd(this))},it.ha=function(){this.g&&gd(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Zh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var SE=St.JSON.parse;function fr(n){ni.call(this),this.headers=new Rl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xE,this.K=this.L=!1}_i(fr,ni);var xE="",YD=/^https?$/i,QD=["POST","PUT"];function XD(n){return"content-type"==n.toLowerCase()}function ME(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,RE(n),Eg(n)}function RE(n){n.D||(n.D=!0,ri(n,"complete"),ri(n,"error"))}function NE(n){if(n.h&&void 0!==Lh&&(!n.C[1]||4!=Na(n)||2!=n.ba()))if(n.v&&4==Na(n))Py(n.Fa,0,n);else if(ri(n,"readystatechange"),4==Na(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Zy)[1]||null;if(!o&&St.self&&St.self.location){var u=St.self.location.protocol;o=u.substr(0,u.length-1)}r=!YD.test(o?o.toLowerCase():"")}t=r}if(t)ri(n,"complete"),ri(n,"success");else{n.m=6;try{var d=2<Na(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",RE(n)}}finally{Eg(n)}}}function Eg(n,e){if(n.g){OE(n);const t=n.g,r=n.C[0]?Vh:null;n.g=null,n.C=null,e||ri(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function OE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function Na(n){return n.g?n.g.readyState:0}function PE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function iv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function eb(n){let e="";return Cy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Un(n,e,t))}function Yh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function kE(n){this.za=0,this.l=[],this.h=new ld,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Yh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Yh("baseRetryDelayMs",5e3,n),this.$a=Yh("retryDelaySeedMs",1e4,n),this.Ya=Yh("forwardChannelMaxRetries",2,n),this.ra=Yh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new yg(n&&n.concurrentRequestLimit),this.Ca=new TE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sv(n){if(ov(n),3==n.G){var e=n.V++,t=Wo(n.F);Un(t,"SID",n.J),Un(t,"RID",e),Un(t,"TYPE","terminate"),yd(n,t),(e=new Ml(n,n.h,e,void 0)).K=2,e.v=pg(Wo(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=nb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),cd(e)}tb(n)}function wg(n){n.g&&(bg(n),n.g.cancel(),n.g=null)}function ov(n){wg(n),n.u&&(St.clearTimeout(n.u),n.u=null),Zo(n),n.i.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function Ig(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Qh(n)}function Qh(n){CE(n.i)||n.m||(n.m=!0,rg(n.Ha,n),n.C=0)}function av(n,e){var t;t=e?e.m:n.V++;const r=Wo(n.F);Un(r,"SID",n.J),Un(r,"RID",t),Un(r,"AID",n.U),yd(n,r),n.o&&n.s&&iv(r,n.o,n.s),t=new Ml(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=uv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),vg(n.i,t),dg(t,r,e)}function yd(n,e){n.j&&qy({},function(t,r){Un(e,r,t)})}function uv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ur(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let E=0;E<t;E++){let b=o[E].h;const S=o[E].g;if(b-=u,0>b)u=Math.max(0,o[E].h-100),g=!1;else try{AE(S,d,"req"+b+"_")}catch(N){r&&r(S)}}if(g){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function lv(n){n.g||n.u||(n.Y=1,rg(n.Ga,n),n.A=0)}function Dg(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Sl(Ur(n.Ga,n),VE(n,n.A)),n.A++,0))}function bg(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function cv(n){n.g=new Ml(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Wo(n.oa);Un(e,"RID","rpc"),Un(e,"SID",n.J),Un(e,"CI",n.N?"0":"1"),Un(e,"AID",n.U),yd(n,e),Un(e,"TYPE","xmlhttp"),n.o&&n.s&&iv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=pg(Wo(e)),t.s=null,t.U=!0,hg(t,n)}function Zo(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function LE(n,e){var t=null;if(n.g==e){Zo(n),bg(n),n.g=null;var r=2}else{if(!Xy(n.i,e))return;t=e.D,ev(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ri(r=Tl(),new ag(r,t,e,o)),Qh(n)}else lv(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function FE(n,e){return!(Jy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Sl(Ur(n.Ha,n,e),VE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Dg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:$s(n,5);break;case 4:$s(n,10);break;case 3:$s(n,6);break;default:$s(n,2)}}function VE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function $s(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ur(n.jb,n);t||(t=new Nl("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||fg(t,"https"),pg(t)),function nv(n,e){const t=new ld;if(St.Image){const r=new Image;r.onload=zp(Pl,t,r,"TestLoadImage: loaded",!0,e),r.onerror=zp(Pl,t,r,"TestLoadImage: error",!1,e),r.onabort=zp(Pl,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=zp(Pl,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.G=0,n.j&&n.j.va(e),tb(n),ov(n)}function tb(n){n.G=0,n.I=-1,n.j&&((0!=Kh(n.i).length||0!=n.l.length)&&(n.i.i.length=0,by(n.l),n.l.length=0),n.j.ua())}function Cg(n,e,t){let r=function IE(n){return n instanceof Nl?Wo(n):new Nl(n,void 0)}(t);if(""!=r.i)e&&zh(r,e+"."+r.i),Wh(r,r.m);else{const o=St.location;r=function zD(n,e,t,r){var o=new Nl(null,void 0);return n&&fg(o,n),e&&zh(o,e),t&&Wh(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Cy(n.aa,function(o,u){Un(r,u,o)}),t=n.sa,(e=n.D)&&t&&Un(r,e,t),Un(r,"VER",n.ma),yd(n,r),r}function nb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fr(t&&n.Ba&&!n.qa?new pd({ib:!0}):n.qa)).L=n.H,e}function dv(){}function Jh(){if(ei&&!(10<=Number(oE)))throw Error("Environmental error: no available transport.")}function Hs(n,e){ni.call(this),this.g=new kE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!qp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vd(this)}function vt(n){ug.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UE(){jy.call(this),this.status=1}function vd(n){this.g=n}(it=fr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lg.g(),this.C=function Uy(n){return n.h||(n.h=n.i())}(this.u?this.u:lg),this.g.onreadystatechange=Ur(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void ME(this,u)}n=t||"";const o=new Rl(this.headers);r&&qy(r,function(u,d){o.set(d,u)}),r=function MD(n){e:{var e=XD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=St.FormData&&n instanceof St.FormData,!(0<=Wp(QD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{OE(this),0<this.B&&((this.K=function JD(n){return ei&&function sE(){return function Dl(n){var e=rd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=rE(String(Ma)).split("."),t=rE("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Cu(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Cu(0==o[2].length,0==u[2].length)||Cu(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ur(this.pa,this)):this.A=Py(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){ME(this,u)}},it.pa=function(){void 0!==Lh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ri(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ri(this,"complete"),ri(this,"abort"),Eg(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eg(this,!0)),fr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?NE(this):this.cb())},it.cb=function(){NE(this)},it.ba=function(){try{return 2<Na(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),SE(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=kE.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Ml(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Kp(u),td(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=uv(this,o,e),Un(t=Wo(this.F),"RID",n),Un(t,"CVER",22),this.D&&Un(t,"X-HTTP-Session-Id",this.D),yd(this,t),this.o&&u&&iv(t,this.o,u),vg(this.i,o),this.Ra&&Un(t,"TYPE","init"),this.ja?(Un(t,"$req",e),Un(t,"SID","null"),o.$=!0,dg(o,t,null)):dg(o,t,e),this.G=2}}else 3==this.G&&(n?av(this,n):0==this.l.length||CE(this.i)||av(this))},it.Ga=function(){if(this.u=null,cv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Sl(Ur(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Oi(10),wg(this),cv(this))},it.ab=function(){null!=this.v&&(this.v=null,wg(this),Dg(this),Oi(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Oi(2)):(this.h.info("Failed to ping google.com"),Oi(1))},(it=dv.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},Jh.prototype.g=function(n,e){return new Hs(n,e)},_i(Hs,ni),Hs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),rg(Ur(n.hb,n,e))),Oi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Cg(n,null,n.W),Qh(n)},Hs.prototype.close=function(){sv(this.g)},Hs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ig(this.g,e)}else this.v?((e={}).__data__=pE(n),Ig(this.g,e)):Ig(this.g,n)},Hs.prototype.M=function(){this.g.j=null,delete this.j,sv(this.g),delete this.g,Hs.Z.M.call(this)},_i(vt,ug),_i(UE,jy),_i(vd,dv),vd.prototype.xa=function(){ri(this.g,"a")},vd.prototype.wa=function(n){ri(this.g,new vt(n))},vd.prototype.va=function(n){ri(this.g,new UE(n))},vd.prototype.ua=function(){ri(this.g,"b")},Jh.prototype.createWebChannel=Jh.prototype.g,Hs.prototype.send=Hs.prototype.u,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,jh.NO_ERROR=0,jh.TIMEOUT=8,jh.HTTP_ERROR=6,Vy.COMPLETE="complete",By.EventType=xl,xl.OPEN="a",xl.CLOSE="b",xl.ERROR="c",xl.MESSAGE="d",ni.prototype.listen=ni.prototype.N,fr.prototype.listenOnce=fr.prototype.O,fr.prototype.getLastError=fr.prototype.La,fr.prototype.getLastErrorCode=fr.prototype.Da,fr.prototype.getStatus=fr.prototype.ba,fr.prototype.getResponseJson=fr.prototype.Qa,fr.prototype.getResponseText=fr.prototype.ga,fr.prototype.send=fr.prototype.ea;var rb=bu.createWebChannelTransport=function(){return new Jh},Tg=bu.getStatEventTarget=function(){return Tl()},hv=bu.ErrorCode=jh,Ag=bu.EventType=Vy,Sg=bu.Event=Ra,Gn=bu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yA=bu.FetchXmlHttpFactory=pd,Xh=bu.WebChannel=By,ib=bu.XhrIo=fr;const BE="@firebase/firestore";class xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let kl="9.9.1";const Oa=new Sa.Yd("@firebase/firestore");function xg(){return Oa.logLevel}function Le(n,...e){if(Oa.logLevel<=Sa.in.DEBUG){const t=e.map(fv);Oa.debug(`Firestore (${kl}): ${n}`,...t)}}function _r(n,...e){if(Oa.logLevel<=Sa.in.ERROR){const t=e.map(fv);Oa.error(`Firestore (${kl}): ${n}`,...t)}}function Pa(n,...e){if(Oa.logLevel<=Sa.in.WARN){const t=e.map(fv);Oa.warn(`Firestore (${kl}): ${n}`,...t)}}function fv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: `+n;throw _r(e),new Error(e)}function Dt(n,e){n||st()}function Xe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Wt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _d{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ef{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xr.UNAUTHENTICATED))}shutdown(){}}class ob{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ab{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Hr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=d;e.enqueueRetryable((0,Ie.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},E=b=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>E(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?E(b):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Hr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new _d(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new xr(e)}}class ub{constructor(e,t,r){this.type="FirstParty",this.user=xr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class jE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new ub(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $E{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new pv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class GE{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=HE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function tf(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function lb(n){return n+"\0"}class zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new zn(0,0))}static max(){return new bt(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ed{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ed.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ed?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Ed{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const cb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends Ed{construct(e,t,r){return new pr(e,t,r)}static isValidIdentifier(e){return cb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Pe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Pe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new Pe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(t)}static emptyPath(){return new pr([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(Zt.fromString(e))}static fromName(e){return new Je(Zt.fromString(e).popFirst(5))}static empty(){return new Je(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new Zt(e.slice()))}}class Ru{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function gv(n){return n.fields.find(e=>2===e.kind)}function Fl(n){return n.fields.filter(e=>2!==e.kind)}Ru.UNKNOWN_ID=-1;class Rg{constructor(e,t){this.fieldPath=e,this.kind=t}}class nf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nf(0,Es.min())}}function zE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new zn(t+1,0):new zn(t,r));return new Es(o,Je.empty(),e)}function mv(n){return new Es(n.readTime,n.key,-1)}class Es{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Es(bt.min(),Je.empty(),-1)}static max(){return new Es(bt.max(),Je.empty(),-1)}}function yv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const Ll="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ka(n){return vv.apply(this,arguments)}function vv(){return vv=(0,Ie.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==Ll)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),vv.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(o=>o?ce.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let E=0;E<u;E++){const b=E;t(e[b]).next(S=>{d[b]=S,++g,g===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new ce((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Ng{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Hr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Vl(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=_v(r.target.error);this.T.reject(new Vl(e,o))}}static open(e,t,r,o){try{return new Ng(t,e.transaction(o,r))}catch(u){throw new Vl(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qE(t)}}class Gs{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Gs.v((0,Wt.z$)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Ou(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Wt.hl)())return!1;if(Gs.S())return!0;const e=(0,Wt.z$)(),t=Gs.v(e),r=0<t&&t<10,o=Gs.D(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Pe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Pe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Vl(e,g))},u.onupgradeneeded=d=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.P.O(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.k(e);const E=Ng.open(u.db,e,d?"readonly":"readwrite",r),b=o(E).next(S=>(E.R(),S)).catch(S=>(E.abort(S),ce.reject(S))).toPromise();return b.catch(()=>{}),yield E.A,b}catch(E){const b=E,S="FirebaseError"!==b.name&&g<3;if(Le("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class db{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Ou(this.$.delete())}}class Vl extends Pe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nu(n){return"IndexedDbTransactionError"===n.name}class qE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ou(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Ou(this.store.add(e))}get(e){return Ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Ou(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Ou(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.G(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ce((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}W(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(u,d,g)=>g.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new ce((r,o)=>{t.onerror=u=>{const d=_v(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}G(e,t){const r=[];return new ce((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const E=new db(g),b=t(g.primaryKey,g.value,E);if(b instanceof ce){const S=b.catch(N=>(E.done(),ce.reject(N)));r.push(S)}E.isDone?o():null===E.U?g.continue():g.continue(E.U)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ou(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=_v(r.target.error);t(o)}})}let KE=!1;function _v(n){const e=Gs.v((0,Wt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KE||(KE=!0,setTimeout(()=>{throw r},0)),r}}return n}class hb{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Nu(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ka(r)}yield t.Z(1)}))}}class Ev{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,u=!0;return ce.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Le("IndexBackiller",`Processing collection: ${d}`),this.nt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.st(o,u)).next(g=>(Le("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}st(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=mv(u);yv(d,r)>0&&(r=d)}),new Es(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Yi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function wv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ul(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Yi.ot=-1;class Qn{constructor(e,t){this.comparator=e,this.root=t||ii.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Og(this.root,e,this.comparator,!1)}getReverseIterator(){return new Og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Og(this.root,e,this.comparator,!0)}}class Og{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ii.RED,this.left=null!=o?o:ii.EMPTY,this.right=null!=u?u:ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ii(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ii.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1,ii.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dn{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new YE(this.data.getIterator())}getIteratorFrom(e){return new YE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class YE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wd(n){return n.hasNext()?n.getNext():void 0}class Qi{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new Qi([])}unionWith(e){let t=new Dn(pr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Mr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mr.EMPTY_BYTE_STRING=new Mr("");const fb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fa(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=fb.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jn(n.seconds),nanos:Jn(n.nanos)}}function Jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bl(n){return"string"==typeof n?Mr.fromBase64String(n):Mr.fromUint8Array(n)}function Iv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Pg(n){const e=n.mapValue.fields.__previous_value__;return Iv(e)?Pg(e):e}function jl(n){const e=Fa(n.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}class JE{constructor(e,t,r,o,u,d,g,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=E}}class Eo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Eo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Eo&&e.projectId===this.projectId&&e.database===this.database}}function rf(n){return null==n}function sf(n){return 0===n&&1/n==-1/0}function kg(n){return"number"==typeof n&&Number.isInteger(n)&&!sf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},of={nullValue:"NULL_VALUE"};function $l(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Iv(n)?4:ew(n)?9007199254740991:10:st()}function wo(n,e){if(n===e)return!0;const t=$l(n);if(t!==$l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jl(n).isEqual(jl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Fa(r.timestampValue),d=Fa(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Bl(n.bytesValue).isEqual(Bl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Jn(r.geoPointValue.latitude)===Jn(o.geoPointValue.latitude)&&Jn(r.geoPointValue.longitude)===Jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Jn(r.integerValue)===Jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Jn(r.doubleValue),d=Jn(o.doubleValue);return u===d?sf(u)===sf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return tf(n.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(wv(u)!==wv(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!wo(u[g],d[g])))return!1;return!0}(n,e);default:return st()}var o}function af(n,e){return void 0!==(n.values||[]).find(t=>wo(t,e))}function La(n,e){if(n===e)return 0;const t=$l(n),r=$l(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Jn(o.integerValue||o.doubleValue),g=Jn(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return pb(n.timestampValue,e.timestampValue);case 4:return pb(jl(n),jl(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Bl(o),g=Bl(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let E=0;E<d.length&&E<g.length;E++){const b=Pt(d[E],g[E]);if(0!==b)return b}return Pt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Pt(Jn(o.latitude),Jn(u.latitude));return 0!==d?d:Pt(Jn(o.longitude),Jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let E=0;E<d.length&&E<g.length;++E){const b=La(d[E],g[E]);if(b)return b}return Pt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Pu.mapValue&&u===Pu.mapValue)return 0;if(o===Pu.mapValue)return 1;if(u===Pu.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),E=u.fields||{},b=Object.keys(E);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const N=Pt(g[S],b[S]);if(0!==N)return N;const K=La(d[g[S]],E[b[S]]);if(0!==K)return K}return Pt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function pb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Fa(n),r=Fa(e),o=Pt(t.seconds,r.seconds);return 0!==o?o:Pt(t.nanos,r.nanos)}function Id(n){return Dd(n)}function Dd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Fa(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bl(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Dd(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${Dd(r.fields[g])}`;return u+"}"}(n.mapValue):st();var e}function Hl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ku(n){return!!n&&"integerValue"in n}function Va(n){return!!n&&"arrayValue"in n}function XE(n){return!!n&&"nullValue"in n}function gb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uf(n){return!!n&&"mapValue"in n}function lf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ul(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ew(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function mb(n){return"nullValue"in n?of:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hl(Eo.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function yb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hl(Eo.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Pu:st()}function Dv(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bv(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lf(t)}setAll(e){let t=pr.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=lf(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];uf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ul(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Rr(lf(this.value))}}function cf(n){const e=[];return Ul(n.fields,(t,r)=>{const o=new pr([t]);if(uf(r)){const u=cf(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Qi(e)}class gn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new gn(e,0,bt.min(),bt.min(),Rr.empty(),0)}static newFoundDocument(e,t,r){return new gn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new gn(e,2,t,bt.min(),Rr.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,bt.min(),Rr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vb{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.ut=null}}function Cv(n,e=null,t=[],r=[],o=null,u=null,d=null){return new vb(n,e,t,r,o,u,d)}function Fu(n){const e=Xe(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Id(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),rf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Id(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Id(r)).join(",")),e.ut=t}return e.ut}function df(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Tv(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!wo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Av(n.startAt,e.startAt)&&Av(n.endAt,e.endAt)}function bd(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Fg(n,e){return n.filters.filter(t=>t instanceof si&&t.field.isEqual(e))}function Eb(n,e,t){let r=of,o=!0;for(const u of Fg(n,e)){let d=of,g=!0;switch(u.op){case"<":case"<=":d=mb(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=of}Dv({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Dv({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function tw(n,e,t){let r=Pu,o=!0;for(const u of Fg(n,e)){let d=Pu,g=!0;switch(u.op){case">=":case">":d=yb(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Pu}bv({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];bv({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class si extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Cd(e,t,r):"array-contains"===t?new rw(e,r):"in"===t?new Ib(e,r):"not-in"===t?new _A(e,r):"array-contains-any"===t?new iw(e,r):new si(e,t,r)}static ct(e,t,r){return"in"===t?new nw(e,r):new Td(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(La(t,this.value)):null!==t&&$l(this.value)===$l(t)&&this.at(La(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Cd extends si{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.at(t)}}class nw extends si{constructor(e,t){super(e,"in",t),this.keys=wb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Td extends si{constructor(e,t){super(e,"not-in",t),this.keys=wb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class rw extends si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Va(t)&&af(t.arrayValue,this.value)}}class Ib extends si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&af(this.value.arrayValue,t)}}class _A extends si{constructor(e,t){super(e,"not-in",t)}matches(e){if(af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!af(this.value.arrayValue,t)}}class iw extends si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Va(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>af(this.value.arrayValue,r))}}class Gl{constructor(e,t){this.position=e,this.inclusive=t}}class zl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function sw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Je.comparator(Je.fromName(d.referenceValue),t.key):La(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Av(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wo(n.position[t],e.position[t]))return!1;return!0}class Ua{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=E,this.lt=null,this.ft=null}}function ow(n,e,t,r,o,u,d,g){return new Ua(n,e,t,r,o,u,d,g)}function Ad(n){return new Ua(n)}function Sv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xv(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Mv(n){return null!==n.collectionGroup}function Sd(n){const e=Xe(n);if(null===e.lt){e.lt=[];const t=xv(e),r=Sv(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new zl(t)),e.lt.push(new zl(pr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new zl(pr.keyField(),u))}}}return e.lt}function Ei(n){const e=Xe(n);if(!e.ft)if("F"===e.limitType)e.ft=Cv(e.path,e.collectionGroup,Sd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Sd(e))t.push(new zl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Gl(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Gl(e.startAt.position,e.startAt.inclusive):null;e.ft=Cv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function Rv(n,e,t){return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xd(n,e){return df(Ei(n),Ei(e))&&n.limitType===e.limitType}function Nv(n){return`${Fu(Ei(n))}|lt:${n.limitType}`}function Lg(n){return`Query(target=${function _b(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Id(r.value)}`;var r}).join(", ")}]`),rf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Id(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Id(t)).join(",")),`Target(${e})`}(Ei(n))}; limitType=${n.limitType})`}function Vg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=sw(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,Sd(t),r)||t.endAt&&!function(o,u,d){const g=sw(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,Sd(t),r)));var t,r}function Ov(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aw(n){return(e,t)=>{let r=!1;for(const o of Sd(n)){const u=uw(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function uw(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),E=d.data.field(o);return null!==g&&null!==E?La(g,E):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function lw(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function cw(n){return{integerValue:""+n}}function dw(n,e){return kg(e)?cw(e):lw(n,e)}class Ug{constructor(){this._=void 0}}function hf(n,e,t){return n instanceof ki?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Wl?jg(n,e):n instanceof Io?hw(n,e):function(r,o){const u=Bg(r,o),d=fw(u)+fw(r._t);return ku(u)&&ku(r._t)?cw(d):lw(r.wt,d)}(n,e)}function bb(n,e,t){return n instanceof Wl?jg(n,e):n instanceof Io?hw(n,e):t}function Bg(n,e){return n instanceof Md?ku(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ki extends Ug{}class Wl extends Ug{constructor(e){super(),this.elements=e}}function jg(n,e){const t=ff(e);for(const r of n.elements)t.some(o=>wo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Io extends Ug{constructor(e){super(),this.elements=e}}function hw(n,e){let t=ff(e);for(const r of n.elements)t=t.filter(o=>!wo(o,r));return{arrayValue:{values:t}}}class Md extends Ug{constructor(e,t){super(),this.wt=e,this._t=t}}function fw(n){return Jn(n.integerValue||n.doubleValue)}function ff(n){return Va(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Lu{constructor(e,t){this.field=e,this.transform=t}}class Tb{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Rd{}function Pv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Nd(n.key,Bn.none()):new Vu(n.key,n.data,Bn.none());{const t=n.data,r=Rr.empty();let o=new Dn(pr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Yo(n.key,r,new Qi(o.toArray()),Bn.none())}}function Ab(n,e,t){n instanceof Vu?function(r,o,u){const d=r.value.clone(),g=Gg(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Yo?function(r,o,u){if(!pf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Gg(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(Hg(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gf(n,e,t,r){return n instanceof Vu?function(o,u,d,g){if(!pf(o.precondition,u))return d;const E=o.value.clone(),b=pw(o.fieldTransforms,g,u);return E.setAll(b),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yo?function(o,u,d,g){if(!pf(o.precondition,u))return d;const E=pw(o.fieldTransforms,g,u),b=u.data;return b.setAll(Hg(o)),b.setAll(E),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,pf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function EA(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Bg(r.transform,o||null);null!=u&&(null===t&&(t=Rr.empty()),t.set(r.field,u))}return t||null}function $g(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&tf(t,r,(o,u)=>function Cb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wl&&r instanceof Wl||t instanceof Io&&r instanceof Io?tf(t.elements,r.elements,wo):t instanceof Md&&r instanceof Md?wo(t._t,r._t):t instanceof ki&&r instanceof ki);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Vu extends Rd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Yo extends Rd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Hg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gg(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,bb(d,g,t[o]))}return r}function pw(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,hf(u,d,e))}return r}class Nd extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kv extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sb{constructor(e){this.count=e}}var gr,Jt;function Fv(n){switch(n){default:return st();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function gw(n){if(void 0===n)return _r("GRPC error has no .code"),de.UNKNOWN;switch(n){case gr.OK:return de.OK;case gr.CANCELLED:return de.CANCELLED;case gr.UNKNOWN:return de.UNKNOWN;case gr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case gr.INTERNAL:return de.INTERNAL;case gr.UNAVAILABLE:return de.UNAVAILABLE;case gr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case gr.NOT_FOUND:return de.NOT_FOUND;case gr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case gr.ABORTED:return de.ABORTED;case gr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case gr.DATA_LOSS:return de.DATA_LOSS;default:return st()}}(Jt=gr||(gr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class Ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ul(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return ZE(this.inner)}size(){return this.innerSize}}const mw=new Qn(Je.comparator);function Ji(){return mw}const Lv=new Qn(Je.comparator);function Od(...n){let e=Lv;for(const t of n)e=e.insert(t.key,t);return e}function yw(n){let e=Lv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Do(){return Nr()}function vw(){return Nr()}function Nr(){return new Ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const Pd=new Qn(Je.comparator),xb=new Dn(Je.comparator);function Bt(...n){let e=xb;for(const t of n)e=e.add(t);return e}const wA=new Dn(Pt);function Uu(){return wA}class mf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t)),new mf(bt.min(),r,Uu(),Ji(),Bt())}}class ql{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ql(Mr.EMPTY_BYTE_STRING,t,Bt(),Bt(),Bt())}}class zg{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class Vv{constructor(e,t){this.targetId=e,this.It=t}}class _w{constructor(e,t,r=Mr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Ew{constructor(){this.Tt=0,this.Et=jv(),this.At=Mr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Bt(),t=Bt(),r=Bt();return this.Et.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new ql(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=jv()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Uv{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Ji(),this.Bt=Bv(),this.Lt=new Dn(Pt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const u=o.target;if(bd(u))if(0===r){const d=new Je(u.path);this.Kt(t,d,gn.newNoDocument(d,bt.min()))}else Dt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,d)=>{const g=this.Ht(d);if(g){if(u.current&&bd(g.target)){const E=new Je(g.target.path);null!==this.$t.get(E)||this.Xt(d,E)||this.Kt(d,E,gn.newNoDocument(E,e))}u.vt&&(t.set(d,u.St()),u.Dt())}});let r=Bt();this.Bt.forEach((u,d)=>{let g=!0;d.forEachWhile(E=>{const b=this.Ht(E);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.$t.forEach((u,d)=>d.setReadTime(e));const o=new mf(e,t,this.Lt,this.$t,r);return this.$t=Ji(),this.Bt=Bv(),this.Lt=new Dn(Pt),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Ew,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Dn(Pt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Ew),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Bv(){return new Qn(Je.comparator)}function jv(){return new Qn(Je.comparator)}const Wg={asc:"ASCENDING",desc:"DESCENDING"},$v={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class IA{constructor(e,t){this.databaseId=e,this.dt=t}}function kd(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ww(n,e){return n.dt?e.toBase64():e.toUint8Array()}function Iw(n,e){return kd(n,e.toTimestamp())}function mr(n){return Dt(!!n),bt.fromTimestamp(function(e){const t=Fa(e);return new zn(t.seconds,t.nanos)}(n))}function qg(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Dw(n){const e=Zt.fromString(n);return Dt(Nb(e)),e}function Kl(n,e){return qg(n.databaseId,e.path)}function zs(n,e){const t=Dw(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(Hv(t))}function bw(n,e){return qg(n.databaseId,e)}function Cw(n){const e=Dw(n);return 4===e.length?Zt.emptyPath():Hv(e)}function yf(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Hv(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Gv(n,e,t){return{name:Kl(n,e),fields:t.value.mapValue.fields}}function Tw(n,e,t){const r=zs(n,e.name),o=mr(e.updateTime),u=new Rr({mapValue:{fields:e.fields}}),d=gn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function vf(n,e){let t;if(e instanceof Vu)t={update:Gv(n,e.key,e.value)};else if(e instanceof Nd)t={delete:Kl(n,e.key)};else if(e instanceof Yo)t={update:Gv(n,e.key,e.data),updateMask:CA(e.fieldMask)};else{if(!(e instanceof kv))return st();t={verify:Kl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof ki)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Wl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Io)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Md)return{fieldPath:u.field.canonicalString(),increment:d._t};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Iw(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function zv(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Bn.updateTime(mr(o.updateTime)):void 0!==o.exists?Bn.exists(o.exists):Bn.none():Bn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(Dt("REQUEST_TIME"===d.setToServerValue),g=new ki):"appendMissingElements"in d?g=new Wl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new Io(d.removeAllFromArray.values||[]):"increment"in d?g=new Md(u,d.increment):st();const E=pr.fromServerFormat(d.fieldPath);return new Lu(E,g)}(n,o)):[];var o;if(e.update){const o=zs(n,e.update.name),u=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Qi((e.updateMask.fieldPaths||[]).map(b=>pr.fromServerFormat(b)));return new Yo(o,u,d,t,r)}return new Vu(o,u,t,r)}if(e.delete){const o=zs(n,e.delete);return new Nd(o,t)}if(e.verify){const o=zs(n,e.verify);return new kv(o,t)}return st()}function Mw(n,e){return{documents:[bw(n,e.path)]}}function Wv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const b=E.map(S=>function(N){if("=="===N.op){if(gb(N.value))return{unaryFilter:{field:_f(N.field),op:"IS_NAN"}};if(XE(N.value))return{unaryFilter:{field:_f(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(gb(N.value))return{unaryFilter:{field:_f(N.field),op:"IS_NOT_NAN"}};if(XE(N.value))return{unaryFilter:{field:_f(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_f(N.field),op:Rb(N.op),value:N.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(b=>{return{field:_f((S=b).field),direction:Mb(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.dt||rf(b)?b:{value:b});var b,g,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function qv(n){let e=Cw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Kv(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new zl(Zl((N=S).field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(S){let N;return N="object"==typeof S?S.value:S,rf(N)?null:N}(t.limit));let E=null;var S;t.startAt&&(E=new Gl((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Gl(S.values||[],!S.before)}(t.endAt)),ow(e,o,d,u,g,"F",E,b)}function Kv(n){return n?void 0!==n.unaryFilter?[bA(n)]:void 0!==n.fieldFilter?[DA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Kv(e)).reduce((e,t)=>e.concat(t)):st():[]}function Mb(n){return Wg[n]}function Rb(n){return $v[n]}function _f(n){return{fieldPath:n.canonicalString()}}function Zl(n){return pr.fromServerFormat(n.fieldPath)}function DA(n){return si.create(Zl(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function bA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Zl(n.unaryFilter.field);return si.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Zl(n.unaryFilter.field);return si.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Zl(n.unaryFilter.field);return si.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zl(n.unaryFilter.field);return si.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function CA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ob(e)),e=TA(n.get(t),e);return Ob(e)}function TA(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Ob(n){return n+"\x01\x01"}function ja(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&st(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let E;0===o.length?E=g:(o+=g,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:st()}u=d+2}return new Zt(r)}const Ef=["userId","batchId"];function Zv(n,e){return[n,Xi(e)]}function Yv(n,e,t){return[n,Xi(e),t]}const Qv={},Nw=["prefixPath","collectionGroup","readTime","documentId"],Ow=["prefixPath","collectionGroup","documentId"],AA=["collectionGroup","readTime","prefixPath","documentId"],Jv=["canonicalId","targetId"],Pw=["targetId","path"],Pb=["path","targetId"],kw=["collectionId","parent"],SA=["indexId","uid"],kb=["uid","sequenceNumber"],Fb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xv=["indexId","uid","orderedDocumentKey"],Lb=["userId","collectionPath","documentId"],xA=["userId","collectionPath","largestBatchId"],MA=["userId","collectionGroup","largestBatchId"],Vb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ub=[...Vb,"documentOverlays"],Fw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lw=Fw,RA=[...Lw,"indexConfiguration","indexState","indexEntries"];class e_ extends WE{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Er(n,e){const t=Xe(n);return Gs.N(t.ee,e)}class t_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Ab(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vw();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const E=Pv(d,g);null!==E&&r.set(o.key,E),d.isValidDocument()||d.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&tf(this.mutations,e.mutations,(t,r)=>$g(t,r))&&tf(this.baseMutations,e.baseMutations,(t,r)=>$g(t,r))}}class ws{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=Pd;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new ws(e,t,r,o)}}class n_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qo{constructor(e,t,r,o,u=bt.min(),d=bt.min(),g=Mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vw{constructor(e){this.ne=e}}function Kg(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Kl(o=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:kd(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bu(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Bu(e.version)}}var o,u;return r}function wf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yl(n){const e=new zn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function ju(n,e){const t=(e.baseMutations||[]).map(u=>zv(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>zv(n.ne,u)),o=zn.fromMillis(e.localWriteTimeMs);return new t_(e.batchId,o,t,r)}function If(n){const e=Yl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yl(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=Ei(Ad(Cw(o.documents[0])))):r=Ei(qv(n.query)),new Qo(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Mr.fromBase64String(n.resumeToken))}function Uw(n,e){const t=Bu(e.snapshotVersion),r=Bu(e.lastLimboFreeSnapshotVersion);let o;o=bd(e.target)?Mw(n.ne,e.target):Wv(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function r_(n){const e=qv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Rv(e,e.limit,"L"):e}function Df(n,e){return new n_(e.largestBatchId,zv(n.ne,e.overlayMutation))}function $u(n,e){const t=e.path.lastSegment();return[n,Xi(e.path.popLast()),t]}function i_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bu(r.readTime),documentKey:Xi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Bw{getBundleMetadata(e,t){return jw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Yl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return jw(e).put({bundleId:(r=t).id,createTime:Bu(mr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jb(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:r_(o.bundledQuery),readTime:Yl(o.readTime)};var o})}saveNamedQuery(e,t){return jb(e).put({name:(r=t).name,readTime:Bu(mr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jw(n){return Er(n,"bundles")}function jb(n){return Er(n,"namedQueries")}class Zg{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Zg(e,t.uid||"")}getOverlay(e,t){return bf(e).get($u(this.userId,t)).next(r=>r?Df(this.wt,r):null)}getOverlays(e,t){const r=Do();return ce.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new n_(t,d);o.push(this.ie(e,g))}),ce.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Xi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(bf(e).W("collectionPathOverlayIndex",g))}),ce.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Do(),u=Xi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return bf(e).K("collectionPathOverlayIndex",d).next(g=>{for(const E of g){const b=Df(this.wt,E);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Do();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bf(e).J({index:"collectionGroupOverlayIndex",range:g},(E,b,S)=>{const N=Df(this.wt,b);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):S.done()}).next(()=>u)}ie(e,t){return bf(e).put(function(r,o,u){const[d,g,E]=$u(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:vf(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function bf(n){return Er(n,"documentOverlays")}class Ql{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Jn(e.integerValue));else if("doubleValue"in e){const r=Jn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),sf(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Bl(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?ew(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):st()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),Je.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function $w(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Hw(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=$w(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ql.ye=new Ql;class $b{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=Hw(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=Hw(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class NA{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class s_{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Fd{constructor(){this.Me=new $b,this.Fe=new NA(this.Me),this.$e=new s_(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Jl{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Jl(this.indexId,this.documentKey,this.arrayValue,r)}}function Xl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=o_(n.arrayValue,e.arrayValue),0!==t?t:(t=o_(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function o_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class a_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=gv(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Fl(e);let o=0,u=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const d=r[o];if(!this.je(this.Ke,d)||!this.We(this.Ue[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ue.length||!this.We(this.Ue[u++],d))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class u_{constructor(){this.ze=new Yg}addToCollectionParentIndex(e,t){return this.ze.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Es.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class Yg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Dn(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Dn(Zt.comparator)).toArray()}}const Qg=new Uint8Array(0);class Gw{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Yg,this.Je=new Ba(r=>Fu(r),(r,o)=>df(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:Xi(o)};return l_(e).put(u)}return ce.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[lb(t),""],!1,!0);return l_(e).K(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ja(d.parent))}return r})}addFieldIndex(e,t){const r=Jg(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Xg(e);return u.next(g=>{d.put(i_(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Jg(e),o=Xg(e),u=Cf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Cf(e);let o=!0;const u=new Map;return ce.forEach(this.Ye(t),d=>this.Xe(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=Bt();const g=[];return ce.forEach(u,(E,b)=>{var S;Le("IndexedDbIndexManager",`Using index ${S=E,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(tn=>`${tn.fieldPath}:${tn.kind}`).join(",")}`} to execute ${Fu(t)}`);const N=function(tn,jt){const Xt=gv(jt);if(void 0===Xt)return null;for(const vn of Fg(tn,Xt.fieldPath))switch(vn.op){case"array-contains-any":return vn.value.arrayValue.values||[];case"array-contains":return[vn.value]}return null}(b,E),K=function(tn,jt){const Xt=new Map;for(const vn of Fl(jt))for(const ns of Fg(tn,vn.fieldPath))switch(ns.op){case"==":case"in":Xt.set(vn.fieldPath.canonicalString(),ns.value);break;case"not-in":case"!=":return Xt.set(vn.fieldPath.canonicalString(),ns.value),Array.from(Xt.values())}return null}(b,E),Q=function(tn,jt){const Xt=[];let vn=!0;for(const ns of Fl(jt)){const k_=0===ns.kind?Eb(tn,ns.fieldPath,tn.startAt):tw(tn,ns.fieldPath,tn.startAt);Xt.push(k_.value),vn&&(vn=k_.inclusive)}return new Gl(Xt,vn)}(b,E),me=function(tn,jt){const Xt=[];let vn=!0;for(const ns of Fl(jt)){const k_=0===ns.kind?tw(tn,ns.fieldPath,tn.endAt):Eb(tn,ns.fieldPath,tn.endAt);Xt.push(k_.value),vn&&(vn=k_.inclusive)}return new Gl(Xt,vn)}(b,E),je=this.Ze(E,b,Q),et=this.Ze(E,b,me),kt=this.tn(E,b,K),Gt=this.en(E.indexId,N,je,Q.inclusive,et,me.inclusive,kt);return ce.forEach(Gt,tn=>r.j(tn,t.limit).next(jt=>{jt.forEach(Xt=>{const vn=Je.fromSegments(Xt.documentKey);d.has(vn)||(d=d.add(vn),g.push(vn))})}))}).next(()=>g)}return ce.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,u,d,g){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),b=E/(null!=t?t.length:1),S=[];for(let N=0;N<E;++N){const K=t?this.nn(t[N/b]):Qg,Q=this.sn(e,K,r[N%b],o),me=this.rn(e,K,u[N%b],d),je=g.map(et=>this.sn(e,K,et,!0));S.push(...this.createRange(Q,me,je))}return S}sn(e,t,r,o){const u=new Jl(e,Je.empty(),t,r);return o?u:u.Le()}rn(e,t,r,o){const u=new Jl(e,Je.empty(),t,r);return o?u.Le():u}Xe(e,t){const r=new a_(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.Ge(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;return ce.forEach(this.Ye(t),o=>this.Xe(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new Dn(pr.comparator),E=!1;for(const b of d.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?E=!0:g=g.add(S.field))}for(const b of d.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Fd;for(const o of Fl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Be(o.kind);Ql.ye.re(u,d)}return r.Oe()}nn(e){const t=new Fd;return Ql.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Fd;return Ql.ye.re(Hl(this.databaseId,t),r.Be(function(o){const u=Fl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new Fd);let u=0;for(const d of Fl(e)){const g=r[u++];for(const E of o)if(this.cn(t,d.fieldPath)&&Va(g))o=this.an(o,d,g);else{const b=E.Be(d.kind);Ql.ye.re(g,b)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const E=new Fd;E.seed(g.Oe()),Ql.ye.re(d,E.Be(t.kind)),u.push(E)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof si&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Jg(e),o=Xg(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const d=[];return ce.forEach(u,g=>o.get([g.indexId,this.uid]).next(E=>{d.push(function(b,S){const N=S?new nf(S.sequenceNumber,new Es(Yl(S.readTime),new Je(ja(S.documentKey)),S.largestBatchId)):nf.empty(),K=b.fields.map(([Q,me])=>new Rg(pr.fromServerFormat(Q),me));return new Ru(b.indexId,b.collectionGroup,K,N)}(g,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Pt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Jg(e),u=Xg(e);return this.ln(e).next(d=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ce.forEach(g,E=>u.put(i_(E.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ce.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ce.forEach(g,E=>this.fn(e,o,E).next(b=>{const S=this.dn(u,E);return b.isEqual(S)?ce.resolve():this._n(e,u,E,b,S)}))))})}wn(e,t,r,o){return Cf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return Cf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=Cf(e);let u=new Dn(Xl);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(d,g)=>{u=u.add(new Jl(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}dn(e,t){let r=new Dn(Xl);const o=this.on(t,e);if(null==o)return r;const u=gv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Va(d))for(const g of d.arrayValue.values||[])r=r.add(new Jl(t.indexId,e.key,this.nn(g),o))}else r=r.add(new Jl(t.indexId,e.key,Qg,o));return r}_n(e,t,r,o,u){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,E,b,S,N){const K=g.getIterator(),Q=E.getIterator();let me=wd(K),je=wd(Q);for(;me||je;){let et=!1,kt=!1;if(me&&je){const Gt=b(me,je);Gt<0?kt=!0:Gt>0&&(et=!0)}else null!=me?kt=!0:et=!0;et?(S(je),je=wd(Q)):kt?(N(me),me=wd(K)):(me=wd(K),je=wd(Q))}}(o,u,Xl,g=>{d.push(this.wn(e,t,r,g))},g=>{d.push(this.mn(e,t,r,g))}),ce.waitFor(d)}ln(e){let t=1;return Xg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>Xl(d,g)).filter((d,g,E)=>!g||0!==Xl(d,E[g-1]));const o=[];o.push(e);for(const d of r){const g=Xl(d,e),E=Xl(d,t);if(0===g)o[0]=e.Le();else if(g>0&&E<0)o.push(d),o.push(d.Le());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Qg,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Qg,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Hb)}getMinOffset(e,t){return ce.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||st())).next(Hb)}}function l_(n){return Er(n,"collectionParents")}function Cf(n){return Er(n,"indexEntries")}function Jg(n){return Er(n,"indexConfiguration")}function Xg(n){return Er(n,"indexState")}function Hb(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;yv(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Es(e.readTime,e.documentKey,t)}const c_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const E=r.J({range:d},(S,N,K)=>(g++,K.delete()));u.push(E.next(()=>{Dt(1===g)}));const b=[];for(const S of t.mutations){const N=Yv(e,S.key.path,t.batchId);u.push(o.delete(N)),b.push(S.key)}return ce.waitFor(u).next(()=>b)}function em(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(41943040,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class d_{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new d_(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).J({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Tf(e),d=ec(e);return d.add({}).next(g=>{Dt("number"==typeof g);const E=new t_(g,t,r,o),b=function(K,Q,me){const je=me.baseMutations.map(kt=>vf(K.ne,kt)),et=me.mutations.map(kt=>vf(K.ne,kt));return{userId:Q,batchId:me.batchId,localWriteTimeMs:me.localWriteTime.toMillis(),baseMutations:je,mutations:et}}(this.wt,this.userId,E),S=[];let N=new Dn((K,Q)=>Pt(K.canonicalString(),Q.canonicalString()));for(const K of o){const Q=Yv(this.userId,K.key.path,g);N=N.add(K.key.path.popLast()),S.push(d.put(b)),S.push(u.put(Q,Qv))}return N.forEach(K=>{S.push(this.indexManager.addToCollectionParentIndex(e,K))}),e.addOnCommittedListener(()=>{this.gn[g]=E.keys()}),ce.waitFor(S).next(()=>E)})}lookupMutationBatch(e,t){return ec(e).get(t).next(r=>r?(Dt(r.userId===this.userId),ju(this.wt,r)):null)}yn(e,t){return this.gn[t]?ce.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ec(e).J({index:"userMutationsIndex",range:o},(d,g,E)=>{g.userId===this.userId&&(Dt(g.batchId>=r),u=ju(this.wt,g)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ec(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).K("userMutationsIndex",t).next(r=>r.map(o=>ju(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zv(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Tf(e).J({range:o},(d,g,E)=>{const[b,S,N]=d,K=ja(S);if(b===this.userId&&t.path.isEqual(K))return ec(e).get(N).next(Q=>{if(!Q)throw st();Dt(Q.userId===this.userId),u.push(ju(this.wt,Q))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Pt);const o=[];return t.forEach(u=>{const d=Zv(this.userId,u.path),g=IDBKeyRange.lowerBound(d),E=Tf(e).J({range:g},(b,S,N)=>{const[K,Q,me]=b,je=ja(Q);K===this.userId&&u.path.isEqual(je)?r=r.add(me):N.done()});o.push(E)}),ce.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Zv(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new Dn(Pt);return Tf(e).J({range:d},(E,b,S)=>{const[N,K,Q]=E,me=ja(K);N===this.userId&&r.isPrefixOf(me)?me.length===o&&(g=g.add(Q)):S.done()}).next(()=>this.pn(e,g))}pn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ec(e).get(u).next(d=>{if(null===d)throw st();Dt(d.userId===this.userId),r.push(ju(this.wt,d))}))}),ce.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return zw(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ce.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Tf(e).J({range:r},(u,d,g)=>{if(u[0]===this.userId){const E=ja(u[1]);o.push(E)}else g.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return Gb(e,this.userId,t)}Tn(e){return zb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Gb(n,e,t){const r=Zv(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Tf(n).J({range:u,H:!0},(g,E,b)=>{const[S,N,K]=g;S===e&&N===o&&(d=!0),b.done()}).next(()=>d)}function ec(n){return Er(n,"mutations")}function Tf(n){return Er(n,"documentMutations")}function zb(n){return Er(n,"mutationQueues")}class tc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new tc(0)}static Rn(){return new tc(-1)}}class tm{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new tc(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>bt.fromTimestamp(new zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ld(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Ld(e).J((d,g)=>{const E=If(g);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>ce.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Ld(e).J((r,o)=>{const u=If(o);t(u)})}bn(e){return Ww(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Pn(e,t){return Ww(e).put("targetGlobalKey",t)}vn(e,t){return Ld(e).put(Uw(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ld(e).J({range:o,index:"queryTargetsIndex"},(d,g,E)=>{const b=If(g);df(t,b.target)&&(u=b,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=$a(e);return t.forEach(d=>{const g=Xi(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),ce.waitFor(o)}removeMatchingKeys(e,t,r){const o=$a(e);return ce.forEach(t,u=>{const d=Xi(u.path);return ce.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=$a(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=$a(e);let u=Bt();return o.J({range:r,H:!0},(d,g,E)=>{const b=ja(d[1]),S=new Je(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Xi(t.path),o=IDBKeyRange.bound([r],[lb(r)],!1,!0);let u=0;return $a(e).J({index:"documentTargetsIndex",H:!0,range:o},([d,g],E,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}te(e,t){return Ld(e).get(t).next(r=>r?If(r):null)}}function Ld(n){return Er(n,"targets")}function Ww(n){return Er(n,"targetGlobal")}function $a(n){return Er(n,"targetDocuments")}function Hu([n,e],[t,r]){const o=Pt(n,t);return 0===o?Pt(e,r):o}class qw{constructor(e){this.Sn=e,this.buffer=new Dn(Hu),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Hu(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class h_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Nu(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ka(r)}yield t.kn(3e5)}))}}class f_{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Yi.ot);const r=new qw(t);return this.On.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.On.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(c_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c_):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,o,u,d,g,E,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),xg()<=Sa.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(E-g)+`ms\n\tRemoved ${N} documents in `+(b-E)+`ms\nTotal Duration: ${b-S}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class Wb{constructor(e,t){this.db=e,this.garbageCollector=new f_(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return Vd(e,r)}removeReference(e,t,r){return Vd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Vd(e,t)}Un(e,t){return function(r,o){let u=!1;return zb(r).Y(d=>Gb(r,d,o).next(g=>(g&&(u=!0),ce.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ln(e,(d,g)=>{if(g<=t){const E=this.Un(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,bt.min()),$a(e).delete([0,Xi(d.path)])))});o.push(E)}}).next(()=>ce.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Vd(e,t)}Ln(e,t){const r=$a(e);let o,u=Yi.ot;return r.J({index:"documentTargetsIndex"},([d,g],{path:E,sequenceNumber:b})=>{0===d?(u!==Yi.ot&&t(new Je(ja(o)),u),u=b,o=E):u=Yi.ot}).next(()=>{u!==Yi.ot&&t(new Je(ja(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vd(n,e){return $a(n).put((r=n.currentSequenceNumber,{targetId:0,path:Xi(e.path),sequenceNumber:r}));var r}class nm{constructor(){this.changes=new Ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rm{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ud(e).put(r)}removeEntry(e,t,r){return Ud(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],wf(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=gn.newInvalidDocument(t);return Ud(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(t))},(o,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:gn.newInvalidDocument(t)};return Ud(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(t))},(o,u)=>{r={document:this.Kn(t,u),size:em(u)}}).next(()=>r)}getEntries(e,t){let r=Ji();return this.Qn(e,t,(o,u)=>{const d=this.Kn(o,u);r=r.insert(o,d)}).next(()=>r)}jn(e,t){let r=Ji(),o=new Qn(Je.comparator);return this.Qn(e,t,(u,d)=>{const g=this.Kn(u,d);r=r.insert(u,g),o=o.insert(u,em(d))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return ce.resolve();let o=new Dn(Zw);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(Bd(o.first()),Bd(o.last())),d=o.getIterator();let g=d.getNext();return Ud(e).J({index:"documentKeyIndex",range:u},(E,b,S)=>{const N=Je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&Zw(g,N)<0;)r(g,null),g=d.getNext();g&&g.isEqual(N)&&(r(g,b),g=d.hasNext()?d.getNext():null),g?S.q(Bd(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),wf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ud(e).K(IDBKeyRange.bound(o,u,!0)).next(d=>{let g=Ji();for(const E of d){const b=this.Kn(Je.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=Ji();const d=Kw(t,r),g=Kw(t,Es.max());return Ud(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(E,b,S)=>{const N=this.Kn(Je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new OA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Kb(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}qn(e,t){return Kb(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function Bb(n,e){let t;if(e.document)t=Tw(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),o=Yl(e.noDocument.readTime);t=gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Je.fromSegments(e.unknownDocument.path),o=Yl(e.unknownDocument.version);t=gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new zn(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return gn.newInvalidDocument(e)}}function qb(n){return new rm(n)}class OA extends nm{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Ba(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Dn((u,d)=>Pt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const E=Kg(this.zn.wt,d);o=o.add(u.path.popLast()),r+=em(E)-g.size,t.push(this.zn.addEntry(e,u,E))}else if(r-=g.size,this.trackRemovals){const E=Kg(this.zn.wt,d.convertToNoDocument(bt.min()));t.push(this.zn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((u,d)=>{this.Hn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Kb(n){return Er(n,"remoteDocumentGlobal")}function Ud(n){return Er(n,"remoteDocumentsV14")}function Bd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kw(n,e){const t=e.documentKey.path.toArray();return[n,wf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zw(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Pt(t[u],r[u]),o)return o;return o=Pt(t.length,r.length),o||(o=Pt(t[t.length-2],r[r.length-2]),o||Pt(t[t.length-1],r[r.length-1]))}class Zb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Yw{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&gf(r.mutation,o,Qi.empty(),zn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const o=Do();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Od();return u.forEach((g,E)=>{d=d.insert(g,E.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Do();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=Ji();const d=Nr(),g=Nr();return t.forEach((E,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof Yo)?u=u.insert(b.key,b):void 0!==S&&(d.set(b.key,S.mutation.getFieldMask()),gf(S.mutation,b,S.mutation.getFieldMask(),zn.now()))}),this.recalculateAndSaveOverlays(e,u).next(E=>(E.forEach((b,S)=>d.set(b,S)),t.forEach((b,S)=>{var N;return g.set(b,new Zb(S,null!==(N=d.get(b))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Nr();let o=new Qn((d,g)=>d-g),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(E=>{const b=t.get(E);if(null===b)return;let S=r.get(E)||Qi.empty();S=g.applyToLocalView(b,S),r.set(E,S);const N=(o.get(g.batchId)||Bt()).add(E);o=o.insert(g.batchId,N)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const E=g.getNext(),b=E.key,S=E.value,N=vw();S.forEach(K=>{if(!u.has(K)){const Q=Pv(t.get(K),r.get(K));null!==Q&&N.set(K,Q),u=u.add(K)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ce.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ce.resolve(Do());let g=-1,E=u;return d.next(b=>ce.forEach(b,(S,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(S)?ce.resolve():this.getBaseDocument(e,S,N).next(K=>{E=E.insert(S,K)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,E,b,Bt())).next(S=>({batchId:g,changes:yw(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let o=Od();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Od();return this.indexManager.getCollectionParents(e,o).next(d=>ce.forEach(d,g=>{const E=(b=t,S=g.child(o),new Ua(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,E)=>{const b=E.getKey();null===o.get(b)&&(o=o.insert(b,gn.newInvalidDocument(b)))});let d=Od();return o.forEach((g,E)=>{const b=u.get(g);void 0!==b&&gf(b.mutation,E,Qi.empty(),zn.now()),Vg(t,E)&&(d=d.insert(g,E))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(gn.newInvalidDocument(t))}}class Qw{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ce.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:mr(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:r_(r.bundledQuery),readTime:mr(r.readTime)}),ce.resolve();var r}}class Jw{constructor(){this.overlays=new Qn(Je.comparator),this.Xn=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Do();return ce.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ie(e,t,u)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const o=Do(),u=t.length+1,d=new Je(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const E=g.getNext().value,b=E.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Qn((b,S)=>b-S);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=Do(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const g=Do(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((b,S)=>g.set(b,S)),!(g.size()>=o)););return ce.resolve(g)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new n_(t,r));let u=this.Xn.get(t);void 0===u&&(u=Bt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class im{constructor(){this.Zn=new Dn(Gr.ts),this.es=new Dn(Gr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Gr(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Gr(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Je(new Zt([])),r=new Gr(t,e),o=new Gr(t,e+1),u=[];return this.es.forEachInRange([r,o],d=>{this.rs(d),u.push(d.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Je(new Zt([])),r=new Gr(t,e),o=new Gr(t,e+1);let u=Bt();return this.es.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Gr(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Je.comparator(e.key,t.key)||Pt(e.ls,t.ls)}static ns(e,t){return Pt(e.ls,t.ls)||Je.comparator(e.key,t.key)}}class Yb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Dn(Gr.ts)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.fs;this.fs++;const d=new t_(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.ds=this.ds.add(new Gr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ce.resolve(d)}lookupMutationBatch(e,t){return ce.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),u=o<0?0:o;return ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gr(t,0),o=new Gr(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,o],d=>{const g=this._s(d.ls);u.push(g)}),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Pt);return t.forEach(o=>{const u=new Gr(o,0),d=new Gr(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,d],g=>{r=r.add(g.ls)})}),ce.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Je.isDocumentKey(u)||(u=u.child(""));const d=new Gr(new Je(u),0);let g=new Dn(Pt);return this.ds.forEachWhile(E=>{const b=E.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(E.ls)),!0)},d),ce.resolve(this.gs(g))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ce.forEach(t.mutations,o=>{const u=new Gr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Gr(t,0),o=this.ds.firstAfterOrEqual(r);return ce.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ce.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Xw{constructor(e){this.ps=e,this.docs=new Qn(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=Ji();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():gn.newInvalidDocument(o))}),ce.resolve(r)}getAllFromCollection(e,t,r){let o=Ji();const u=new Je(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:E}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||yv(mv(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,t,r,o){st()}Is(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new p_(this)}getSize(e){return ce.resolve(this.size)}}class p_ extends nm{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class PA{constructor(e){this.persistence=e,this.Ts=new Ba(t=>Fu(t),df),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Es=0,this.As=new im,this.targetCount=0,this.Rs=tc.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ce.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new tc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.vn(t),ce.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Ts.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Ts.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ce.waitFor(u).next(()=>o)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ce.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.As.containsKey(t))}}class g_{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Yi(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new PA(this),this.indexManager=new u_,this.remoteDocumentCache=new Xw(r=>this.referenceDelegate.Ss(r)),this.wt=new Vw(t),this.Ds=new Qw(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new Yb(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const o=new m_(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(u=>this.referenceDelegate.xs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ns(e,t){return ce.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class m_ extends WE{constructor(e){super(),this.currentSequenceNumber=e}}class sm{constructor(e){this.persistence=e,this.ks=new im,this.Os=null}static Ms(e){return new sm(e)}get Fs(){if(this.Os)return this.Os;throw st()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ce.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Fs,r=>{const o=Je.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ce.or([()=>ce.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Qb{constructor(e){this.wt=e}O(e,t,r,o){const u=new Ng("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ef,{unique:!0}),g.createObjectStore("documentMutations"),Jb(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=ce.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),Jb(e)),d=d.next(()=>function(g){const E=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,E){return E.store("mutations").K().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ef,{unique:!0});const S=E.store("mutations"),N=b.map(K=>S.put(K));return ce.waitFor(N)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Bs(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&o>=7&&(d=d.next(()=>this.Us(u))),r<8&&o>=8&&(d=d.next(()=>this.qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Ks(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const E=g.createObjectStore("documentOverlays",{keyPath:Lb});E.createIndex("collectionPathOverlayIndex",xA,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",MA,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const E=g.createObjectStore("remoteDocumentsV14",{keyPath:Nw});E.createIndex("documentKeyIndex",Ow),E.createIndex("collectionGroupIndex",AA)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.Qs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:SA}).createIndex("sequenceNumberIndex",kb,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:Fb}).createIndex("documentKeyIndex",Xv,{unique:!1})}(e))),d}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=em(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>ce.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",d).next(g=>ce.forEach(g,E=>{Dt(E.userId===u.userId);const b=ju(this.wt,E);return zw(e,u.userId,b).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((d,g)=>{const E=new Zt(d),b=[0,Xi(E)];u.push(t.get(b).next(S=>S?ce.resolve():t.put({targetId:0,path:Xi(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ce.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:kw});const r=t.store("collectionParents"),o=new Yg,u=d=>{if(o.add(d)){const g=d.lastSegment(),E=d.popLast();return r.put({collectionId:g,parent:Xi(E)})}};return t.store("remoteDocuments").J({H:!0},(d,g)=>{const E=new Zt(d);return u(E.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([d,g,E],b)=>{const S=ja(g);return u(S.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const u=If(o),d=Uw(this.wt,u);return t.put(d)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((u,d)=>{const g=t.store("remoteDocumentsV14"),E=(b=d,b.document?new Je(Zt.fromString(b.document.name).popFirst(5)):b.noDocument?Je.fromSegments(b.noDocument.path):b.unknownDocument?Je.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const S={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(S))}).next(()=>ce.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=qb(this.wt),u=new g_(sm.Ms,this.wt.ne);return r.K().next(d=>{const g=new Map;return d.forEach(E=>{var b;let S=null!==(b=g.get(E.userId))&&void 0!==b?b:Bt();ju(this.wt,E).keys().forEach(N=>S=S.add(N)),g.set(E.userId,S)}),ce.forEach(g,(E,b)=>{const S=new xr(b),N=Zg.se(this.wt,S),K=u.getIndexManager(S),Q=d_.se(S,this.wt,K,u.referenceDelegate);return new Yw(o,Q,N,K).recalculateAndSaveOverlaysForDocumentKeys(new e_(t,Yi.ot),E).next()})})}}function Jb(n){n.createObjectStore("targetDocuments",{keyPath:Pw}).createIndex("documentTargetsIndex",Pb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jv,{unique:!0}),n.createObjectStore("targetGlobal")}const eI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class y_{constructor(e,t,r,o,u,d,g,E,b,S,N=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=d,this.document=g,this.Ws=b,this.zs=S,this.Hs=N,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=K=>Promise.resolve(),!y_.V())throw new Pe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wb(this,o),this.ei=t+"main",this.wt=new Vw(E),this.ni=new Gs(this.ei,this.Hs,new Qb(this.wt)),this.Vs=new tm(this.referenceDelegate,this.wt),this.remoteDocumentCache=qb(this.wt),this.Ds=new Bw,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===S&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,eI);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Yi(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>v_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Nu(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Af(e).get("owner").next(t=>ce.resolve(this.di(t)))}_i(e){return v_(e).delete(this.clientId)}wi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Er(r,"clientMetadata");return o.K().next(u=>{const d=e.gi(u,18e5),g=u.filter(E=>-1===d.indexOf(E));return ce.forEach(g,E=>o.delete(E.clientId)).next(()=>g)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ce.resolve(!0):Af(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,eI);return!1}}return!(!this.networkEnabled||!this.inForeground)||v_(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new e_(t,Yi.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>v_(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return d_.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Gw(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Zg.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Hs)?RA:14===d?Lw:13===d?Fw:12===d?Ub:11===d?Vb:void st();var d;let g;return this.ni.runTransaction(e,o,u,E=>(g=new e_(E,this.Ps?this.Ps.next():Yi.ot),"readwrite-primary"===t?this.ai(g).next(b=>!!b||this.hi(g)).next(b=>{if(!b)throw _r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Pe(de.FAILED_PRECONDITION,Ll);return r(g)}).next(b=>this.fi(g).next(()=>b)):this.bi(g).next(()=>r(g)))).then(E=>(g.raiseOnCommittedEvent(),E))}bi(e){return Af(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(de.FAILED_PRECONDITION,eI)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Af(e).put("owner",t)}static V(){return Gs.V()}li(e){const t=Af(e);return t.get("owner").next(r=>this.di(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(_r(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Wt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){_r("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Af(n){return Er(n,"owner")}function v_(n){return Er(n,"clientMetadata")}function tI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nI{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=Bt(),o=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new nI(e,t.fromCache,r,o)}}class Xb{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(u=>u||this.xi(e,t,o,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){return ce.resolve(null)}xi(e,t,r,o){return function Db(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(bt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const d=this.ki(t,u);return this.Oi(t,d,r,o)?this.Ni(e,t):(xg()<=Sa.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lg(t)),this.Mi(e,d,t,zE(o,-1)))})}ki(e,t){let r=new Dn(aw(e));return t.forEach((o,u)=>{Vg(e,u)&&(r=r.add(u))}),r}Oi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ni(e,t){return xg()<=Sa.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Lg(t)),this.Di.getDocumentsMatchingQuery(e,t,Es.min())}Mi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class kA{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new Qn(Pt),this.Bi=new Ba(u=>Fu(u),df),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function rI(n,e,t,r){return new kA(n,e,t,r)}function eC(n,e){return iI.apply(this,arguments)}function iI(){return iI=(0,Ie.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let E=Bt();for(const b of o){d.push(b.batchId);for(const S of b.mutations)E=E.add(S.key)}for(const b of u){g.push(b.batchId);for(const S of b.mutations)E=E.add(S.key)}return t.localDocuments.getDocuments(r,E).next(b=>({Ki:b,removedBatchIds:d,addedBatchIds:g}))})})}),iI.apply(this,arguments)}function FA(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(d,g,E,b){const S=E.batch,N=S.keys();let K=ce.resolve();return N.forEach(Q=>{K=K.next(()=>b.getEntry(g,Q)).next(me=>{const je=E.docVersions.get(Q);Dt(null!==je),me.version.compareTo(je)<0&&(S.applyToRemoteDocument(me,E),me.isValidDocument()&&(me.setReadTime(E.commitVersion),b.addEntry(me)))})}),K.next(()=>d.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Bt();for(let E=0;E<d.mutationResults.length;++E)d.mutationResults[E].transformResults.length>0&&(g=g.add(d.batch.mutations[E].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function tC(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function i(n,e){const t=Xe(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const g=[];e.targetChanges.forEach((S,N)=>{const K=o.get(N);if(!K)return;g.push(t.Vs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Vs.addMatchingKeys(u,S.addedDocuments,N)));let Q=K.withSequenceNumber(u.currentSequenceNumber);var me,je,et;e.targetMismatches.has(N)?Q=Q.withResumeToken(Mr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):S.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(S.resumeToken,r)),o=o.insert(N,Q),je=Q,et=S,(0===(me=K).resumeToken.approximateByteSize()||je.snapshotVersion.toMicroseconds()-me.snapshotVersion.toMicroseconds()>=3e8||et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size>0)&&g.push(t.Vs.updateTargetData(u,Q))});let E=Ji(),b=Bt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(s(u,d,e.documentUpdates).next(S=>{E=S.Gi,b=S.Qi})),!r.isEqual(bt.min())){const S=t.Vs.getLastRemoteSnapshotVersion(u).next(N=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return ce.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,E,b)).next(()=>E)}).then(u=>(t.$i=o,u))}function s(n,e,t){let r=Bt(),o=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Ji();return t.forEach((g,E)=>{const b=u.get(g);E.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),E.isNoDocument()&&E.version.isEqual(bt.min())?(e.removeEntry(g,E.readTime),d=d.insert(g,E)):!b.isValidDocument()||E.version.compareTo(b.version)>0||0===E.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(E),d=d.insert(g,E)):Le("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",E.version)}),{Gi:d,Qi:o}})}function a(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(u=>u?(o=u,ce.resolve(o)):t.Vs.allocateTargetId(r).next(d=>(o=new Qo(e,d,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function c(n,e,t){return h.apply(this,arguments)}function h(){return h=(0,Ie.Z)(function*(n,e,t){const r=Xe(n),o=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Nu(d))throw d;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),h.apply(this,arguments)}function y(n,e,t){const r=Xe(n);let o=bt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,E,b){const S=Xe(g),N=S.Bi.get(b);return void 0!==N?ce.resolve(S.$i.get(N)):S.Vs.getTargetData(E,b)}(r,d,Ei(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(d,g.targetId).next(E=>{u=E})}).next(()=>r.Fi.getDocumentsMatchingQuery(d,e,t?o:bt.min(),t?u:Bt())).next(g=>(T(r,Ov(e),g),{documents:g,ji:u})))}function _(n,e){const t=Xe(n),r=Xe(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(d=>d?d.target:null))}function I(n,e){const t=Xe(n),r=t.Li.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,zE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(T(t,e,o),o))}function T(n,e,t){let r=bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function k(){return k=(0,Ie.Z)(function*(n,e,t,r){const o=Xe(n);let u=Bt(),d=Ji();for(const b of t){const S=e.Wi(b.metadata.name);b.document&&(u=u.add(S));const N=e.zi(b);N.setReadTime(e.Hi(b.metadata.readTime)),d=d.insert(S,N)}const g=o.Ui.newChangeBuffer({trackRemovals:!0}),E=yield l(o,(b=r,Ei(Ad(Zt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>s(b,g,d).next(S=>(g.apply(b),S)).next(S=>o.Vs.removeMatchingKeysForTargetId(b,E.targetId).next(()=>o.Vs.addMatchingKeys(b,u,E.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.Gi,S.Qi)).next(()=>S.Gi)))}),k.apply(this,arguments)}function G(n,e){return X.apply(this,arguments)}function X(){return X=(0,Ie.Z)(function*(n,e,t=Bt()){const r=yield l(n,Ei(r_(e.bundledQuery))),o=Xe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=mr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ds.saveNamedQuery(u,e);const g=r.withResumeToken(Mr.EMPTY_BYTE_STRING,d);return o.$i=o.$i.insert(g.targetId,g),o.Vs.updateTargetData(u,g).next(()=>o.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(u,e))})}),X.apply(this,arguments)}function Ee(n,e){return`firestore_clients_${n}_${e}`}function Ve(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ze(n,e){return`firestore_targets_${n}_${e}`}class nt{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Pe(o.error.code,o.error.message))),d?new nt(e,t,o.state,u):(_r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Se{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new Se(e,r.state,o):(_r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ft{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Uu();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=kg(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new ft(e,u):(_r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zt{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zt(t.clientId,t.onlineState):(_r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ln{constructor(){this.activeTargetIds=Uu()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fi{constructor(e,t,r,o,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Qn(Pt),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Ee(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new ln),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const u=e.getItem(Ee(e.persistenceKey,o));if(u){const d=ft.Ji(o,u);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ze(this.persistenceKey,e));if(r){const o=Se.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ze(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let d=Yi.ot;if(null!=u)try{const g=JSON.parse(u);Dt("number"==typeof g),d=g}catch(g){_r("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==Yi.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new nt(this.currentUser,e,t,r),u=Ve(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=Ve(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=Ze(this.persistenceKey,e),u=new Se(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return ft.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return nt.Ji(new xr(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Se.Ji(o,t)}wr(e){return zt.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),d=[],g=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||g.push(E)}),this.syncEngine.Mr(d,g).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Uu();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Gu{constructor(){this.Fr=new ln,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new ln,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class __{Br(e){}shutdown(){}}class om{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const E_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class w_{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class I_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const d=this.oo(e,t);Le("RestConnection","Sending: ",d,r);const g={};return this.uo(g,o,u),this.co(e,d,g,r).then(E=>(Le("RestConnection","Received: ",E),E),E=>{throw Pa("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}ao(e,t,r,o,u,d){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+kl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${E_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const g=new ib;g.listenOnce(Ag.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case hv.NO_ERROR:const b=g.getResponseJson();Le("Connection","XHR received:",JSON.stringify(b)),u(b);break;case hv.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),d(new Pe(de.DEADLINE_EXCEEDED,"Request time out"));break;case hv.HTTP_ERROR:const S=g.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const K=function(Q){const me=Q.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(me)>=0?me:de.UNKNOWN}(N.status);d(new Pe(K,N.message))}else d(new Pe(de.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Pe(de.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);g.send(t,"POST",E,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=rb(),d=Tg(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new yA({})),this.uo(g.initMessageHeaders,t,r),(0,Wt.uI)()||(0,Wt.b$)()||(0,Wt.d)()||(0,Wt.w1)()||(0,Wt.Mn)()||(0,Wt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Le("Connection","Creating WebChannel: "+E,g);const b=u.createWebChannel(E,g);let S=!1,N=!1;const K=new w_({jr:me=>{N?Le("Connection","Not sending because WebChannel is closed:",me):(S||(Le("Connection","Opening WebChannel transport."),b.open(),S=!0),Le("Connection","WebChannel sending:",me),b.send(me))},Wr:()=>b.close()}),Q=(me,je,et)=>{me.listen(je,kt=>{try{et(kt)}catch(Gt){setTimeout(()=>{throw Gt},0)}})};return Q(b,Xh.EventType.OPEN,()=>{N||Le("Connection","WebChannel transport opened.")}),Q(b,Xh.EventType.CLOSE,()=>{N||(N=!0,Le("Connection","WebChannel transport closed"),K.eo())}),Q(b,Xh.EventType.ERROR,me=>{N||(N=!0,Pa("Connection","WebChannel transport errored:",me),K.eo(new Pe(de.UNAVAILABLE,"The operation could not be completed")))}),Q(b,Xh.EventType.MESSAGE,me=>{var je;if(!N){const et=me.data[0];Dt(!!et);const kt=et,Gt=kt.error||(null===(je=kt[0])||void 0===je?void 0:je.error);if(Gt){Le("Connection","WebChannel received error:",Gt);const tn=Gt.status;let jt=function(vn){const ns=gr[vn];if(void 0!==ns)return gw(ns)}(tn),Xt=Gt.message;void 0===jt&&(jt=de.INTERNAL,Xt="Unknown error status: "+tn+" with message "+Gt.message),N=!0,K.eo(new Pe(jt,Xt)),b.close()}else Le("Connection","WebChannel received:",et),K.no(et)}}),Q(d,Sg.STAT_EVENT,me=>{me.stat===Gn.PROXY?Le("Connection","Detected buffering proxy"):me.stat===Gn.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{K.Zr()},0),K}}function am(){return"undefined"!=typeof window?window:null}function jd(){return"undefined"!=typeof document?document:null}function nc(n){return new IA(n,!0)}class Sf{constructor(e,t,r=1e3,o=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class LA{constructor(e,t,r,o,u,d,g,E){this.js=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Sf(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ie.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Pe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,Ie.Z)(function*(){e.state=0,e.start()}))}qo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qx extends LA{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Sw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:st(),o=e.targetChange.targetIds||[],u=function(E,b){return E.dt?(Dt(void 0===b||"string"==typeof b),Mr.fromBase64String(b||"")):(Dt(void 0===b||b instanceof Uint8Array),Mr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(E){const b=void 0===E.code?de.UNKNOWN:gw(E.code);return new Pe(b,E.message||"")}(d);t=new _w(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=zs(n,r.document.name),u=mr(r.document.updateTime),d=new Rr({mapValue:{fields:r.document.fields}}),g=gn.newFoundDocument(o,u,d);t=new zg(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=zs(n,r.document),u=r.readTime?mr(r.readTime):bt.min(),d=gn.newNoDocument(o,u);t=new zg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=zs(n,r.document);t=new zg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new Sb(r.count||0);t=new Vv(r.targetId,u)}}var E;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?mr(u.readTime):bt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=yf(this.wt),t.addTarget=function(o,u){let d;const g=u.target;return d=bd(g)?{documents:Mw(o,g)}:{query:Wv(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=ww(o,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(d.readTime=kd(o,u.snapshotVersion.toTimestamp())),d}(this.wt,e);const r=function Rw(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=yf(this.wt),t.removeTarget=e,this.Mo(t)}}class Kx extends LA{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function xw(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let u=mr(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=mr(o)),new Tb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.Jo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=yf(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vf(this.wt,r))};this.Mo(t)}}class Zx extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(de.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ao(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Pe(de.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class Yx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(_r(t),this.su=!1):Le("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Qx{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(g=>{r.enqueueAndForget((0,Ie.Z)(function*(){var E;$d(d)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,Ie.Z)(function*(b){const S=Xe(b);S.lu.add(4),yield um(S),S._u.set("Unknown"),S.lu.delete(4),yield D_(S)}),function(b){return E.apply(this,arguments)})(d))}))}),this._u=new Yx(r,o)}}function D_(n){return nC.apply(this,arguments)}function nC(){return nC=(0,Ie.Z)(function*(n){if($d(n))for(const e of n.fu)yield e(!0)}),nC.apply(this,arguments)}function um(n){return rC.apply(this,arguments)}function rC(){return rC=(0,Ie.Z)(function*(n){for(const e of n.fu)yield e(!1)}),rC.apply(this,arguments)}function sI(n,e){const t=Xe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),oC(t)?sC(t):cm(t).Co()&&iC(t,e))}function b_(n,e){const t=Xe(n),r=cm(t);t.hu.delete(e),r.Co()&&VA(t,e),0===t.hu.size&&(r.Co()?r.ko():$d(t)&&t._u.set("Unknown"))}function iC(n,e){n.wu.Nt(e.targetId),cm(n).Qo(e)}function VA(n,e){n.wu.Nt(e),cm(n).jo(e)}function sC(n){n.wu=new Uv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),cm(n).start(),n._u.iu()}function oC(n){return $d(n)&&!cm(n).Do()&&n.hu.size>0}function $d(n){return 0===Xe(n).lu.size}function UA(n){n.wu=void 0}function Jx(n){return aC.apply(this,arguments)}function aC(){return aC=(0,Ie.Z)(function*(n){n.hu.forEach((e,t)=>{iC(n,e)})}),aC.apply(this,arguments)}function Xx(n,e){return uC.apply(this,arguments)}function uC(){return uC=(0,Ie.Z)(function*(n,e){UA(n),oC(n)?(n._u.uu(e),sC(n)):n._u.set("Unknown")}),uC.apply(this,arguments)}function eM(n,e,t){return lC.apply(this,arguments)}function lC(){return lC=(0,Ie.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof _w&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.hu.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.hu.delete(g),o.wu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield oI(n,r)}else if(e instanceof zg?n.wu.Ut(e):e instanceof Vv?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(bt.min()))try{const r=yield tC(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.wu.Yt(u);return d.targetChanges.forEach((g,E)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.hu.get(E);b&&o.hu.set(E,b.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const E=o.hu.get(g);if(!E)return;o.hu.set(g,E.withResumeToken(Mr.EMPTY_BYTE_STRING,E.snapshotVersion)),VA(o,g);const b=new Qo(E.target,g,1,E.sequenceNumber);iC(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield oI(n,r)}var r}),lC.apply(this,arguments)}function oI(n,e,t){return cC.apply(this,arguments)}function cC(){return cC=(0,Ie.Z)(function*(n,e,t){if(!Nu(e))throw e;n.lu.add(1),yield um(n),n._u.set("Offline"),t||(t=()=>tC(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield D_(n)}))}),cC.apply(this,arguments)}function BA(n,e){return e().catch(t=>oI(n,t,e))}function lm(n){return dC.apply(this,arguments)}function dC(){return dC=(0,Ie.Z)(function*(n){const e=Xe(n),t=Hd(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;tM(e);)try{const o=yield a(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,nM(e,o)}catch(o){yield oI(e,o)}jA(e)&&$A(e)}),dC.apply(this,arguments)}function tM(n){return $d(n)&&n.au.length<10}function nM(n,e){n.au.push(e);const t=Hd(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function jA(n){return $d(n)&&!Hd(n).Do()&&n.au.length>0}function $A(n){Hd(n).start()}function rM(n){return hC.apply(this,arguments)}function hC(){return hC=(0,Ie.Z)(function*(n){Hd(n).Xo()}),hC.apply(this,arguments)}function iM(n){return fC.apply(this,arguments)}function fC(){return fC=(0,Ie.Z)(function*(n){const e=Hd(n);for(const t of n.au)e.Ho(t.mutations)}),fC.apply(this,arguments)}function sM(n,e,t){return pC.apply(this,arguments)}function pC(){return pC=(0,Ie.Z)(function*(n,e,t){const r=n.au.shift(),o=ws.from(r,e,t);yield BA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield lm(n)}),pC.apply(this,arguments)}function oM(n,e){return gC.apply(this,arguments)}function gC(){return gC=(0,Ie.Z)(function*(n,e){var t;e&&Hd(n).zo&&(yield(t=(0,Ie.Z)(function*(r,o){if(Fv(u=o.code)&&u!==de.ABORTED){const d=r.au.shift();Hd(r).No(),yield BA(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield lm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),jA(n)&&$A(n)}),gC.apply(this,arguments)}function HA(n,e){return mC.apply(this,arguments)}function mC(){return mC=(0,Ie.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=$d(t);t.lu.add(3),yield um(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield D_(t)}),mC.apply(this,arguments)}function yC(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,Ie.Z)(function*(n,e){const t=Xe(n);e?(t.lu.delete(2),yield D_(t)):e||(t.lu.add(2),yield um(t),t._u.set("Unknown"))}),vC.apply(this,arguments)}function cm(n){return n.mu||(n.mu=function(e,t,r){const o=Xe(e);return o.tu(),new qx(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:Jx.bind(null,n),Jr:Xx.bind(null,n),Go:eM.bind(null,n)}),n.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.mu.No(),oC(n)?sC(n):n._u.set("Unknown")):(yield n.mu.stop(),UA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Hd(n){return n.gu||(n.gu=function(e,t,r){const o=Xe(e);return o.tu(),new Kx(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:rM.bind(null,n),Jr:oM.bind(null,n),Yo:iM.bind(null,n),Jo:sM.bind(null,n)}),n.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.gu.No(),yield lm(n)):(yield n.gu.stop(),n.au.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class _C{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new _C(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dm(n,e){if(_r("AsyncQueue",`${e}: ${n}`),Nu(n))return new Pe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class hm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=Od(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new hm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class GA{constructor(){this.yu=new Qn(Je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):st():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class fm{constructor(e,t,r,o,u,d,g,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new fm(e,t,hm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class aM{constructor(){this.Iu=void 0,this.listeners=[]}}class uM{constructor(){this.queries=new Ba(e=>Nv(e),xd),this.onlineState="Unknown",this.Tu=new Set}}function EC(n,e){return wC.apply(this,arguments)}function wC(){return wC=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new aM),o)try{u.Iu=yield t.onListen(r)}catch(d){const g=dm(d,`Initialization of query '${Lg(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&bC(t)}),wC.apply(this,arguments)}function IC(n,e){return DC.apply(this,arguments)}function DC(){return DC=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),DC.apply(this,arguments)}function lM(n,e){const t=Xe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Au(o)&&(r=!0);d.Iu=o}}r&&bC(t)}function cM(n,e,t){const r=Xe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function bC(n){n.Tu.forEach(e=>{e.next()})}class CC{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new fm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=fm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class dM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class zA{constructor(e){this.wt=e}Wi(e){return zs(this.wt,e)}zi(e){return e.metadata.exists?Tw(this.wt,e.document,!1):gn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return mr(e)}}class hM{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=WA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new zA(this.wt);for(const o of e)if(o.metadata.queries){const u=r.Wi(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||Bt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function x(n,e,t,r){return k.apply(this,arguments)}(e.localStore,new zA(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield G(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function WA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qA{constructor(e){this.key=e}}class KA{constructor(e){this.key=e}}class ZA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Bt(),this.mutatedKeys=Bt(),this.Lu=aw(e),this.Uu=new hm(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new GA,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const K=o.get(S),Q=Vg(this.query,N)?N:null,me=!!K&&this.mutatedKeys.has(K.key),je=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let et=!1;K&&Q?K.data.isEqual(Q.data)?me!==je&&(r.track({type:3,doc:Q}),et=!0):this.Qu(K,Q)||(r.track({type:2,doc:Q}),et=!0,(E&&this.Lu(Q,E)>0||b&&this.Lu(Q,b)<0)&&(g=!0)):!K&&Q?(r.track({type:0,doc:Q}),et=!0):K&&!Q&&(r.track({type:1,doc:K}),et=!0,(E||b)&&(g=!0)),et&&(Q?(d=d.add(Q),u=je?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:d,Gu:r,Oi:g,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((b,S)=>function(N,K){const Q=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return Q(N)-Q(K)}(b.type,S.type)||this.Lu(b.doc,S.doc)),this.ju(r);const d=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,E=g!==this.$u;return this.$u=g,0!==u.length||E?{snapshot:new fm(this.query,e.Uu,o,u,e.mutatedKeys,0===g,E,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new GA,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Bt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new KA(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new qA(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Bt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return fm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class fM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pM{constructor(e){this.key=e,this.Xu=!1}}class gM{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Zu={},this.tc=new Ba(g=>Nv(g),xd),this.ec=new Map,this.nc=new Set,this.sc=new Qn(Je.comparator),this.ic=new Map,this.rc=new im,this.oc={},this.uc=new Map,this.cc=tc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function mM(n,e){return TC.apply(this,arguments)}function TC(){return TC=(0,Ie.Z)(function*(n,e){const t=ZC(n);let r,o;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const d=yield l(t.localStore,Ei(e));t.isPrimaryClient&&sI(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield AC(t,e,r,"current"===g)}return o}),TC.apply(this,arguments)}function AC(n,e,t,r){return SC.apply(this,arguments)}function SC(){return SC=(0,Ie.Z)(function*(n,e,t,r){n.hc=(S,N,K)=>{return(Q=(0,Ie.Z)(function*(me,je,et,kt){let Gt=je.view.Ku(et);Gt.Oi&&(Gt=yield y(me.localStore,je.query,!1).then(({documents:Xt})=>je.view.Ku(Xt,Gt)));const tn=kt&&kt.targetChanges.get(je.targetId),jt=je.view.applyChanges(Gt,me.isPrimaryClient,tn);return VC(me,je.targetId,jt.zu),jt.snapshot}),function(me,je,et,kt){return Q.apply(this,arguments)})(n,S,N,K);var Q};const o=yield y(n.localStore,e,!0),u=new ZA(e,o.ji),d=u.Ku(o.documents),g=ql.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,g);VC(n,t,E.zu);const b=new fM(e,t,u);return n.tc.set(e,b),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),E.snapshot}),SC.apply(this,arguments)}function yM(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(u=>!xd(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield c(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),b_(t.remoteStore,r.targetId),pm(t,r.targetId)}).catch(ka))):(pm(t,r.targetId),yield c(t.localStore,r.targetId,!0))}),xC.apply(this,arguments)}function MC(){return MC=(0,Ie.Z)(function*(n,e,t){const r=YC(n);try{const o=yield function(u,d){const g=Xe(u),E=zn.now(),b=d.reduce((K,Q)=>K.add(Q.key),Bt());let S,N;return g.persistence.runTransaction("Locally write mutations","readwrite",K=>{let Q=Ji(),me=Bt();return g.Ui.getEntries(K,b).next(je=>{Q=je,Q.forEach((et,kt)=>{kt.isValidDocument()||(me=me.add(et))})}).next(()=>g.localDocuments.getOverlayedDocuments(K,Q)).next(je=>{S=je;const et=[];for(const kt of d){const Gt=EA(kt,S.get(kt.key).overlayedDocument);null!=Gt&&et.push(new Yo(kt.key,Gt,cf(Gt.value.mapValue),Bn.exists(!0)))}return g.mutationQueue.addMutationBatch(K,E,et,d)}).next(je=>{N=je;const et=je.applyToLocalDocumentSet(S,me);return g.documentOverlayCache.saveOverlays(K,je.batchId,et)})}).then(()=>({batchId:N.batchId,changes:yw(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let E=u.oc[u.currentUser.toKey()];E||(E=new Qn(Pt)),E=E.insert(d,g),u.oc[u.currentUser.toKey()]=E}(r,o.batchId,t),yield rc(r,o.changes),yield lm(r.remoteStore)}catch(o){const u=dm(o,"Failed to persist write");t.reject(u)}}),MC.apply(this,arguments)}function YA(n,e){return RC.apply(this,arguments)}function RC(){return RC=(0,Ie.Z)(function*(n,e){const t=Xe(n);try{const r=yield i(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ic.get(u);d&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Xu=!0:o.modifiedDocuments.size>0?Dt(d.Xu):o.removedDocuments.size>0&&(Dt(d.Xu),d.Xu=!1))}),yield rc(t,r,e)}catch(r){yield ka(r)}}),RC.apply(this,arguments)}function QA(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((u,d)=>{const g=d.view.Eu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=Xe(u);g.onlineState=d;let E=!1;g.queries.forEach((b,S)=>{for(const N of S.listeners)N.Eu(d)&&(E=!0)}),E&&bC(g)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _M(n,e,t){return NC.apply(this,arguments)}function NC(){return NC=(0,Ie.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),u=o&&o.key;if(u){let d=new Qn(Je.comparator);d=d.insert(u,gn.newNoDocument(u,bt.min()));const g=Bt().add(u),E=new mf(bt.min(),new Map,new Dn(Pt),d,g);yield YA(r,E),r.sc=r.sc.remove(u),r.ic.delete(e),UC(r)}else yield c(r.localStore,e,!1).then(()=>pm(r,e,t)).catch(ka)}),NC.apply(this,arguments)}function EM(n,e){return OC.apply(this,arguments)}function OC(){return OC=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const o=yield FA(t.localStore,e);LC(t,r,null),FC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rc(t,o)}catch(o){yield ka(o)}}),OC.apply(this,arguments)}function wM(n,e,t){return PC.apply(this,arguments)}function PC(){return PC=(0,Ie.Z)(function*(n,e,t){const r=Xe(n);try{const o=yield function(u,d){const g=Xe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let b;return g.mutationQueue.lookupMutationBatch(E,d).next(S=>(Dt(null!==S),b=S.keys(),g.mutationQueue.removeMutationBatch(E,S))).next(()=>g.mutationQueue.performConsistencyCheck(E)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(E,b,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,b)).next(()=>g.localDocuments.getDocuments(E,b))})}(r.localStore,e);LC(r,e,t),FC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rc(r,o)}catch(o){yield ka(o)}}),PC.apply(this,arguments)}function kC(){return kC=(0,Ie.Z)(function*(n,e){const t=Xe(n);$d(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Xe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=dm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),kC.apply(this,arguments)}function FC(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function LC(n,e,t){const r=Xe(n);let o=r.oc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function pm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||JA(n,r)})}function JA(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(b_(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),UC(n))}function VC(n,e,t){for(const r of t)r instanceof qA?(n.rc.addReference(r.key,e),DM(n,r)):r instanceof KA?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||JA(n,r.key)):st()}function DM(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.nc.add(r),UC(n))}function UC(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Je(Zt.fromString(e)),r=n.cc.next();n.ic.set(r,new pM(t)),n.sc=n.sc.insert(t,r),sI(n.remoteStore,new Qo(Ei(Ad(t.path)),r,2,Yi.ot))}}function rc(n,e,t){return BC.apply(this,arguments)}function BC(){return BC=(0,Ie.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[],d=[];var g;r.tc.isEmpty()||(r.tc.forEach((g,E)=>{d.push(r.hc(E,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,b.fromCache?"not-current":"current"),o.push(b);const S=nI.Vi(E.targetId,b);u.push(S)}}))}),yield Promise.all(d),r.Zu.Go(o),yield(g=(0,Ie.Z)(function*(E,b){const S=Xe(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ce.forEach(b,K=>ce.forEach(K.Pi,Q=>S.persistence.referenceDelegate.addReference(N,K.targetId,Q)).next(()=>ce.forEach(K.vi,Q=>S.persistence.referenceDelegate.removeReference(N,K.targetId,Q)))))}catch(N){if(!Nu(N))throw N;Le("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const K=N.targetId;if(!N.fromCache){const Q=S.$i.get(K),je=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);S.$i=S.$i.insert(K,je)}}}),function(E,b){return g.apply(this,arguments)})(r.localStore,u))}),BC.apply(this,arguments)}function bM(n,e){return jC.apply(this,arguments)}function jC(){return jC=(0,Ie.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield eC(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(d=>{d.forEach(g=>{g.reject(new Pe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rc(t,r.Ki)}var o}),jC.apply(this,arguments)}function CM(n,e){const t=Xe(n),r=t.ic.get(e);if(r&&r.Xu)return Bt().add(r.key);{let o=Bt();const u=t.ec.get(e);if(!u)return o;for(const d of u){const g=t.tc.get(d);o=o.unionWith(g.view.qu)}return o}}function TM(n,e){return $C.apply(this,arguments)}function $C(){return $C=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=yield y(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&VC(t,e.targetId,o.zu),o}),$C.apply(this,arguments)}function AM(n,e){return HC.apply(this,arguments)}function HC(){return HC=(0,Ie.Z)(function*(n,e){const t=Xe(n);return I(t.localStore,e).then(r=>rc(t,r))}),HC.apply(this,arguments)}function SM(n,e,t,r){return GC.apply(this,arguments)}function GC(){return GC=(0,Ie.Z)(function*(n,e,t,r){const o=Xe(n),u=yield function(d,g){const E=Xe(d),b=Xe(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.yn(S,g).next(N=>N?E.localDocuments.getDocuments(S,N):ce.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield lm(o.remoteStore):"acknowledged"===t||"rejected"===t?(LC(o,e,r||null),FC(o,e),g=e,Xe(Xe(o.localStore).mutationQueue).In(g)):st(),yield rc(o,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),GC.apply(this,arguments)}function zC(){return zC=(0,Ie.Z)(function*(n,e){const t=Xe(n);if(ZC(t),YC(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield XA(t,r.toArray());t.ac=!0,yield yC(t.remoteStore,!0);for(const u of o)sI(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(pm(t,d),c(t.localStore,d,!0))),b_(t.remoteStore,d)}),yield o,yield XA(t,r),function(u){const d=Xe(u);d.ic.forEach((g,E)=>{b_(d.remoteStore,E)}),d.rc.cs(),d.ic=new Map,d.sc=new Qn(Je.comparator)}(t),t.ac=!1,yield yC(t.remoteStore,!1)}}),zC.apply(this,arguments)}function XA(n,e,t){return WC.apply(this,arguments)}function WC(){return WC=(0,Ie.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[];for(const d of e){let g;const E=r.ec.get(d);if(E&&0!==E.length){g=yield l(r.localStore,Ei(E[0]));for(const b of E){const S=r.tc.get(b),N=yield TM(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield _(r.localStore,d);g=yield l(r.localStore,b),yield AC(r,eS(b),d,!1)}o.push(g)}return r.Zu.Go(u),o}),WC.apply(this,arguments)}function eS(n){return ow(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function MM(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).Ri()}function RM(n,e,t,r){return qC.apply(this,arguments)}function qC(){return qC=(0,Ie.Z)(function*(n,e,t,r){const o=Xe(n);if(o.ac)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=o.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield I(o.localStore,Ov(u[0])),g=mf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield rc(o,d,g);break}case"rejected":yield c(o.localStore,e,!0),pm(o,e,r);break;default:st()}}),qC.apply(this,arguments)}function NM(n,e,t){return KC.apply(this,arguments)}function KC(){return KC=(0,Ie.Z)(function*(n,e,t){const r=ZC(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Le("SyncEngine","Adding an already active target "+o);continue}const u=yield _(r.localStore,o),d=yield l(r.localStore,u);yield AC(r,eS(u),d.targetId,!1),sI(r.remoteStore,d)}for(const o of t)r.ec.has(o)&&(yield c(r.localStore,o,!1).then(()=>{b_(r.remoteStore,o),pm(r,o)}).catch(ka))}}),KC.apply(this,arguments)}function ZC(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_M.bind(null,e),e.Zu.Go=lM.bind(null,e.eventManager),e.Zu.lc=cM.bind(null,e.eventManager),e}function YC(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wM.bind(null,e),e}class tS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.wt=nc(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return rI(this.persistence,new Xb,e.initialUser,this.wt)}_c(e){return new g_(sm.Ms,this.wt)}dc(e){return new Gu}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nS extends tS{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield YC(r.yc.syncEngine),yield lm(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return rI(this.persistence,new Xb,e.initialUser,this.wt)}mc(e,t){return new h_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new Ev(t,this.persistence);return new hb(e.asyncQueue,r)}_c(e){const t=tI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new y_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,am(),jd(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Gu}}class PM extends nS{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof Fi&&(r.sharedClientState.syncEngine={kr:SM.bind(null,o),Or:RM.bind(null,o),Mr:NM.bind(null,o),Ri:MM.bind(null,o),Nr:AM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,Ie.Z)(function*(d){yield function xM(n,e){return zC.apply(this,arguments)}(r.yc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}dc(e){const t=am();if(!Fi.V(t))throw new Pe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=tI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fi(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class QC{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>QA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=bM.bind(null,r.syncEngine),yield yC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new uM}createDatastore(e){const t=nc(e.databaseInfo.databaseId),r=new I_(e.databaseInfo);return new Zx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>QA(this.syncEngine,g,0),d=om.V()?new om:new __,new Qx(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,E,b){const S=new gM(r,o,u,d,g,E);return b&&(S.ac=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Xe(t);Le("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield um(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rS(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class aI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class kM{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Hr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new dM(JSON.parse(u),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class FM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,d){const g=Xe(u),E=yf(g.wt)+"/documents",b={documents:d.map(Q=>Kl(g.wt,Q))},S=yield g.ao("BatchGetDocuments",E,b,d.length),N=new Map;S.forEach(Q=>{const me=function Aw(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=zs(t,r.found.name),u=mr(r.found.updateTime),d=new Rr({mapValue:{fields:r.found.fields}});return gn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=zs(t,r.missing),u=mr(r.readTime);return gn.newNoDocument(o,u)}(n,e):st()}(g.wt,Q);N.set(me.key.toString(),me)});const K=[];return d.forEach(Q=>{const me=N.get(Q.toString());Dt(!!me),K.push(me)}),K}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Je.fromPath(o);e.mutations.push(new kv(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const d=Xe(o),g=yf(d.wt)+"/documents",E={writes:u.map(b=>vf(d.wt,b))};yield d.ro("Commit",g,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Pe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class LM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Dc=r.maxAttempts,this.So=new Sf(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ie.Z)(function*(){const t=new FM(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Nc(u)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!rf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Fv(t)}return!1}}class VM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=xr.UNAUTHENTICATED,this.clientId=GE.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ie.Z)(function*(g){Le("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Le("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=dm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function iS(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield eC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),JC.apply(this,arguments)}function sS(n,e){return XC.apply(this,arguments)}function XC(){return XC=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eT(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>HA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>HA(e.remoteStore,u)),n.onlineComponents=e}),XC.apply(this,arguments)}function eT(n){return tT.apply(this,arguments)}function tT(){return tT=(0,Ie.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield iS(n,new tS)),n.offlineComponents}),tT.apply(this,arguments)}function uI(n){return nT.apply(this,arguments)}function nT(){return nT=(0,Ie.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield sS(n,new QC)),n.onlineComponents}),nT.apply(this,arguments)}function oS(n){return eT(n).then(e=>e.persistence)}function rT(n){return eT(n).then(e=>e.localStore)}function aS(n){return uI(n).then(e=>e.remoteStore)}function iT(n){return uI(n).then(e=>e.syncEngine)}function gm(n){return sT.apply(this,arguments)}function sT(){return sT=(0,Ie.Z)(function*(n){const e=yield uI(n),t=e.eventManager;return t.onListen=mM.bind(null,e.syncEngine),t.onUnlisten=yM.bind(null,e.syncEngine),t}),sT.apply(this,arguments)}function uS(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,g,E){const b=new aI({next:N=>{u.enqueueAndForget(()=>IC(o,S));const K=N.docs.has(d);!K&&N.fromCache?E.reject(new Pe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):K&&N.fromCache&&g&&"server"===g.source?E.reject(new Pe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(N)},error:N=>E.reject(N)}),S=new CC(Ad(d.path),b,{includeMetadataChanges:!0,Du:!0});return EC(o,S)}(yield gm(n),n.asyncQueue,e,t,r)})),r.promise}function lS(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,g,E){const b=new aI({next:N=>{u.enqueueAndForget(()=>IC(o,S)),N.fromCache&&"server"===g.source?E.reject(new Pe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(N)},error:N=>E.reject(N)}),S=new CC(d,b,{includeMetadataChanges:!0,Du:!0});return EC(o,S)}(yield gm(n),n.asyncQueue,e,t,r)})),r.promise}const cS=new Map;function oT(n,e,t){if(!t)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dS(n,e,t,r){if(!0===e&&!0===r)throw new Pe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hS(n){if(!Je.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fS(n){if(Je.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lI(n);throw new Pe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pS(n,e){if(e<=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,dS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class C_{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gS({}),this._settingsFrozen=!1,e instanceof Eo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ef;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new jE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cS.get(e);t&&(Le("ComponentProvider","Removing Datastore"),cS.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class zu extends ts{constructor(e,t,r){super(e,t,Ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Je(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function mS(n,e,...t){if(n=(0,Wt.m9)(n),oT("collection","path",e),n instanceof C_){const r=Zt.fromString(e,...t);return fS(r),new zu(n,null,r)}{if(!(n instanceof Wn||n instanceof zu))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return fS(r),new zu(n.firestore,null,r)}}function cI(n,e,...t){if(n=(0,Wt.m9)(n),1===arguments.length&&(e=GE.I()),oT("doc","path",e),n instanceof C_){const r=Zt.fromString(e,...t);return hS(r),new Wn(n,null,new Je(r))}{if(!(n instanceof Wn||n instanceof zu))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return hS(r),new Wn(n.firestore,n instanceof zu?n.converter:null,new Je(r))}}function yS(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),(n instanceof Wn||n instanceof zu)&&(e instanceof Wn||e instanceof zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vS(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&xd(n._query,e._query)&&n.converter===e.converter}class ZM{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Sf(this,"async_queue_retry"),this.Kc=()=>{const t=jd();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=jd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=jd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Hr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Nu(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,_r("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=_C.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(o),o}Gc(){this.Bc&&st()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function aT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class YM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends C_{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ZM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||_S(this),this._firestoreClient.terminate()}}function JM(n=(0,Go.getApp)()){return(0,Go._getProvider)(n,"firestore").getImmediate()}function zr(n){return n._firestoreClient||_S(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _S(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JE(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new VM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ES(n,e,t){const r=new Hr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield iS(n,t),yield sS(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===de.FAILED_PRECONDITION||d.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function wS(n){if(n._initialized||n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(Mr.fromBase64String(e))}catch(t){throw new Pe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(Mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xf{constructor(e){this._methodName=e}}class dI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const aR=/^__.*__$/;class uR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vu(e,this.data,t,this.fieldTransforms)}}class IS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class hI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new hI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return gI(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(DS(this.Zc)&&aR.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class lR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||nc(e)}aa(e,t,r,o=!1){return new hI({Zc:e,methodName:t,ca:r,path:pr.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Mf(n){const e=n._freezeSettings(),t=nc(n._databaseId);return new lR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fI(n,e,t,r,o,u={}){const d=n.aa(u.merge||u.mergeFields?2:0,e,t,o);dT("Data must be an object, but it was:",d,r);const g=TS(r,d);let E,b;if(u.merge)E=new Qi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const K=hT(e,N,t);if(!d.contains(K))throw new Pe(de.INVALID_ARGUMENT,`Field '${K}' is specified in your field mask but missing from your input data.`);SS(S,K)||S.push(K)}E=new Qi(S),b=d.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,b=d.fieldTransforms;return new uR(new Rr(g),E,b)}class T_ extends xf{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T_}}function bS(n,e,t){return new hI({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class uT extends xf{_toFieldTransform(e){return new Lu(e.path,new ki)}isEqual(e){return e instanceof uT}}class cR extends xf{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=bS(this,e,!0),r=this.ha.map(u=>Rf(u,t)),o=new Wl(r);return new Lu(e.path,o)}isEqual(e){return this===e}}class dR extends xf{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=bS(this,e,!0),r=this.ha.map(u=>Rf(u,t)),o=new Io(r);return new Lu(e.path,o)}isEqual(e){return this===e}}class hR extends xf{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Md(e.wt,dw(e.wt,this.la));return new Lu(e.path,t)}isEqual(e){return this===e}}function lT(n,e,t,r){const o=n.aa(1,e,t);dT("Data must be an object, but it was:",o,r);const u=[],d=Rr.empty();Ul(r,(E,b)=>{const S=pI(e,E,t);b=(0,Wt.m9)(b);const N=o.ia(S);if(b instanceof T_)u.push(S);else{const K=Rf(b,N);null!=K&&(u.push(S),d.set(S,K))}});const g=new Qi(u);return new IS(d,g,o.fieldTransforms)}function cT(n,e,t,r,o,u){const d=n.aa(1,e,t),g=[hT(e,r,t)],E=[o];if(u.length%2!=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let K=0;K<u.length;K+=2)g.push(hT(e,u[K])),E.push(u[K+1]);const b=[],S=Rr.empty();for(let K=g.length-1;K>=0;--K)if(!SS(b,g[K])){const Q=g[K];let me=E[K];me=(0,Wt.m9)(me);const je=d.ia(Q);if(me instanceof T_)b.push(Q);else{const et=Rf(me,je);null!=et&&(b.push(Q),S.set(Q,et))}}const N=new Qi(b);return new IS(S,N,d.fieldTransforms)}function CS(n,e,t,r=!1){return Rf(t,n.aa(r?4:3,e))}function Rf(n,e){if(AS(n=(0,Wt.m9)(n)))return dT("Unsupported field value:",e,n),TS(n,e);if(n instanceof xf)return function(t,r){if(!DS(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=Rf(d,r.ra(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Wt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dw(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=zn.fromDate(t);return{timestampValue:kd(r.wt,o)}}if(t instanceof zn){const o=new zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kd(r.wt,o)}}if(t instanceof dI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:ww(r.wt,t._byteString)};if(t instanceof Wn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${lI(t)}`)}(n,e)}function TS(n,e){const t={};return ZE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ul(n,(r,o)=>{const u=Rf(o,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function AS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zn||n instanceof dI||n instanceof Wu||n instanceof Wn||n instanceof xf)}function dT(n,e,t){if(!AS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=lI(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function hT(n,e,t){if((e=(0,Wt.m9)(e))instanceof ic)return e._internalPath;if("string"==typeof e)return pI(n,e);throw gI("Field path arguments must be of type string or ",n,!1,void 0,t)}const fR=new RegExp("[~\\*/\\[\\]]");function pI(n,e,t){if(e.search(fR)>=0)throw gI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ic(...e.split("."))._internalPath}catch(r){throw gI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Pe(de.INVALID_ARGUMENT,g+n+E)}function SS(n,e){return n.some(t=>t.isEqual(e))}class A_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pR extends A_{data(){return super.data()}}function mI(n,e){return"string"==typeof e?pI(n,e):e instanceof ic?e._internalPath:e._delegate._internalPath}class Nf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sc extends A_{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new S_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class S_ extends sc{data(e={}){return super.data(e)}}class Gd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Nf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new S_(this._firestore,this._userDataWriter,r.key,r,new Nf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new S_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Nf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new S_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Nf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,b=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:gR(d.type),doc:g,oldIndex:E,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function xS(n,e){return n instanceof sc&&e instanceof sc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gd&&e instanceof Gd&&n._firestore===e._firestore&&vS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function MS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x_{}function zd(n,...e){for(const t of e)n=t._apply(n);return n}class mR extends x_{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Mf(e.firestore),r=function(o,u,d,g,E,b,S){let N;if(E.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){FS(S,b);const Q=[];for(const me of S)Q.push(kS(g,o,me));N={arrayValue:{values:Q}}}else N=kS(g,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||FS(S,b),N=CS(d,"where",S,"in"===b||"not-in"===b);const K=si.create(E,b,N);return function(Q,me){if(me.ht()){const et=xv(Q);if(null!==et&&!et.isEqual(me.field))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${et.toString()}' and '${me.field.toString()}'`);const kt=Sv(Q);null!==kt&&LS(0,me.field,kt)}const je=function(et,kt){for(const Gt of et.filters)if(kt.indexOf(Gt.op)>=0)return Gt.op;return null}(Q,function(et){switch(et){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(me.op));if(null!==je)throw new Pe(de.INVALID_ARGUMENT,je===me.op?`Invalid query. You cannot use more than one '${me.op.toString()}' filter.`:`Invalid query. You cannot use '${me.op.toString()}' filters with '${je.toString()}' filters.`)}(o,K),K}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ts(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Ua(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class vR extends x_{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new zl(o,u);return function(g,E){if(null===Sv(g)){const b=xv(g);null!==b&&LS(0,b,E.field)}}(r,d),d}(e._query,this.fa,this.wa);return new ts(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ua(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RS extends x_{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new ts(e.firestore,e.converter,Rv(e._query,this.ma,this.ga))}}class NS extends x_{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=PS(e,this.type,this.ya,this.pa);return new ts(e.firestore,e.converter,(o=t,new Ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class OS extends x_{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=PS(e,this.type,this.ya,this.pa);return new ts(e.firestore,e.converter,(o=t,new Ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function PS(n,e,t,r){if(t[0]=(0,Wt.m9)(t[0]),t[0]instanceof A_)return function(o,u,d,g,E){if(!g)throw new Pe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const S of Sd(o))if(S.field.isKeyField())b.push(Hl(u,g.key));else{const N=g.data.field(S.field);if(Iv(N))throw new Pe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const K=S.field.canonicalString();throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${K}' (used as the orderBy) does not exist.`)}b.push(N)}return new Gl(b,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Mf(n.firestore);return function(u,d,g,E,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new Pe(de.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const K=[];for(let Q=0;Q<b.length;Q++){const me=b[Q];if(N[Q].field.isKeyField()){if("string"!=typeof me)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof me}`);if(!Mv(u)&&-1!==me.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${me}' contains a slash.`);const je=u.path.child(Zt.fromString(me));if(!Je.isDocumentKey(je))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${je}' is not because it contains an odd number of segments.`);const et=new Je(je);K.push(Hl(d,et))}else{const je=CS(g,E,me);K.push(je)}}return new Gl(K,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function kS(n,e,t){if("string"==typeof(t=(0,Wt.m9)(t))){if(""===t)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(e)&&-1!==t.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!Je.isDocumentKey(r))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hl(n,new Je(r))}if(t instanceof Wn)return Hl(n,t._key);throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lI(t)}.`)}function FS(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LS(n,e,t){if(!t.isEqual(e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const TR={maxAttempts:5};class fT{convertValue(e,t="none"){switch($l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Ul(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new dI(Jn(e.latitude),Jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const t=Fa(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);Dt(Nb(r));const o=new Eo(r.get(1),r.get(3)),u=new Je(r.popFirst(5));return o.isEqual(t)||_r(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function yI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class AR extends fT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class VS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mf(e)}set(e,t,r){this._verifyNotCommitted();const o=Wd(e,this._firestore),u=yI(o.converter,t,r),d=fI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Bn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Wd(e,this._firestore);let d;return d="string"==typeof(t=(0,Wt.m9)(t))||t instanceof ic?cT(this._dataReader,"WriteBatch.update",u._key,t,r,o):lT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new Nd(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(n,e){if((n=(0,Wt.m9)(n)).firestore!==e)throw new Pe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Of extends fT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function US(n,e,t){n=sn(n,Wn);const r=sn(n.firestore,Xn),o=yI(n.converter,e,t);return mm(r,[fI(Mf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Bn.none())])}function BS(n,e,t,...r){n=sn(n,Wn);const o=sn(n.firestore,Xn),u=Mf(o);let d;return d="string"==typeof(e=(0,Wt.m9)(e))||e instanceof ic?cT(u,"updateDoc",n._key,e,t,r):lT(u,"updateDoc",n._key,e),mm(o,[d.toMutation(n._key,Bn.exists(!0))])}function jS(n,...e){var t,r,o;n=(0,Wt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||aT(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(aT(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let E,b,S;if(n instanceof Wn)b=sn(n.firestore,Xn),S=Ad(n._key.path),E={next:N=>{e[d]&&e[d](pT(b,n,N))},error:e[d+1],complete:e[d+2]};else{const N=sn(n,ts);b=sn(N.firestore,Xn),S=N._query;const K=new Of(b);E={next:Q=>{e[d]&&e[d](new Gd(b,K,N,Q))},error:e[d+1],complete:e[d+2]},MS(n._query)}return function(N,K,Q,me){const je=new aI(me),et=new CC(K,je,Q);return N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return EC(yield gm(N),et)})),()=>{je.Tc(),N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return IC(yield gm(N),et)}))}}(zr(b),S,g,E)}function mm(n,e){return function(t,r){const o=new Hr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function vM(n,e,t){return MC.apply(this,arguments)}(yield iT(t),r,o)})),o.promise}(zr(n),e)}function pT(n,e,t){const r=t.docs.get(e._key),o=new Of(n);return new sc(n,o,e._key,r,new Nf(t.hasPendingWrites,t.fromCache),e.converter)}class LR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mf(e)}get(e){const t=Wd(e,this._firestore),r=new AR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const u=o[0];if(u.isFoundDocument())return new A_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new A_(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=Wd(e,this._firestore),u=yI(o.converter,t,r),d=fI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Wd(e,this._firestore);let d;return d="string"==typeof(t=(0,Wt.m9)(t))||t instanceof ic?cT(this._dataReader,"Transaction.update",u._key,t,r,o):lT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Wd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wd(e,this._firestore),r=new Of(this._firestore);return super.get(e).then(o=>new sc(this._firestore,r,t._key,o._document,new Nf(!1,!1),t.converter))}}function gT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function HS(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function GS(){if(!function QE(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){kl=Go.SDK_VERSION,(0,Go._registerComponent)(new Iy.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Xn(o,new ab(t.getProvider("auth-internal")),new $E(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Go.registerVersion)(BE,"3.4.13",n),(0,Go.registerVersion)(BE,"3.4.13","esm2017")}();class M_{constructor(e){this._delegate=e}static fromBase64String(e){return GS(),new M_(Wu.fromBase64String(e))}static fromUint8Array(e){return HS(),new M_(Wu.fromUint8Array(e))}toBase64(){return GS(),this._delegate.toBase64()}toUint8Array(){return HS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mT(n){return function WR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class qR{enableIndexedDbPersistence(e,t){return function XM(n,e){wS(n=sn(n,Xn));const t=zr(n),r=n._freezeSettings(),o=new QC;return ES(t,o,new nS(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eR(n){wS(n=sn(n,Xn));const e=zr(n),t=n._freezeSettings(),r=new QC;return ES(e,r,new PM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tR(n){if(n._initialized&&!n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!Gs.V())return Promise.resolve();const o=r+"main";yield Gs.delete(o)}),function(r){return t.apply(this,arguments)})(tI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class zS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Eo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Pa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function qM(n,e,t,r={}){var o;const u=(n=sn(n,C_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Pa("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=xr.MOCK_USER;else{d=(0,Wt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Pe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new xr(E)}n._authCredentials=new ob(new _d(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function rR(n){return function UM(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield oS(n),t=yield aS(n);return e.setNetworkEnabled(!0),function(r){const o=Xe(r);return o.lu.delete(0),D_(o)}(t)}))}(zr(n=sn(n,Xn)))}(this._delegate)}disableNetwork(){return function iR(n){return function BM(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield oS(n),t=yield aS(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=Xe(o);u.lu.add(0),yield um(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(zr(n=sn(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nR(n){return function(e){const t=new Hr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function IM(n,e){return kC.apply(this,arguments)}(yield iT(e),t)})),t.promise}(zr(n=sn(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function FR(n,e){return function HM(n,e){const t=new aI(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield gm(n),o=t,Xe(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield gm(n),o=t,void Xe(r).Tu.delete(o);var r,o}))}}(zr(n=sn(n,Xn)),aT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ym(this,mS(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new Jo(this,cI(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function KM(n,e){if(n=sn(n,C_),oT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new Ua(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VR(n,e,t){n=sn(n,Xn);const r=Object.assign(Object.assign({},TR),t);return function(o){if(o.maxAttempts<1)throw new Pe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function GM(n,e,t){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const o=yield(u=n,uI(u).then(d=>d.datastore));var u;new LM(n.asyncQueue,o,t,e,r).run()})),r.promise}(zr(n),o=>e(new LR(n,o)),r)}(this._delegate,t=>e(new WS(this,t)))}batch(){return zr(this._delegate),new qS(new VS(this._delegate,e=>mm(this._delegate,e)))}loadBundle(e){return function sR(n,e){const t=zr(n=sn(n,Xn)),r=new YM;return function zM(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,b){if(E instanceof Uint8Array)return rS(E,b);if(E instanceof ArrayBuffer)return rS(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new kM(E,d);var E}(t,nc(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function OM(n,e,t){const r=Xe(n);var o;(o=(0,Ie.Z)(function*(u,d,g){try{const E=yield d.getMetadata();if(yield function(K,Q){const me=Xe(K),je=mr(Q.createTime);return me.persistence.runTransaction("hasNewerBundle","readonly",et=>me.Ds.getBundleMetadata(et,Q.id)).then(et=>!!et&&et.createTime.compareTo(je)>=0)}(u.localStore,E))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(K=E).totalDocuments,bytesLoaded:K.totalBytes,totalDocuments:K.totalDocuments,totalBytes:K.totalBytes}),Promise.resolve(new Set);g._updateProgress(WA(E));const b=new hM(E,u.localStore,d.wt);let S=yield d.fc();for(;S;){const K=yield b.Nu(S);K&&g._updateProgress(K),S=yield d.fc()}const N=yield b.complete();return yield rc(u,N.Mu,void 0),yield function(K,Q){const me=Xe(K);return me.persistence.runTransaction("Save bundle","readwrite",je=>me.Ds.saveBundleMetadata(je,Q))}(u.localStore,E),g._completeWith(N.progress),Promise.resolve(N.Ou)}catch(E){return Pa("SyncEngine",`Loading bundle failed with ${E}`),g._failWith(E),Promise.resolve(new Set)}var K}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield iT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oR(n,e){return function WM(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=Xe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ds.getNamedQuery(u,r))}(yield rT(n),e)}))}(zr(n=sn(n,Xn)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ds(this,t):null)}}class vI extends fT{constructor(e){super(),this.firestore=e}convertBytes(e){return new M_(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Jo.forKey(t,this.firestore,null)}}class WS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vI(e)}get(e){const t=kf(e);return this._delegate.get(t).then(r=>new R_(this._firestore,new sc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=kf(e);return r?(gT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=kf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=kf(e);return this._delegate.delete(t),this}}class qS{constructor(e){this._delegate=e}set(e,t,r){const o=kf(e);return r?(gT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=kf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=kf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new S_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Pf(e,new vI(e),t),o.set(t,u)),u}}Pf.INSTANCES=new WeakMap;class Jo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Jo(t,new Wn(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new Jo(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ym(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ym(this.firestore,mS(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Wt.m9)(e))instanceof Wn&&yS(this._delegate,e)}set(e,t){t=gT("DocumentReference.set",t);try{return t?US(this._delegate,e,t):US(this._delegate,e)}catch(r){throw Is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?BS(this._delegate,e):BS(this._delegate,e,t,...r)}catch(o){throw Is(o,"updateDoc()","DocumentReference.update()")}}delete(){return function PR(n){return mm(sn(n.firestore,Xn),[new Nd(n._key,Bn.none())])}(this._delegate)}onSnapshot(...e){const t=KS(e),r=ZS(e,o=>new R_(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return jS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xR(n){n=sn(n,Wn);const e=sn(n.firestore,Xn),t=zr(e),r=new Of(e);return function jM(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const g=yield function(E,b){const S=Xe(E);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Pe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const E=dm(g,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield rT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new sc(e,r,n._key,o,new Nf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function MR(n){n=sn(n,Wn);const e=sn(n.firestore,Xn);return uS(zr(e),n._key,{source:"server"}).then(t=>pT(e,n,t))}(this._delegate):function SR(n){n=sn(n,Wn);const e=sn(n.firestore,Xn);return uS(zr(e),n._key).then(t=>pT(e,n,t))}(this._delegate),t.then(r=>new R_(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Jo(this.firestore,this._delegate.withConverter(e?Pf.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function KS(n){for(const e of n)if("object"==typeof e&&!mT(e))return e;return{}}function ZS(n,e){var t,r;let o;return o=mT(n[0])?n[0]:mT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class R_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Jo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xS(this._delegate,e._delegate)}}class N_ extends R_{data(e){const t=this._delegate.data(e);return function Mg(n,e){n||st()}(void 0!==t),t}}class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vI(e)}where(e,t,r){try{return new Ds(this.firestore,zd(this._delegate,function yR(n,e,t){const r=e,o=mI("where",n);return new mR(o,r,t)}(e,t,r)))}catch(o){throw Is(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ds(this.firestore,zd(this._delegate,function _R(n,e="asc"){const t=e,r=mI("orderBy",n);return new vR(r,t)}(e,t)))}catch(r){throw Is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,zd(this._delegate,function ER(n){return pS("limit",n),new RS("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,zd(this._delegate,function wR(n){return pS("limitToLast",n),new RS("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,zd(this._delegate,function IR(...n){return new NS("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,zd(this._delegate,function DR(...n){return new NS("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,zd(this._delegate,function bR(...n){return new OS("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,zd(this._delegate,function CR(...n){return new OS("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return vS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function NR(n){n=sn(n,ts);const e=sn(n.firestore,Xn),t=zr(e),r=new Of(e);return function $M(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const g=yield y(o,u,!0),E=new ZA(u,g.ji),b=E.Ku(g.documents),S=E.applyChanges(b,!1);d.resolve(S.snapshot)}catch(g){const E=dm(g,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield rT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Gd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function OR(n){n=sn(n,ts);const e=sn(n.firestore,Xn),t=zr(e),r=new Of(e);return lS(t,n._query,{source:"server"}).then(o=>new Gd(e,r,n,o))}(this._delegate):function RR(n){n=sn(n,ts);const e=sn(n.firestore,Xn),t=zr(e),r=new Of(e);return MS(n._query),lS(t,n._query).then(o=>new Gd(e,r,n,o))}(this._delegate),t.then(r=>new yT(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KS(e),r=ZS(e,o=>new yT(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return jS(this._delegate,t,r)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?Pf.getInstance(this.firestore,e):null))}}class ZR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new N_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new N_(this._firestore,r))})}isEqual(e){return xS(this._delegate,e._delegate)}}class ym extends Ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Jo(this.firestore,e):null}doc(e){try{return new Jo(this.firestore,void 0===e?cI(this._delegate):cI(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function kR(n,e){const t=sn(n.firestore,Xn),r=cI(n),o=yI(n.converter,e);return mm(t,[fI(Mf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Jo(this.firestore,t))}isEqual(e){return yS(this._delegate,e._delegate)}withConverter(e){return new ym(this.firestore,this._delegate.withConverter(e?Pf.getInstance(this.firestore,e):null))}}function kf(n){return sn(n,Wn)}class vT{constructor(...e){this._delegate=new ic(...e)}static documentId(){return new vT(pr.keyField().canonicalString())}isEqual(e){return(e=(0,Wt.m9)(e))instanceof ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ff{constructor(e){this._delegate=e}static serverTimestamp(){const e=function BR(){return new uT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ff(e)}static delete(){const e=function UR(){return new T_("deleteField")}();return e._methodName="FieldValue.delete",new Ff(e)}static arrayUnion(...e){const t=function jR(...n){return new cR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ff(t)}static arrayRemove(...e){const t=function $R(...n){return new dR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ff(t)}static increment(e){const t=function HR(n){return new hR("increment",n)}(e);return t._methodName="FieldValue.increment",new Ff(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const YR={Firestore:zS,GeoPoint:dI,Timestamp:zn,Blob:M_,Transaction:WS,WriteBatch:qS,DocumentReference:Jo,DocumentSnapshot:R_,Query:Ds,QueryDocumentSnapshot:N_,QuerySnapshot:yT,CollectionReference:ym,FieldPath:vT,FieldValue:Ff,setLogLevel:function KR(n){!function sb(n){Oa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function JR(n){(function QR(n,e){n.INTERNAL.registerComponent(new Iy.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},YR)))})(n,(e,t)=>new zS(e,t,new qR)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(AD.Z);var XR=P(6451),_I=P(5363),eN=P(6063);class tN extends $i.x{constructor(e=1/0,t=1/0,r=eN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)g=E;g&&r.splice(0,g+1)}}}var nN=P(3099);function YS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,nN.B)({connector:()=>new tN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function QS(n,e){return(0,Gi.m)(e)?ar(()=>n,e):ar(()=>n)}var _T=P(9468),Lf=P(5867);class vm{constructor(e){return e}}class JS{constructor(){return(0,Lf.C6)()}}const ET=new p.OlP("angularfire2._apps"),iN={provide:vm,useFactory:function rN(n){return n&&1===n.length?n[0]:new vm((0,Lf.Mq)())},deps:[[new p.FiY,ET]]},sN={provide:JS,deps:[[new p.FiY,ET]]};function oN(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new vm(r)}}let aN=(()=>{class n{constructor(t){(0,Lf.KN)("angularfire",In.q4.full,"core"),(0,Lf.KN)("angularfire",In.q4.full,"app"),(0,Lf.KN)("angular",p.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[iN,sN]}),n})();function uN(n,...e){return{ngModule:aN,providers:[{provide:ET,useFactory:oN(n),multi:!0,deps:[p.R0b,p.zs3,In.HU,...e]}]}}const lN=(0,In.u3)(Lf.ZF,!0),XS=new Map,cN={activated:!1,tokenObservers:[]},dN={initialized:!1,enabled:!1};function wi(n){return XS.get(n)||cN}function Ha(n,e){XS.set(n,e)}function EI(){return dN}class mN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new Wt.BH,yield function yN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Wt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const bs=new Wt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tx(n){if(!wi(n).activated)throw bs.create("use-before-activation",{appName:n.name})}function DT(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,Ie.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Q=yield d.getHeartbeatsHeader();Q&&(u["X-Firebase-Client"]=Q)}const g={method:"POST",body:JSON.stringify(e),headers:u};let E,b;try{E=yield fetch(n,g)}catch(Q){throw bs.create("fetch-network-error",{originalErrorMessage:null===(r=Q)||void 0===r?void 0:r.message})}if(200!==E.status)throw bs.create("fetch-status-error",{httpStatus:E.status});try{b=yield E.json()}catch(Q){throw bs.create("fetch-parse-error",{originalErrorMessage:null===(o=Q)||void 0===o?void 0:o.message})}const S=b.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const N=1e3*Number(S[1]),K=Date.now();return{token:b.token,expireTimeMillis:K+N,issuedAtTimeMillis:K}}),bT.apply(this,arguments)}function wN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const O_="firebase-app-check-store";let DI=null;function rx(){return DI||(DI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(bs.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(O_,{keyPath:"compositeKey"})}}catch(r){e(bs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),DI)}function CT(){return CT=(0,Ie.Z)(function*(n,e){const r=(yield rx()).transaction(O_,"readwrite"),u=r.objectStore(O_).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var b;g(bs.create("storage-set",{originalErrorMessage:null===(b=E.target.error)||void 0===b?void 0:b.message}))}})}),CT.apply(this,arguments)}const P_=new Sa.Yd("@firebase/app-check");function ax(n,e){return(0,Wt.hl)()?function CN(n,e){return function ix(n,e){return CT.apply(this,arguments)}(function ox(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{P_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ux(){return EI().enabled}function lx(){return xT.apply(this,arguments)}function xT(){return xT=(0,Ie.Z)(function*(){const n=EI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),xT.apply(this,arguments)}const RN={error:"UNKNOWN_ERROR"};function NN(n){return Wt.US.encodeString(JSON.stringify(n),!1)}function bI(n){return MT.apply(this,arguments)}function MT(){return MT=(0,Ie.Z)(function*(n,e=!1){const t=n.app;tx(t);const r=wi(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&CI(E)&&(o=E)}if(!e&&o&&CI(o))return{token:o.token};let g,d=!1;if(ux()){r.exchangeTokenPromise||(r.exchangeTokenPromise=DT(wN(t,yield lx()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const E=yield r.exchangeTokenPromise;return yield ax(t,E),Ha(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?P_.warn(E.message):P_.error(E),u=E}return o?(g={token:o.token},Ha(t,Object.assign(Object.assign({},r),{token:o})),yield ax(t,o)):g=PN(u),d&&dx(t,g),g}),MT.apply(this,arguments)}function NT(n,e){const t=wi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ha(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function cx(n){const{app:e}=n,t=wi(e);let r=t.tokenRefresher;r||(r=function ON(n){const{app:e}=n;return new mN((0,Ie.Z)(function*(){let r;if(r=wi(e).token?yield bI(n,!0):yield bI(n),r.error)throw r.error}),()=>!0,()=>{const t=wi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ha(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function dx(n,e){const t=wi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function CI(n){return n.expireTimeMillis-Date.now()>0}function PN(n){return{token:NN(RN),error:n}}class kN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wi(this.app);for(const t of e)NT(this.app,t.next);return Promise.resolve()}}const _x="app-check-internal";!function ZN(){(0,Go._registerComponent)(new Iy.wA("app-check",n=>function FN(n,e){return new kN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_x).initialize()})),(0,Go._registerComponent)(new Iy.wA(_x,n=>function LN(n){return{getToken:e=>bI(n,e),addTokenListener:e=>function RT(n,e,t,r){const{app:o}=n,u=wi(o),d={next:t,error:r,type:e};if(Ha(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&CI(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),cx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>cx(n))}(n,"INTERNAL",e),removeTokenListener:e=>NT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Go.registerVersion)("@firebase/app-check","0.5.12")}();class AI{constructor(){return(0,In.vb)("app-check")}}"undefined"!=typeof window&&window,P(127);const wx=new p.OlP("angularfire2.auth.use-emulator"),Ix=new p.OlP("angularfire2.auth.settings"),Dx=new p.OlP("angularfire2.auth.tenant-id"),bx=new p.OlP("angularfire2.auth.langugage-code"),Cx=new p.OlP("angularfire2.auth.use-device-language"),Tx=new p.OlP("angularfire.auth.persistence"),Ax=(n,e,t,r,o,u,d,g)=>(0,yo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[b,S]of Object.entries(d))E.settings[b]=S;return g&&E.setPersistence(g),E},[t,r,o,u,d,g]);let Sx=(()=>{class n{constructor(t,r,o,u,d,g,E,b,S,N,K,Q){const me=new $i.x,je=at(void 0).pipe((0,_I.Q)(d.outsideAngular),ar(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,5881)))),(0,It.U)(()=>(0,yo.on)(t,u,r)),(0,It.U)(et=>Ax(et,u,g,b,S,N,E,K)),YS({bufferSize:1,refCount:!1}));if(Tr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{je.pipe(_a()).subscribe();const kt=je.pipe(ar(jt=>jt.getRedirectResult().then(Xt=>Xt,()=>null)),In.iC,YS({bufferSize:1,refCount:!1})),Gt=je.pipe(ar(jt=>new Ti.y(Xt=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(vn=>Xt.next(vn),vn=>Xt.error(vn),()=>Xt.complete()))})))),tn=je.pipe(ar(jt=>new Ti.y(Xt=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(vn=>Xt.next(vn),vn=>Xt.error(vn),()=>Xt.complete()))}))));this.authState=kt.pipe(QS(Gt),(0,_T.R)(d.outsideAngular),(0,_I.Q)(d.insideAngular)),this.user=kt.pipe(QS(tn),(0,_T.R)(d.outsideAngular),(0,_I.Q)(d.insideAngular)),this.idToken=this.user.pipe(ar(jt=>jt?(0,Tn.D)(jt.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(ar(jt=>jt?(0,Tn.D)(jt.getIdTokenResult()):at(null))),this.credential=(0,XR.T)(kt,me,this.authState.pipe(yn(jt=>!jt))).pipe((0,It.U)(jt=>(null==jt?void 0:jt.user)?jt:null),(0,_T.R)(d.outsideAngular),(0,_I.Q)(d.insideAngular))}return(0,yo.pX)(this,je,u,{spy:{apply:(et,kt,Gt)=>{(et.startsWith("signIn")||et.startsWith("createUser"))&&Gt.then(tn=>me.next(tn))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yo.Dh),p.LFG(yo.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(In.HU),p.LFG(wx,8),p.LFG(Ix,8),p.LFG(Dx,8),p.LFG(bx,8),p.LFG(Cx,8),p.LFG(Tx,8),p.LFG(AI,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function xx(n,e){return function tO(n,e=wy.z){return new Ti.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function LT(n,e){return xx(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function SI(n,e){return LT(n,e).pipe(zi(void 0),$p(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const E=o.find(S=>S.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function Mx(n,e,t){return SI(n,t).pipe(Ai((r,o)=>function rO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function iO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return VT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return VT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Y0(n,e=Os.y){return n=null!=n?n:Q0,(0,or.e)((t,r)=>{let o,u=!0;t.subscribe((0,Yn.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function VT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Rx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Nx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=SI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(zi(void 0),$p(),yn(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),In.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Rx(e);return Mx(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return LT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),In.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(In.iC)}add(e){return this.ref.add(e)}doc(e){return new Ox(this.ref.doc(e),this.afs)}}class Ox{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Px(r,t);return new Nx(o,u,this.afs)}snapshotChanges(){return function nO(n,e){return xx(n,e).pipe(zi(void 0),$p(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(In.iC)}}class sO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),yn(t=>t.length>0),In.iC):SI(this.query,this.afs.schedulers.outsideAngular).pipe(In.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Rx(e);return Mx(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return LT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),In.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(In.iC)}}const oO=new p.OlP("angularfire2.enableFirestorePersistence"),aO=new p.OlP("angularfire2.firestore.persistenceSettings"),uO=new p.OlP("angularfire2.firestore.settings"),lO=new p.OlP("angularfire2.firestore.use-emulator");function Px(n,e=(t=>t)){return{query:e(n),ref:n}}let cO=(()=>{class n{constructor(t,r,o,u,d,g,E,b,S,N,K,Q,me,je,et,kt,Gt){this.schedulers=E;const tn=(0,yo.on)(t,g,r),jt=S;N&&Ax(tn,g,K,me,je,et,Q,kt),[this.firestore,this.persistenceEnabled$]=(0,yo.cc)(`${tn.name}.firestore`,"AngularFirestore",tn.name,()=>{const Xt=g.runOutsideAngular(()=>tn.firestore());if(u&&Xt.settings(u),jt&&Xt.useEmulator(...jt),o&&!Tr(d)){const vn=()=>{try{return(0,Tn.D)(Xt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ns){return"undefined"!=typeof console&&console.warn(ns),at(!1)}};return[Xt,g.runOutsideAngular(vn)]}return[Xt,at(!1)]},[u,jt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Px(o,r),g=this.schedulers.ngZone.run(()=>u);return new Nx(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new sO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Ox(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yo.Dh),p.LFG(yo.xv,8),p.LFG(oO,8),p.LFG(uO,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(In.HU),p.LFG(aO,8),p.LFG(lO,8),p.LFG(Sx,8),p.LFG(wx,8),p.LFG(Ix,8),p.LFG(Dx,8),p.LFG(bx,8),p.LFG(Cx,8),p.LFG(Tx,8),p.LFG(AI,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kx=(()=>{class n{constructor(t){this.firestore=t}agregarEmpleado(t){return this.firestore.collection("empleados").add(t)}getEmpleado(){return this.firestore.collection("empleados",t=>t.orderBy("fechaCreacion","asc")).snapshotChanges()}eliminarEmpleado(t){return this.firestore.collection("empleados").doc(t).delete()}getEmpleadoById(t){return this.firestore.collection("empleados").doc(t).snapshotChanges()}actualizarEmpleado(t,r){return this.firestore.collection("empleados").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(cO))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dO(n,e){1&n&&(p.TgZ(0,"div",16)(1,"span",17),p._uU(2,"Loading..."),p.qZA()())}function hO(n,e){1&n&&(p.TgZ(0,"span",18),p._uU(1,"TODOS LOS CAMPOS SON OBLIGATORIOS"),p.qZA())}let Fx=(()=>{class n{constructor(t,r,o,u){this.fb=t,this._empleadoService=r,this.router=o,this.aRoute=u,this.submitted=!1,this.loading=!1,this.textButton="Agregar",this.titulo="Agregar empleado",this.createEmpleado=this.fb.group({nombre:["",wp.required],apellido:["",wp.required],documento:["",wp.required],salario:["",wp.required]}),this.id=this.aRoute.snapshot.paramMap.get("id")}ngOnInit(){this.esEditar()}agregarEditarEmpleado(){this.submitted=!0,!this.createEmpleado.invalid&&(null===this.id?this.agregarEmpleado():this.editarEmpleado(this.id))}agregarEmpleado(){const t={nombre:this.createEmpleado.value.nombre,apellido:this.createEmpleado.value.apellido,documento:this.createEmpleado.value.documento,salario:this.createEmpleado.value.salario,fechaCreacion:new Date,fechaActualizacion:new Date};this.loading=!0,this._empleadoService.agregarEmpleado(t).then(()=>{console.log("empleado registrado con exito"),this.router.navigate(["/list-empleado"]),this.loading=!1}).catch(r=>{console.log(r),this.loading=!1})}editarEmpleado(t){const r={nombre:this.createEmpleado.value.nombre,apellido:this.createEmpleado.value.apellido,documento:this.createEmpleado.value.documento,salario:this.createEmpleado.value.salario,fechaActualizacion:new Date};this.loading=!0,this._empleadoService.actualizarEmpleado(t,r).then(()=>{this.loading=!1,this.router.navigate(["/list-empleado"]),console.log("actualizado con exito")}).catch(o=>{console.log(o)})}esEditar(){null!=this.id&&(this.titulo="Editar Empleado",this.textButton="Guardar",this.loading=!0,this._empleadoService.getEmpleadoById(this.id).subscribe(t=>{this.loading=!1,this.createEmpleado.setValue({nombre:t.payload.data().nombre,apellido:t.payload.data().apellido,documento:t.payload.data().documento,salario:t.payload.data().salario})}))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(TD),p.Y36(kx),p.Y36(yi),p.Y36(Da))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-create-empleado"]],decls:22,vars:5,consts:[[1,"container","pt-4"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card","text-center"],[1,"card-body"],["class","spinner-border float-end","role","status",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","placeholder","Nombre","formControlName","nombre",1,"form-control"],["type","text","placeholder","Apellido","formControlName","apellido",1,"form-control"],["type","text","placeholder","Documento","formControlName","documento",1,"form-control","form-contro","lg","mt-3"],["type","number","placeholder","Salario","formControlName","salario",1,"form-control","form-contro","lg","mt-3"],[1,"mt-3"],["type","text","routerLink","/list-empleados",1,"btn","btn-secondary","btn-lg","me-3"],["type","submit",1,"btn","btn-dark","btn-lg"],["role","status",1,"spinner-border","float-end"],[1,"visually-hidden"],[1,"badge","bg-danger"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),p._uU(6),p.YNc(7,dO,3,0,"div",5),p.qZA(),p.YNc(8,hO,2,0,"span",6),p.TgZ(9,"form",7),p.NdJ("ngSubmit",function(){return r.agregarEditarEmpleado()}),p.TgZ(10,"div",1)(11,"div",8),p._UZ(12,"input",9),p.qZA(),p.TgZ(13,"div",8),p._UZ(14,"input",10),p.qZA()(),p._UZ(15,"input",11)(16,"input",12),p.TgZ(17,"div",13)(18,"button",14),p._uU(19,"Volver"),p.qZA(),p.TgZ(20,"button",15),p._uU(21),p.qZA()()()()()()()()),2&t&&(p.xp6(6),p.hij("",r.titulo," "),p.xp6(1),p.Q6J("ngIf",r.loading),p.xp6(1),p.Q6J("ngIf",r.submitted&&r.createEmpleado.invalid),p.xp6(1),p.Q6J("formGroup",r.createEmpleado),p.xp6(12),p.Oqu(r.textButton))},directives:[br,F0,I0,Jc,wh,w0,Oh,Pp,_h],styles:[""]}),n})();function fO(n,e){1&n&&(p.TgZ(0,"h5",7),p._uU(1,"No hay datos para mostrar"),p.qZA())}const pO=function(n){return["/editempleado/",n]};function gO(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"tr")(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.ALo(9,"currency"),p.qZA(),p.TgZ(10,"td"),p._UZ(11,"i",10),p.TgZ(12,"i",11),p.NdJ("click",function(){const u=p.CHM(t).$implicit;return p.oxw(2).eliminarEmpleado(u.id)}),p.qZA()()()}if(2&n){const t=e.$implicit;p.xp6(2),p.Oqu(t.nombre),p.xp6(2),p.Oqu(t.apellido),p.xp6(2),p.Oqu(t.documento),p.xp6(2),p.Oqu(p.lcZ(9,5,t.salario)),p.xp6(3),p.Q6J("routerLink",p.VKq(7,pO,t.id))}}function mO(n,e){if(1&n&&(p.TgZ(0,"table",8)(1,"thead")(2,"tr")(3,"th"),p._uU(4,"Nombre"),p.qZA(),p.TgZ(5,"th"),p._uU(6,"Apellido"),p.qZA(),p.TgZ(7,"th"),p._uU(8,"Documento"),p.qZA(),p.TgZ(9,"th"),p._uU(10,"Salario"),p.qZA(),p._UZ(11,"th"),p.qZA()(),p.TgZ(12,"tbody"),p.YNc(13,gO,13,9,"tr",9),p.qZA()()),2&n){const t=p.oxw();p.xp6(13),p.Q6J("ngForOf",t.empleados)}}const yO=[{path:"",redirectTo:"list-empleados",pathMatch:"full"},{path:"list-empleados",component:(()=>{class n{constructor(t){this._empleadoService=t,this.empleados=[]}ngOnInit(){this.getEmpleado()}getEmpleado(){this._empleadoService.getEmpleado().subscribe(t=>{this.empleados=[],t.map(r=>{this.empleados.push(Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})})}eliminarEmpleado(t){this._empleadoService.eliminarEmpleado(t).then(()=>{console.log("Empleado eliminado con exito")}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(kx))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-list-empleados"]],decls:9,vars:2,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["routerLink","/create-empleado",1,"btn","btn-dark","btn-lg","float-end"],["style","margin-top: 30px;",4,"ngIf"],["class","table table-striped mt-5",4,"ngIf"],[2,"margin-top","30px"],[1,"table","table-striped","mt-5"],[4,"ngFor","ngForOf"],[1,"fas","fa-edit","fa-lg","text-info","me-2",3,"routerLink"],[1,"fas","fa-trash-alt","fa-lg","text-danger",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),p._uU(4,"Listado de Empleados"),p.qZA(),p.TgZ(5,"button",4),p._uU(6,"Agregar"),p.qZA(),p.YNc(7,fO,2,0,"h5",5),p.YNc(8,mO,14,1,"table",6),p.qZA()()()),2&t&&(p.xp6(7),p.Q6J("ngIf",0==r.empleados.length),p.xp6(1),p.Q6J("ngIf",r.empleados.length>0))},directives:[_h,br,jn],pipes:[Zs],styles:["i[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()},{path:"create-empleado",component:Fx},{path:"editempleado/:id",component:Fx},{path:"**",redirectTo:"list-empleados",pathMatch:"full"}];let vO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[s0.forRoot(yO)],s0]}),n})(),_O=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-navbar"]],decls:4,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"span",2),p._uU(3,"App Empleados - Firebase"),p.qZA()()())},styles:[""]}),n})(),EO=(()=>{class n{constructor(){this.title="empleados"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&p._UZ(0,"app-navbar")(1,"router-outlet")},directives:[_O,gl],styles:[""]}),n})();const UT_firebase={apiKey:"AIzaSyAK2Y2Da1_PIgJDvyyb8oE2BallGqUbYH0",authDomain:"empleados-75ad3.firebaseapp.com",projectId:"empleados-75ad3",storageBucket:"empleados-75ad3.appspot.com",messagingSenderId:"485930369815",appId:"1:485930369815:web:8fb47d8f9ce5c81182ad52"};P(6457);class Vx{constructor(){return(0,In.vb)("auth")}}class $T{constructor(e){return e}}const Ux="firestore",HT=new p.OlP("angularfire2.firestore-instances");function TO(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $T(r)}}const AO={provide:class bO{constructor(){return(0,In.vb)(Ux)}},deps:[[new p.FiY,HT]]},SO={provide:$T,useFactory:function CO(n,e){const t=(0,In.JM)(Ux,n,e);return t&&new $T(t)},deps:[[new p.FiY,HT],vm]};let xO=(()=>{class n{constructor(){(0,Lf.KN)("angularfire",In.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[SO,AO]}),n})();function MO(n,...e){return{ngModule:xO,providers:[{provide:HT,useFactory:TO(n),multi:!0,deps:[p.R0b,p.zs3,In.HU,JS,[new p.FiY,Vx],[new p.FiY,AI],...e]}]}}const RO=(0,In.u3)(JM,!0);let NO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[EO]}),n.\u0275inj=p.cJS({providers:[],imports:[[Qu,vO,uN(()=>lN(UT_firebase)),MO(()=>RO()),yo.hO.initializeApp(UT_firebase),Z0]]}),n})();(0,p.G48)(),Ic().bootstrapModule(NO).catch(n=>console.error(n))},5867:(tt,De,P)=>{P.d(De,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=P(9681);(0,p.registerVersion)("firebase","9.9.1","app")},127:(tt,De,P)=>{P.d(De,{Z:()=>p.Z});var p=P(3942);p.Z.registerVersion("firebase","9.9.1","app-compat")},5881:(tt,De,P)=>{P.r(De);var p=P(5861),V=P(3942),R=P(6457),se=P(2090),pe=(P(9681),P(1877),P(4859));function ae(){return window}function j(){return(j=(0,p.Z)(function*(J,q,W){var Ce;const{BuildInfo:Ye}=ae();(0,R.aq)(q.sessionId,"AuthEvent did not contain a session ID");const ot=yield be(q.sessionId),Et={};return(0,R.ar)()?Et.ibi=Ye.packageName:(0,R.as)()?Et.apn=Ye.packageName:(0,R.at)(J,"operation-not-supported-in-this-environment"),Ye.displayName&&(Et.appDisplayName=Ye.displayName),Et.sessionId=ot,(0,R.au)(J,W,q.type,void 0,null!==(Ce=q.eventId)&&void 0!==Ce?Ce:void 0,Et)})).apply(this,arguments)}function $e(){return($e=(0,p.Z)(function*(J){const{BuildInfo:q}=ae(),W={};(0,R.ar)()?W.iosBundleId=q.packageName:(0,R.as)()?W.androidPackageName=q.packageName:(0,R.at)(J,"operation-not-supported-in-this-environment"),yield(0,R.av)(J,W)})).apply(this,arguments)}function Be(){return(Be=(0,p.Z)(function*(J,q,W){const{cordova:Ce}=ae();let Ye=()=>{};try{yield new Promise((ot,Et)=>{let Ht=null;function Rt(){var Nt;ot();const Dr=null===(Nt=Ce.plugins.browsertab)||void 0===Nt?void 0:Nt.close;"function"==typeof Dr&&Dr(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Ln(){Ht||(Ht=window.setTimeout(()=>{Et((0,R.aw)(J,"redirect-cancelled-by-user"))},2e3))}function Wr(){"visible"===(null==document?void 0:document.visibilityState)&&Ln()}q.addPassiveListener(Rt),document.addEventListener("resume",Ln,!1),(0,R.as)()&&document.addEventListener("visibilitychange",Wr,!1),Ye=()=>{q.removePassiveListener(Rt),document.removeEventListener("resume",Ln,!1),document.removeEventListener("visibilitychange",Wr,!1),Ht&&window.clearTimeout(Ht)}})}finally{Ye()}})).apply(this,arguments)}function be(J){return We.apply(this,arguments)}function We(){return(We=(0,p.Z)(function*(J){const q=Ge(J),W=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(W)).map(Ye=>Ye.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ge(J){if((0,R.aq)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(J);const q=new ArrayBuffer(J.length),W=new Uint8Array(q);for(let Ce=0;Ce<J.length;Ce++)W[Ce]=J.charCodeAt(Ce);return W}class Ae extends R.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(q)),super.onEvent(q)}initialized(){var q=this;return(0,p.Z)(function*(){yield q.initPromise})()}}function te(J){return he.apply(this,arguments)}function he(){return(he=(0,p.Z)(function*(J){const q=yield ne()._get(ie(J));return q&&(yield ne()._remove(ie(J))),q})).apply(this,arguments)}function Y(){const J=[],q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Ce=Math.floor(Math.random()*q.length);J.push(q.charAt(Ce))}return J.join("")}function ne(){return(0,R.ay)(R.b)}function ie(J){return(0,R.az)("authEvent",J.config.apiKey,J.name)}function Fe(J){if(!(null==J?void 0:J.includes("?")))return{};const[q,...W]=J.split("?");return(0,se.zd)(W.join("?"))}function Ke(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aw)("no-auth-event")}}function Mt(){var J;return(null===(J=null==self?void 0:self.location)||void 0===J?void 0:J.protocol)||null}function _n(J=(0,se.z$)()){return!("file:"!==Mt()&&"ionic:"!==Mt()&&"capacitor:"!==Mt()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function oi(){try{const J=self.localStorage,q=R.aI();if(J)return J.setItem(q,"1"),J.removeItem(q),!function rs(J=(0,se.z$)()){return function wr(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function bn(J=(0,se.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,se.hl)()}catch(J){return Ii()&&(0,se.hl)()}return!1}function Ii(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rn(){return(function Yt(){return"http:"===Mt()||"https:"===Mt()}()||(0,se.ru)()||_n())&&!function Li(){return(0,se.b$)()||(0,se.UG)()}()&&oi()&&!Ii()}function is(){return _n()&&"undefined"!=typeof document}function Ir(){return(Ir=(0,p.Z)(function*(){return!!is()&&new Promise(J=>{const q=setTimeout(()=>{J(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),J(!0)})})})).apply(this,arguments)}const nn={LOCAL:"local",NONE:"none",SESSION:"session"},qn=R.ax,Or="persistence";function wn(J){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(J){yield J._initializationPromise;const q=$t(),W=R.az(Or,J.config.apiKey,J.name);q&&q.setItem(W,J._getPersistence())})).apply(this,arguments)}function $t(){var J;try{return(null===(J=function En(){return"undefined"!=typeof window?window:null}())||void 0===J?void 0:J.sessionStorage)||null}catch(q){return null}}const lt=R.ax;class rt{constructor(){this.browserResolver=R.ay(R.k),this.cordovaResolver=R.ay(class qt{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(q){var W=this;return(0,p.Z)(function*(){const Ce=q._key();let Ye=W.eventManagers.get(Ce);return Ye||(Ye=new Ae(q),W.eventManagers.set(Ce,Ye),W.attachCallbackListeners(q,Ye)),Ye})()}_openPopup(q){(0,R.at)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,W,Ce,Ye){var ot=this;return(0,p.Z)(function*(){!function fe(J){var q,W,Ce,Ye,ot,Et,Ht,Rt,Ln,Wr;const Nt=ae();(0,R.ax)("function"==typeof(null===(q=null==Nt?void 0:Nt.universalLinks)||void 0===q?void 0:q.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.ax)(void 0!==(null===(W=null==Nt?void 0:Nt.BuildInfo)||void 0===W?void 0:W.packageName),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.ax)("function"==typeof(null===(ot=null===(Ye=null===(Ce=null==Nt?void 0:Nt.cordova)||void 0===Ce?void 0:Ce.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===ot?void 0:ot.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(Rt=null===(Ht=null===(Et=null==Nt?void 0:Nt.cordova)||void 0===Et?void 0:Et.plugins)||void 0===Ht?void 0:Ht.browsertab)||void 0===Rt?void 0:Rt.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(Wr=null===(Ln=null==Nt?void 0:Nt.cordova)||void 0===Ln?void 0:Ln.InAppBrowser)||void 0===Wr?void 0:Wr.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const Et=yield ot._initialize(q);yield Et.initialized(),Et.resetRedirect(),(0,R.aD)(),yield ot._originValidation(q);const Ht=function we(J,q,W=null){return{type:q,eventId:W,urlResponse:null,sessionId:Y(),postBody:null,tenantId:J.tenantId,error:(0,R.aw)(J,"no-auth-event")}}(q,Ce,Ye);yield function qe(J,q){return ne()._set(ie(J),q)}(q,Ht);const Rt=yield function z(J,q,W){return j.apply(this,arguments)}(q,Ht,W),Ln=yield function xe(J){const{cordova:q}=ae();return new Promise(W=>{q.plugins.browsertab.isAvailable(Ce=>{let Ye=null;Ce?q.plugins.browsertab.openUrl(J):Ye=q.InAppBrowser.open(J,(0,R.ap)()?"_blank":"_system","location=yes"),W(Ye)})})}(Rt);return function ke(J,q,W){return Be.apply(this,arguments)}(q,Et,Ln)})()}_isIframeWebStorageSupported(q,W){throw new Error("Method not implemented.")}_originValidation(q){const W=q._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function re(J){return $e.apply(this,arguments)}(q)),this.originValidationPromises[W]}attachCallbackListeners(q,W){const{universalLinks:Ce,handleOpenURL:Ye,BuildInfo:ot}=ae(),Et=setTimeout((0,p.Z)(function*(){yield te(q),W.onEvent(Ke())}),500),Ht=function(){var Wr=(0,p.Z)(function*(Nt){clearTimeout(Et);const Dr=yield te(q);let Vi=null;Dr&&(null==Nt?void 0:Nt.url)&&(Vi=function _e(J,q){var W,Ce;const Ye=function ue(J){const q=Fe(J),W=q.link?decodeURIComponent(q.link):void 0,Ce=Fe(W).link,Ye=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return Fe(Ye).link||Ye||Ce||W||J}(q);if(Ye.includes("/__/auth/callback")){const ot=Fe(Ye),Et=ot.firebaseError?function ye(J){try{return JSON.parse(J)}catch(q){return null}}(decodeURIComponent(ot.firebaseError)):null,Ht=null===(Ce=null===(W=null==Et?void 0:Et.code)||void 0===W?void 0:W.split("auth/"))||void 0===Ce?void 0:Ce[1],Rt=Ht?(0,R.aw)(Ht):null;return Rt?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:Ye,postBody:null}}return null}(Dr,Nt.url)),W.onEvent(Vi||Ke())});return function(Dr){return Wr.apply(this,arguments)}}();void 0!==Ce&&"function"==typeof Ce.subscribe&&Ce.subscribe(null,Ht);const Rt=Ye,Ln=`${ot.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var Wr=(0,p.Z)(function*(Nt){if(Nt.toLowerCase().startsWith(Ln)&&Ht({url:Nt}),"function"==typeof Rt)try{Rt(Nt)}catch(Dr){console.error(Dr)}});return function(Nt){return Wr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(q){var W=this;return(0,p.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,W,Ce,Ye){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openPopup(q,W,Ce,Ye)})()}_openRedirect(q,W,Ce,Ye){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openRedirect(q,W,Ce,Ye)})()}_isIframeWebStorageSupported(q,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,W)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return is()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,p.Z)(function*(){if(q.underlyingResolver)return;const W=yield function ht(){return Ir.apply(this,arguments)}();q.underlyingResolver=W?q.cordovaResolver:q.browserResolver})()}}function ai(J){return J.unwrap()}function Lt(J){return Nn(J)}function Nn(J){const{_tokenResponse:q}=J instanceof se.ZR?J.customData:J;if(!q)return null;if(!(J instanceof se.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return R.P.credentialFromResult(J);const W=q.providerId;if(!W||W===R.o.PASSWORD)return null;let Ce;switch(W){case R.o.GOOGLE:Ce=R.Q;break;case R.o.FACEBOOK:Ce=R.N;break;case R.o.GITHUB:Ce=R.T;break;case R.o.TWITTER:Ce=R.W;break;default:const{oauthIdToken:Ye,oauthAccessToken:ot,oauthTokenSecret:Et,pendingToken:Ht,nonce:Rt}=q;return ot||Et||Ye||Ht?Ht?W.startsWith("saml.")?R.aL._create(W,Ht):R.J._fromParams({providerId:W,signInMethod:W,pendingToken:Ht,idToken:Ye,accessToken:ot}):new R.U(W).credential({idToken:Ye,accessToken:ot,rawNonce:Rt}):null}return J instanceof se.ZR?Ce.credentialFromError(J):Ce.credentialFromResult(J)}function dn(J,q){return q.catch(W=>{throw W instanceof se.ZR&&function Di(J,q){var W,Ce;const Ye=null===(W=q.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ce=q)||void 0===Ce?void 0:Ce.code))q.resolver=new $(J,R.an(J,q));else if(Ye){const ot=Nn(q),Et=q;ot&&(Et.credential=ot,Et.tenantId=Ye.tenantId||void 0,Et.email=Ye.email||void 0,Et.phoneNumber=Ye.phoneNumber||void 0)}}(J,W),W}).then(W=>{const Ye=W.user;return{operationType:W.operationType,credential:Lt(W),additionalUserInfo:R.al(W),user:U.getOrCreate(Ye)}})}function ct(J,q){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(J,q){const W=yield q;return{verificationId:W.verificationId,confirm:Ce=>dn(J,W.confirm(Ce))}})).apply(this,arguments)}class ${constructor(q,W){this.resolver=W,this.auth=function ui(J){return J.wrapped()}(q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return dn(ai(this.auth),this.resolver.resolveSignIn(q))}}class U{constructor(q){this._delegate=q,this.multiFactor=R.ao(q)}static getOrCreate(q){return U.USER_MAP.has(q)||U.USER_MAP.set(q,new U(q)),U.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var W=this;return(0,p.Z)(function*(){return dn(W.auth,R.Z(W._delegate,q))})()}linkWithPhoneNumber(q,W){var Ce=this;return(0,p.Z)(function*(){return ct(Ce.auth,R.l(Ce._delegate,q,W))})()}linkWithPopup(q){var W=this;return(0,p.Z)(function*(){return dn(W.auth,R.d(W._delegate,q,rt))})()}linkWithRedirect(q){var W=this;return(0,p.Z)(function*(){return yield wn(R.aE(W.auth)),R.g(W._delegate,q,rt)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var W=this;return(0,p.Z)(function*(){return dn(W.auth,R._(W._delegate,q))})()}reauthenticateWithPhoneNumber(q,W){return ct(this.auth,R.r(this._delegate,q,W))}reauthenticateWithPopup(q){return dn(this.auth,R.e(this._delegate,q,rt))}reauthenticateWithRedirect(q){var W=this;return(0,p.Z)(function*(){return yield wn(R.aE(W.auth)),R.h(W._delegate,q,rt)})()}sendEmailVerification(q){return R.ab(this._delegate,q)}unlink(q){var W=this;return(0,p.Z)(function*(){return yield R.ak(W._delegate,q),W})()}updateEmail(q){return R.ag(this._delegate,q)}updatePassword(q){return R.ah(this._delegate,q)}updatePhoneNumber(q){return R.u(this._delegate,q)}updateProfile(q){return R.af(this._delegate,q)}verifyBeforeUpdateEmail(q,W){return R.ac(this._delegate,q,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}U.USER_MAP=new WeakMap;const L=R.ax;let B=(()=>{class J{constructor(W,Ce){if(this.app=W,Ce.isInitialized())return this._delegate=Ce.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ye}=W.options;L(Ye,"invalid-api-key",{appName:W.name}),L(Ye,"invalid-api-key",{appName:W.name});const ot="undefined"!=typeof window?rt:void 0;this._delegate=Ce.initialize({options:{persistence:Me(Ye,W.name),popupRedirectResolver:ot}}),this._delegate._updateErrorMap(R.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?U.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Ce){R.G(this._delegate,W,Ce)}applyActionCode(W){return R.a2(this._delegate,W)}checkActionCode(W){return R.a3(this._delegate,W)}confirmPasswordReset(W,Ce){return R.a1(this._delegate,W,Ce)}createUserWithEmailAndPassword(W,Ce){var Ye=this;return(0,p.Z)(function*(){return dn(Ye._delegate,R.a5(Ye._delegate,W,Ce))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return R.aa(this._delegate,W)}isSignInWithEmailLink(W){return R.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,p.Z)(function*(){L(Rn(),W._delegate,"operation-not-supported-in-this-environment");const Ce=yield R.j(W._delegate,rt);return Ce?dn(W._delegate,Promise.resolve(Ce)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function on(J,q){(0,R.aE)(J)._logFramework(q)}(this._delegate,W)}onAuthStateChanged(W,Ce,Ye){const{next:ot,error:Et,complete:Ht}=H(W,Ce,Ye);return this._delegate.onAuthStateChanged(ot,Et,Ht)}onIdTokenChanged(W,Ce,Ye){const{next:ot,error:Et,complete:Ht}=H(W,Ce,Ye);return this._delegate.onIdTokenChanged(ot,Et,Ht)}sendSignInLinkToEmail(W,Ce){return R.a7(this._delegate,W,Ce)}sendPasswordResetEmail(W,Ce){return R.a0(this._delegate,W,Ce||void 0)}setPersistence(W){var Ce=this;return(0,p.Z)(function*(){let Ye;switch(function er(J,q){qn(Object.values(nn).includes(q),J,"invalid-persistence-type"),(0,se.b$)()?qn(q!==nn.SESSION,J,"unsupported-persistence-type"):(0,se.UG)()?qn(q===nn.NONE,J,"unsupported-persistence-type"):Ii()?qn(q===nn.NONE||q===nn.LOCAL&&(0,se.hl)(),J,"unsupported-persistence-type"):qn(q===nn.NONE||oi(),J,"unsupported-persistence-type")}(Ce._delegate,W),W){case nn.SESSION:Ye=R.a;break;case nn.LOCAL:Ye=(yield R.ay(R.i)._isAvailable())?R.i:R.b;break;case nn.NONE:Ye=R.L;break;default:return R.at("argument-error",{appName:Ce._delegate.name})}return Ce._delegate.setPersistence(Ye)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return dn(this._delegate,R.X(this._delegate))}signInWithCredential(W){return dn(this._delegate,R.Y(this._delegate,W))}signInWithCustomToken(W){return dn(this._delegate,R.$(this._delegate,W))}signInWithEmailAndPassword(W,Ce){return dn(this._delegate,R.a6(this._delegate,W,Ce))}signInWithEmailLink(W,Ce){return dn(this._delegate,R.a9(this._delegate,W,Ce))}signInWithPhoneNumber(W,Ce){return ct(this._delegate,R.s(this._delegate,W,Ce))}signInWithPopup(W){var Ce=this;return(0,p.Z)(function*(){return L(Rn(),Ce._delegate,"operation-not-supported-in-this-environment"),dn(Ce._delegate,R.c(Ce._delegate,W,rt))})()}signInWithRedirect(W){var Ce=this;return(0,p.Z)(function*(){return L(Rn(),Ce._delegate,"operation-not-supported-in-this-environment"),yield wn(Ce._delegate),R.f(Ce._delegate,W,rt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return R.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=nn,J})();function H(J,q,W){let Ce=J;"function"!=typeof J&&({next:Ce,error:q,complete:W}=J);const Ye=Ce;return{next:Et=>Ye(Et&&U.getOrCreate(Et)),error:q,complete:W}}function Me(J,q){const W=function Cs(J,q){const W=$t();if(!W)return[];const Ce=R.az(Or,J,q);switch(W.getItem(Ce)){case nn.NONE:return[R.L];case nn.LOCAL:return[R.i,R.a];case nn.SESSION:return[R.a];default:return[]}}(J,q);if("undefined"!=typeof self&&!W.includes(R.i)&&W.push(R.i),"undefined"!=typeof window)for(const Ce of[R.b,R.a])W.includes(Ce)||W.push(Ce);return W.includes(R.L)||W.push(R.L),W}class He{constructor(){this.providerId="phone",this._delegate=new R.P(ai(V.Z.auth()))}static credential(q,W){return R.P.credential(q,W)}verifyPhoneNumber(q,W){return this._delegate.verifyPhoneNumber(q,W)}unwrap(){return this._delegate}}He.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,He.PROVIDER_ID=R.P.PROVIDER_ID;const yt=R.ax;class Qt{constructor(q,W,Ce=V.Z.app()){var Ye;yt(null===(Ye=Ce.options)||void 0===Ye?void 0:Ye.apiKey,"invalid-api-key",{appName:Ce.name}),this._delegate=new R.R(q,W,Ce.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Kn(J){J.INTERNAL.registerComponent(new pe.wA("auth-compat",q=>{const W=q.getProvider("app-compat").getImmediate(),Ce=q.getProvider("auth");return new B(W,Ce)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.M,FacebookAuthProvider:R.N,GithubAuthProvider:R.T,GoogleAuthProvider:R.Q,OAuthProvider:R.U,SAMLAuthProvider:R.V,PhoneAuthProvider:He,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:Qt,TwitterAuthProvider:R.W,Auth:B,AuthCredential:R.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.18")}(V.Z)},8306:(tt,De,P)=>{P.d(De,{y:()=>z});var p=P(2961),V=P(727),R=P(8822),se=P(4671);var pe=P(2416),ae=P(576),ve=P(2806);let z=(()=>{class xe{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const fe=new xe;return fe.source=this,fe.operator=Be,fe}subscribe(Be,fe,be){const We=function $e(xe){return xe&&xe instanceof p.Lv||function re(xe){return xe&&(0,ae.m)(xe.next)&&(0,ae.m)(xe.error)&&(0,ae.m)(xe.complete)}(xe)&&(0,V.Nn)(xe)}(Be)?Be:new p.Hp(Be,fe,be);return(0,ve.x)(()=>{const{operator:Ge,source:Oe}=this;We.add(Ge?Ge.call(We,Oe):Oe?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Be){try{return this._subscribe(Be)}catch(fe){Be.error(fe)}}forEach(Be,fe){return new(fe=j(fe))((be,We)=>{const Ge=new p.Hp({next:Oe=>{try{Be(Oe)}catch(Ae){We(Ae),Ge.unsubscribe()}},error:We,complete:be});this.subscribe(Ge)})}_subscribe(Be){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Be)}[R.L](){return this}pipe(...Be){return function ge(xe){return 0===xe.length?se.y:1===xe.length?xe[0]:function(Be){return xe.reduce((fe,be)=>be(fe),Be)}}(Be)(this)}toPromise(Be){return new(Be=j(Be))((fe,be)=>{let We;this.subscribe(Ge=>We=Ge,Ge=>be(Ge),()=>fe(We))})}}return xe.create=ke=>new xe(ke),xe})();function j(xe){var ke;return null!==(ke=null!=xe?xe:pe.v.Promise)&&void 0!==ke?ke:Promise}},7579:(tt,De,P)=>{P.d(De,{x:()=>pe});var p=P(8306),V=P(727);const se=(0,P(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=P(8737),ge=P(2806);let pe=(()=>{class ve extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const re=new ae(this,this);return re.operator=j,re}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(j)}})}error(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:re}=this;for(;re.length;)re.shift().error(j)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:re,isStopped:$e,observers:xe}=this;return re||$e?V.Lc:(this.currentObservers=null,xe.push(j),new V.w0(()=>{this.currentObservers=null,(0,le.P)(xe,j)}))}_checkFinalizedStatuses(j){const{hasError:re,thrownError:$e,isStopped:xe}=this;re?j.error($e):xe&&j.complete()}asObservable(){const j=new p.y;return j.source=this,j}}return ve.create=(z,j)=>new ae(z,j),ve})();class ae extends pe{constructor(z,j){super(),this.destination=z,this.source=j}next(z){var j,re;null===(re=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===re||re.call(j,z)}error(z){var j,re;null===(re=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===re||re.call(j,z)}complete(){var z,j;null===(j=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===j||j.call(z)}_subscribe(z){var j,re;return null!==(re=null===(j=this.source)||void 0===j?void 0:j.subscribe(z))&&void 0!==re?re:V.Lc}}},2961:(tt,De,P)=>{P.d(De,{Hp:()=>Be,Lv:()=>re});var p=P(576),V=P(727),R=P(2416),se=P(7849);function le(){}const ge=ve("C",void 0,void 0);function ve(Oe,Ae,we){return{kind:Oe,value:Ae,error:we}}var z=P(3410),j=P(2806);class re extends V.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,V.Nn)(Ae)&&Ae.add(this)):this.destination=Ge}static create(Ae,we,qe){return new Be(Ae,we,qe)}next(Ae){this.isStopped?We(function ae(Oe){return ve("N",Oe,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?We(function pe(Oe){return ve("E",void 0,Oe)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?We(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function xe(Oe,Ae){return $e.call(Oe,Ae)}class ke{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:we}=this;if(we.next)try{we.next(Ae)}catch(qe){fe(qe)}}error(Ae){const{partialObserver:we}=this;if(we.error)try{we.error(Ae)}catch(qe){fe(qe)}else fe(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(we){fe(we)}}}class Be extends re{constructor(Ae,we,qe){let te;if(super(),(0,p.m)(Ae)||!Ae)te={next:null!=Ae?Ae:void 0,error:null!=we?we:void 0,complete:null!=qe?qe:void 0};else{let he;this&&R.v.useDeprecatedNextContext?(he=Object.create(Ae),he.unsubscribe=()=>this.unsubscribe(),te={next:Ae.next&&xe(Ae.next,he),error:Ae.error&&xe(Ae.error,he),complete:Ae.complete&&xe(Ae.complete,he)}):te=Ae}this.destination=new ke(te)}}function fe(Oe){R.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Oe):(0,se.h)(Oe)}function We(Oe,Ae){const{onStoppedNotification:we}=R.v;we&&z.z.setTimeout(()=>we(Oe,Ae))}const Ge={closed:!0,next:le,error:function be(Oe){throw Oe},complete:le}},727:(tt,De,P)=>{P.d(De,{Lc:()=>ge,w0:()=>le,Nn:()=>pe});var p=P(576);const R=(0,P(3888).d)(ve=>function(j){ve(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((re,$e)=>`${$e+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=P(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const xe of j)xe.remove(this);else j.remove(this);const{initialTeardown:re}=this;if((0,p.m)(re))try{re()}catch(xe){z=xe instanceof R?xe.errors:[xe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const xe of $e)try{ae(xe)}catch(ke){z=null!=z?z:[],ke instanceof R?z=[...z,...ke.errors]:z.push(ke)}}if(z)throw new R(z)}}add(z){var j;if(z&&z!==this)if(this.closed)ae(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(z)}}_hasParent(z){const{_parentage:j}=this;return j===z||Array.isArray(j)&&j.includes(z)}_addParent(z){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(z),j):j?[j,z]:z}_removeParent(z){const{_parentage:j}=this;j===z?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,z)}remove(z){const{_finalizers:j}=this;j&&(0,se.P)(j,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const ge=le.EMPTY;function pe(ve){return ve instanceof le||ve&&"closed"in ve&&(0,p.m)(ve.remove)&&(0,p.m)(ve.add)&&(0,p.m)(ve.unsubscribe)}function ae(ve){(0,p.m)(ve)?ve():ve.unsubscribe()}},2416:(tt,De,P)=>{P.d(De,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(tt,De,P)=>{P.d(De,{E:()=>V});const V=new(P(8306).y)(le=>le.complete())},8996:(tt,De,P)=>{P.d(De,{D:()=>Ae});var p=P(8421),V=P(5363),R=P(9468),ge=P(8306),ae=P(2202),ve=P(576),z=P(9672);function re(we,qe){if(!we)throw new Error("Iterable cannot be null");return new ge.y(te=>{(0,z.f)(te,qe,()=>{const he=we[Symbol.asyncIterator]();(0,z.f)(te,qe,()=>{he.next().then(_e=>{_e.done?te.complete():te.next(_e.value)})},0,!0)})})}var $e=P(3670),xe=P(8239),ke=P(1144),Be=P(6495),fe=P(2206),be=P(4532),We=P(3260);function Ae(we,qe){return qe?function Oe(we,qe){if(null!=we){if((0,$e.c)(we))return function se(we,qe){return(0,p.Xf)(we).pipe((0,R.R)(qe),(0,V.Q)(qe))}(we,qe);if((0,ke.z)(we))return function pe(we,qe){return new ge.y(te=>{let he=0;return qe.schedule(function(){he===we.length?te.complete():(te.next(we[he++]),te.closed||this.schedule())})})}(we,qe);if((0,xe.t)(we))return function le(we,qe){return(0,p.Xf)(we).pipe((0,R.R)(qe),(0,V.Q)(qe))}(we,qe);if((0,fe.D)(we))return re(we,qe);if((0,Be.T)(we))return function j(we,qe){return new ge.y(te=>{let he;return(0,z.f)(te,qe,()=>{he=we[ae.h](),(0,z.f)(te,qe,()=>{let _e,Y;try{({value:_e,done:Y}=he.next())}catch(ne){return void te.error(ne)}Y?te.complete():te.next(_e)},0,!0)}),()=>(0,ve.m)(null==he?void 0:he.return)&&he.return()})}(we,qe);if((0,We.L)(we))return function Ge(we,qe){return re((0,We.Q)(we),qe)}(we,qe)}throw(0,be.z)(we)}(we,qe):(0,p.Xf)(we)}},8421:(tt,De,P)=>{P.d(De,{Xf:()=>$e});var p=P(655),V=P(1144),R=P(8239),se=P(8306),le=P(3670),ge=P(2206),pe=P(4532),ae=P(6495),ve=P(3260),z=P(576),j=P(7849),re=P(8822);function $e(Oe){if(Oe instanceof se.y)return Oe;if(null!=Oe){if((0,le.c)(Oe))return function xe(Oe){return new se.y(Ae=>{const we=Oe[re.L]();if((0,z.m)(we.subscribe))return we.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Oe);if((0,V.z)(Oe))return function ke(Oe){return new se.y(Ae=>{for(let we=0;we<Oe.length&&!Ae.closed;we++)Ae.next(Oe[we]);Ae.complete()})}(Oe);if((0,R.t)(Oe))return function Be(Oe){return new se.y(Ae=>{Oe.then(we=>{Ae.closed||(Ae.next(we),Ae.complete())},we=>Ae.error(we)).then(null,j.h)})}(Oe);if((0,ge.D)(Oe))return be(Oe);if((0,ae.T)(Oe))return function fe(Oe){return new se.y(Ae=>{for(const we of Oe)if(Ae.next(we),Ae.closed)return;Ae.complete()})}(Oe);if((0,ve.L)(Oe))return function We(Oe){return be((0,ve.Q)(Oe))}(Oe)}throw(0,pe.z)(Oe)}function be(Oe){return new se.y(Ae=>{(function Ge(Oe,Ae){var we,qe,te,he;return(0,p.mG)(this,void 0,void 0,function*(){try{for(we=(0,p.KL)(Oe);!(qe=yield we.next()).done;)if(Ae.next(qe.value),Ae.closed)return}catch(_e){te={error:_e}}finally{try{qe&&!qe.done&&(he=we.return)&&(yield he.call(we))}finally{if(te)throw te.error}}Ae.complete()})})(Oe,Ae).catch(we=>Ae.error(we))})}},6451:(tt,De,P)=>{P.d(De,{T:()=>ge});var p=P(8189),V=P(8421),R=P(515),se=P(7669),le=P(8996);function ge(...pe){const ae=(0,se.yG)(pe),ve=(0,se._6)(pe,1/0),z=pe;return z.length?1===z.length?(0,V.Xf)(z[0]):(0,p.J)(ve)((0,le.D)(z,ae)):R.E}},5403:(tt,De,P)=>{P.d(De,{x:()=>V});var p=P(2961);function V(se,le,ge,pe,ae){return new R(se,le,ge,pe,ae)}class R extends p.Lv{constructor(le,ge,pe,ae,ve,z){super(le),this.onFinalize=ve,this.shouldUnsubscribe=z,this._next=ge?function(j){try{ge(j)}catch(re){le.error(re)}}:super._next,this._error=ae?function(j){try{ae(j)}catch(re){le.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){le.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(tt,De,P)=>{P.d(De,{U:()=>R});var p=P(4482),V=P(5403);function R(se,le){return(0,p.e)((ge,pe)=>{let ae=0;ge.subscribe((0,V.x)(pe,ve=>{pe.next(se.call(le,ve,ae++))}))})}},8189:(tt,De,P)=>{P.d(De,{J:()=>R});var p=P(5577),V=P(4671);function R(se=1/0){return(0,p.z)(V.y,se)}},5577:(tt,De,P)=>{P.d(De,{z:()=>ae});var p=P(4004),V=P(8421),R=P(4482),se=P(9672),le=P(5403),pe=P(576);function ae(ve,z,j=1/0){return(0,pe.m)(z)?ae((re,$e)=>(0,p.U)((xe,ke)=>z(re,xe,$e,ke))((0,V.Xf)(ve(re,$e))),j):("number"==typeof z&&(j=z),(0,R.e)((re,$e)=>function ge(ve,z,j,re,$e,xe,ke,Be){const fe=[];let be=0,We=0,Ge=!1;const Oe=()=>{Ge&&!fe.length&&!be&&z.complete()},Ae=qe=>be<re?we(qe):fe.push(qe),we=qe=>{xe&&z.next(qe),be++;let te=!1;(0,V.Xf)(j(qe,We++)).subscribe((0,le.x)(z,he=>{null==$e||$e(he),xe?Ae(he):z.next(he)},()=>{te=!0},void 0,()=>{if(te)try{for(be--;fe.length&&be<re;){const he=fe.shift();ke?(0,se.f)(z,ke,()=>we(he)):we(he)}Oe()}catch(he){z.error(he)}}))};return ve.subscribe((0,le.x)(z,Ae,()=>{Ge=!0,Oe()})),()=>{null==Be||Be()}}(re,$e,ve,j)))}},5363:(tt,De,P)=>{P.d(De,{Q:()=>se});var p=P(9672),V=P(4482),R=P(5403);function se(le,ge=0){return(0,V.e)((pe,ae)=>{pe.subscribe((0,R.x)(ae,ve=>(0,p.f)(ae,le,()=>ae.next(ve),ge),()=>(0,p.f)(ae,le,()=>ae.complete(),ge),ve=>(0,p.f)(ae,le,()=>ae.error(ve),ge)))})}},3099:(tt,De,P)=>{P.d(De,{B:()=>le});var p=P(8421),V=P(7579),R=P(2961),se=P(4482);function le(pe={}){const{connector:ae=(()=>new V.x),resetOnError:ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:j=!0}=pe;return re=>{let $e,xe,ke,Be=0,fe=!1,be=!1;const We=()=>{null==xe||xe.unsubscribe(),xe=void 0},Ge=()=>{We(),$e=ke=void 0,fe=be=!1},Oe=()=>{const Ae=$e;Ge(),null==Ae||Ae.unsubscribe()};return(0,se.e)((Ae,we)=>{Be++,!be&&!fe&&We();const qe=ke=null!=ke?ke:ae();we.add(()=>{Be--,0===Be&&!be&&!fe&&(xe=ge(Oe,j))}),qe.subscribe(we),!$e&&Be>0&&($e=new R.Hp({next:te=>qe.next(te),error:te=>{be=!0,We(),xe=ge(Ge,ve,te),qe.error(te)},complete:()=>{fe=!0,We(),xe=ge(Ge,z),qe.complete()}}),(0,p.Xf)(Ae).subscribe($e))})(re)}}function ge(pe,ae,...ve){if(!0===ae)return void pe();if(!1===ae)return;const z=new R.Hp({next:()=>{z.unsubscribe(),pe()}});return ae(...ve).subscribe(z)}},9468:(tt,De,P)=>{P.d(De,{R:()=>V});var p=P(4482);function V(R,se=0){return(0,p.e)((le,ge)=>{ge.add(R.schedule(()=>le.subscribe(ge),se))})}},8505:(tt,De,P)=>{P.d(De,{b:()=>le});var p=P(576),V=P(4482),R=P(5403),se=P(4671);function le(ge,pe,ae){const ve=(0,p.m)(ge)||pe||ae?{next:ge,error:pe,complete:ae}:ge;return ve?(0,V.e)((z,j)=>{var re;null===(re=ve.subscribe)||void 0===re||re.call(ve);let $e=!0;z.subscribe((0,R.x)(j,xe=>{var ke;null===(ke=ve.next)||void 0===ke||ke.call(ve,xe),j.next(xe)},()=>{var xe;$e=!1,null===(xe=ve.complete)||void 0===xe||xe.call(ve),j.complete()},xe=>{var ke;$e=!1,null===(ke=ve.error)||void 0===ke||ke.call(ve,xe),j.error(xe)},()=>{var xe,ke;$e&&(null===(xe=ve.unsubscribe)||void 0===xe||xe.call(ve)),null===(ke=ve.finalize)||void 0===ke||ke.call(ve)}))}):se.y}},4408:(tt,De,P)=>{P.d(De,{o:()=>le});var p=P(727);class V extends p.w0{constructor(pe,ae){super()}schedule(pe,ae=0){return this}}const R={setInterval(ge,pe,...ae){const{delegate:ve}=R;return(null==ve?void 0:ve.setInterval)?ve.setInterval(ge,pe,...ae):setInterval(ge,pe,...ae)},clearInterval(ge){const{delegate:pe}=R;return((null==pe?void 0:pe.clearInterval)||clearInterval)(ge)},delegate:void 0};var se=P(8737);class le extends V{constructor(pe,ae){super(pe,ae),this.scheduler=pe,this.work=ae,this.pending=!1}schedule(pe,ae=0){if(this.closed)return this;this.state=pe;const ve=this.id,z=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(z,ve,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(z,this.id,ae),this}requestAsyncId(pe,ae,ve=0){return R.setInterval(pe.flush.bind(pe,this),ve)}recycleAsyncId(pe,ae,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return ae;R.clearInterval(ae)}execute(pe,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(pe,ae);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ae){let z,ve=!1;try{this.work(pe)}catch(j){ve=!0,z=j||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ae}=this,{actions:ve}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ve,this),null!=pe&&(this.id=this.recycleAsyncId(ae,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(tt,De,P)=>{P.d(De,{v:()=>R});var p=P(6063);class V{constructor(le,ge=V.now){this.schedulerActionCtor=le,this.now=ge}schedule(le,ge=0,pe){return new this.schedulerActionCtor(this,le).schedule(pe,ge)}}V.now=p.l.now;class R extends V{constructor(le,ge=V.now){super(le,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ge}=this;if(this._active)return void ge.push(le);let pe;this._active=!0;do{if(pe=le.execute(le.state,le.delay))break}while(le=ge.shift());if(this._active=!1,pe){for(;le=ge.shift();)le.unsubscribe();throw pe}}}},4986:(tt,De,P)=>{P.d(De,{z:()=>R});var p=P(4408);const R=new(P(7565).v)(p.o)},6063:(tt,De,P)=>{P.d(De,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(tt,De,P)=>{P.d(De,{z:()=>p});const p={setTimeout(V,R,...se){const{delegate:le}=p;return(null==le?void 0:le.setTimeout)?le.setTimeout(V,R,...se):setTimeout(V,R,...se)},clearTimeout(V){const{delegate:R}=p;return((null==R?void 0:R.clearTimeout)||clearTimeout)(V)},delegate:void 0}},2202:(tt,De,P)=>{P.d(De,{h:()=>V});const V=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tt,De,P)=>{P.d(De,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(tt,De,P)=>{P.d(De,{_6:()=>ge,jO:()=>se,yG:()=>le});var p=P(576);function R(pe){return pe[pe.length-1]}function se(pe){return(0,p.m)(R(pe))?pe.pop():void 0}function le(pe){return function V(pe){return pe&&(0,p.m)(pe.schedule)}(R(pe))?pe.pop():void 0}function ge(pe,ae){return"number"==typeof R(pe)?pe.pop():ae}},8737:(tt,De,P)=>{function p(V,R){if(V){const se=V.indexOf(R);0<=se&&V.splice(se,1)}}P.d(De,{P:()=>p})},3888:(tt,De,P)=>{function p(V){const se=V(le=>{Error.call(le),le.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(De,{d:()=>p})},2806:(tt,De,P)=>{P.d(De,{O:()=>se,x:()=>R});var p=P(2416);let V=null;function R(le){if(p.v.useDeprecatedSynchronousErrorHandling){const ge=!V;if(ge&&(V={errorThrown:!1,error:null}),le(),ge){const{errorThrown:pe,error:ae}=V;if(V=null,pe)throw ae}}else le()}function se(le){p.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=le)}},9672:(tt,De,P)=>{function p(V,R,se,le=0,ge=!1){const pe=R.schedule(function(){se(),ge?V.add(this.schedule(null,le)):this.unsubscribe()},le);if(V.add(pe),!ge)return pe}P.d(De,{f:()=>p})},4671:(tt,De,P)=>{function p(V){return V}P.d(De,{y:()=>p})},1144:(tt,De,P)=>{P.d(De,{z:()=>p});const p=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(tt,De,P)=>{P.d(De,{D:()=>V});var p=P(576);function V(R){return Symbol.asyncIterator&&(0,p.m)(null==R?void 0:R[Symbol.asyncIterator])}},576:(tt,De,P)=>{function p(V){return"function"==typeof V}P.d(De,{m:()=>p})},3670:(tt,De,P)=>{P.d(De,{c:()=>R});var p=P(8822),V=P(576);function R(se){return(0,V.m)(se[p.L])}},6495:(tt,De,P)=>{P.d(De,{T:()=>R});var p=P(2202),V=P(576);function R(se){return(0,V.m)(null==se?void 0:se[p.h])}},8239:(tt,De,P)=>{P.d(De,{t:()=>V});var p=P(576);function V(R){return(0,p.m)(null==R?void 0:R.then)}},3260:(tt,De,P)=>{P.d(De,{L:()=>se,Q:()=>R});var p=P(655),V=P(576);function R(le){return(0,p.FC)(this,arguments,function*(){const pe=le.getReader();try{for(;;){const{value:ae,done:ve}=yield(0,p.qq)(pe.read());if(ve)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ae)}}finally{pe.releaseLock()}})}function se(le){return(0,V.m)(null==le?void 0:le.getReader)}},4482:(tt,De,P)=>{P.d(De,{A:()=>V,e:()=>R});var p=P(576);function V(se){return(0,p.m)(null==se?void 0:se.lift)}function R(se){return le=>{if(V(le))return le.lift(function(ge){try{return se(ge,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(tt,De,P)=>{P.d(De,{h:()=>R});var p=P(2416),V=P(3410);function R(se){V.z.setTimeout(()=>{const{onUnhandledError:le}=p.v;if(!le)throw se;le(se)})}},4532:(tt,De,P)=>{function p(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(De,{z:()=>p})},655:(tt,De,P)=>{function se(Y,ne){var ie={};for(var ye in Y)Object.prototype.hasOwnProperty.call(Y,ye)&&ne.indexOf(ye)<0&&(ie[ye]=Y[ye]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(ye=Object.getOwnPropertySymbols(Y);ue<ye.length;ue++)ne.indexOf(ye[ue])<0&&Object.prototype.propertyIsEnumerable.call(Y,ye[ue])&&(ie[ye[ue]]=Y[ye[ue]])}return ie}function ae(Y,ne,ie,ye){return new(ie||(ie=Promise))(function(Fe,dt){function qt(on){try{Ke(ye.next(on))}catch(Mn){dt(Mn)}}function Ft(on){try{Ke(ye.throw(on))}catch(Mn){dt(Mn)}}function Ke(on){on.done?Fe(on.value):function ue(Fe){return Fe instanceof ie?Fe:new ie(function(dt){dt(Fe)})}(on.value).then(qt,Ft)}Ke((ye=ye.apply(Y,ne||[])).next())})}function fe(Y){return this instanceof fe?(this.v=Y,this):new fe(Y)}function be(Y,ne,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ye=ie.apply(Y,ne||[]),Fe=[];return ue={},dt("next"),dt("throw"),dt("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function dt(cn){ye[cn]&&(ue[cn]=function(en){return new Promise(function(Mt,Yt){Fe.push([cn,en,Mt,Yt])>1||qt(cn,en)})})}function qt(cn,en){try{!function Ft(cn){cn.value instanceof fe?Promise.resolve(cn.value.v).then(Ke,on):Mn(Fe[0][2],cn)}(ye[cn](en))}catch(Mt){Mn(Fe[0][3],Mt)}}function Ke(cn){qt("next",cn)}function on(cn){qt("throw",cn)}function Mn(cn,en){cn(en),Fe.shift(),Fe.length&&qt(Fe[0][0],Fe[0][1])}}function Ge(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,ne=Y[Symbol.asyncIterator];return ne?ne.call(Y):(Y=function re(Y){var ne="function"==typeof Symbol&&Symbol.iterator,ie=ne&&Y[ne],ye=0;if(ie)return ie.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ye>=Y.length&&(Y=void 0),{value:Y&&Y[ye++],done:!Y}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ie={},ye("next"),ye("throw"),ye("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ye(Fe){ie[Fe]=Y[Fe]&&function(dt){return new Promise(function(qt,Ft){!function ue(Fe,dt,qt,Ft){Promise.resolve(Ft).then(function(Ke){Fe({value:Ke,done:qt})},dt)}(qt,Ft,(dt=Y[Fe](dt)).done,dt.value)})}}}P.d(De,{FC:()=>be,KL:()=>Ge,_T:()=>se,mG:()=>ae,qq:()=>fe})},5e3:(tt,De,P)=>{P.d(De,{$8M:()=>zi,$Z:()=>vE,AFp:()=>Nw,ALo:()=>Ov,AaK:()=>ae,CHM:()=>Ja,CRH:()=>mw,CZH:()=>Qv,CqO:()=>By,EJc:()=>Lb,EpF:()=>Vy,F4k:()=>Uy,FYo:()=>uf,FiY:()=>_t,G48:()=>Jg,GfV:()=>Dv,Gpc:()=>j,JOm:()=>Uo,LFG:()=>C,LSH:()=>Gc,Lbi:()=>Pb,NdJ:()=>xl,OlP:()=>An,Oqu:()=>nv,PXZ:()=>bf,Q6J:()=>Ly,QGY:()=>$h,Qsj:()=>lf,R0b:()=>ws,RDi:()=>qu,Rgc:()=>Io,SBq:()=>Va,Sil:()=>Fw,Suo:()=>Ba,TTD:()=>na,TgZ:()=>Tl,VKq:()=>Av,VLi:()=>r_,X6Q:()=>Cf,XFs:()=>ht,Xpm:()=>He,Y36:()=>zo,YKP:()=>nw,YNc:()=>lE,Yjl:()=>Ye,Yz7:()=>en,ZZ4:()=>p_,_Bn:()=>of,_UZ:()=>Al,_Vd:()=>Dd,_c5:()=>y_,_uU:()=>AE,aQg:()=>m_,c2e:()=>kb,cJS:()=>Yt,cg1:()=>Cg,dDg:()=>ju,deG:()=>Pc,dqk:()=>Lt,eFA:()=>$w,ekj:()=>mg,g9A:()=>Pw,h0i:()=>Cd,hGG:()=>Af,hij:()=>Pl,iGM:()=>Fv,ifc:()=>$t,ip1:()=>Yv,kL8:()=>dv,lG2:()=>Ce,lcZ:()=>uw,n5z:()=>ar,oAB:()=>J,oxw:()=>$y,q4F:()=>bv,qLn:()=>dp,qOj:()=>Dy,qZA:()=>Bh,sBO:()=>es,sIi:()=>ed,s_b:()=>Lu,soG:()=>Xv,tBr:()=>wt,tb:()=>kw,tp0:()=>Cn,uIk:()=>Yp,vHH:()=>ke,vpe:()=>ki,wAp:()=>vt,xp6:()=>Km,z2F:()=>a_,zSh:()=>Bp,zs3:()=>Aa});var p=P(7579),V=P(727),R=P(8306),se=P(6451),le=P(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function pe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ae(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ae).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ve(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const z=ge({__forward_ref__:ge});function j(i){return i.__forward_ref__=j,i.toString=function(){return ae(this())},i}function re(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(z)&&i.__forward_ref__===j}class ke extends Error{constructor(s,a){super(function Be(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function Ae(i,s){const a=s?` in ${s}`:"";throw new ke(-201,`No provider for ${be(i)} found${a}`)}function Ft(i,s){null==i&&function Ke(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Yt(i){return{providers:i.providers||[],imports:i.imports||[]}}function _n(i){return Li(i,oi)||Li(i,Rn)}function Li(i,s){return i.hasOwnProperty(s)?i[s]:null}function rs(i){return i&&(i.hasOwnProperty(Ii)||i.hasOwnProperty(is))?i[Ii]:null}const oi=ge({\u0275prov:ge}),Ii=ge({\u0275inj:ge}),Rn=ge({ngInjectableDef:ge}),is=ge({ngInjectorDef:ge});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Ir;function nn(i){const s=Ir;return Ir=i,s}function qn(i,s,a){const l=_n(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ht.Optional?null:void 0!==s?s:void Ae(ae(i),"Injector")}function er(i){return{toString:i}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),$t=(()=>{return(i=$t||($t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",$t;var i})();const lt="undefined"!=typeof globalThis&&globalThis,rt="undefined"!=typeof window&&window,ai="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt=lt||"undefined"!=typeof global&&global||rt||ai,dn={},ct=[],Pr=ge({\u0275cmp:ge}),$=ge({\u0275dir:ge}),U=ge({\u0275pipe:ge}),L=ge({\u0275mod:ge}),B=ge({\u0275fac:ge}),H=ge({__NG_ELEMENT_ID__:ge});let Me=0;function He(i){return er(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||$t.Emulated,id:"c",styles:i.styles||ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,h=i.features,y=i.pipes;return l.id+=Me++,l.inputs=W(i.inputs,a),l.outputs=W(i.outputs),h&&h.forEach(_=>_(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(Qt):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(Kt):null,l})}function Qt(i){return ot(i)||function Et(i){return i[$]||null}(i)}function Kt(i){return function Ht(i){return i[U]||null}(i)}const Kn={};function J(i){return er(()=>{const s={type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Kn[i.id]=i.type),s})}function W(i,s){if(null==i)return dn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),a[c]=l,s&&(s[c]=h)}return a}const Ce=He;function Ye(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function ot(i){return i[Pr]||null}function Rt(i,s){const a=i[L]||null;if(!a&&!0===s)throw new Error(`Type ${ae(i)} does not have '\u0275mod' property.`);return a}function bi(i){return Array.isArray(i)&&"object"==typeof i[1]}function li(i){return Array.isArray(i)&&!0===i[1]}function ac(i){return 0!=(8&i.flags)}function Ga(i){return 2==(2&i.flags)}function As(i){return 1==(1&i.flags)}function ci(i){return null!==i.template}function qd(i){return 0!=(512&i[2])}function di(i,s){return i.hasOwnProperty(B)?i[B]:null}class Zs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function na(){return ra}function ra(i){return i.type.prototype.ngOnChanges&&(i.setInput=Gf),Zd}function Zd(){const i=fc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===dn)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Gf(i,s,a,l){const c=fc(i)||function ls(i,s){return i[Ys]=s}(i,{previous:dn,current:null}),h=c.current||(c.current={}),y=c.previous,_=this.declaredInputs[a],I=y[_];h[_]=new Zs(I&&I.currentValue,s,y===dn),i[l]=s}na.ngInherit=!0;const Ys="__ngSimpleChanges__";function fc(i){return i[Ys]||null}let Ka;function qu(i){Ka=i}function fn(i){return!!i.listen}const ia={createRenderer:(i,s)=>function cs(){return void 0!==Ka?Ka:"undefined"!=typeof document?document:void 0}()};function un(i){for(;Array.isArray(i);)i=i[0];return i}function Qs(i,s){return un(s[i])}function rr(i,s){return un(s[i.index])}function Pn(i,s){return i.data[s]}function ir(i,s){const a=s[i];return bi(a)?a:a[0]}function Mo(i){return 4==(4&i[2])}function Ui(i){return 128==(128&i[2])}function Kr(i,s){return null==s?null:i[s]}function Ms(i){i[18]=0}function Rs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const mt={lFrame:Cc(null),bindingsEnabled:!0};function Ro(){return mt.bindingsEnabled}function Re(){return mt.lFrame.lView}function Vt(){return mt.lFrame.tView}function Ja(i){return mt.lFrame.contextLView=i,i[8]}function mn(){let i=_c();for(;null!==i&&64===i.type;)i=i.parent;return i}function _c(){return mt.lFrame.currentTNode}function Bi(i,s){const a=mt.lFrame;a.currentTNode=i,a.isParent=s}function Yu(){return mt.lFrame.isParent}function sr(){const i=mt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Oo(){return mt.lFrame.bindingIndex++}function Ic(i,s){const a=mt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Qu(s)}function Qu(i){mt.lFrame.currentDirectiveIndex=i}function Dc(){return mt.lFrame.currentQueryIndex}function bc(i){mt.lFrame.currentQueryIndex=i}function Ju(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function la(i,s,a){if(a&ht.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||a&ht.Host||(c=Ju(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const l=mt.lFrame=eo();return l.currentTNode=s,l.lView=i,!0}function ca(i){const s=eo(),a=i[1];mt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function eo(){const i=mt.lFrame,s=null===i?null:i.child;return null===s?Cc(i):s}function Cc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Xd(){const i=mt.lFrame;return mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Xa=Xd;function Yr(){const i=Xd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function yr(){return mt.lFrame.selectedIndex}function to(i){mt.lFrame.selectedIndex=i}function Hn(){const i=mt.lFrame;return Pn(i.tView,i.selectedIndex)}function fs(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:_,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:x}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),_&&((i.contentHooks||(i.contentHooks=[])).push(a,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,_)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function da(i,s,a){Sc(i,s,3,a)}function ha(i,s,a,l){(3&i[2])===a&&Sc(i,s,a,l)}function Zn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Sc(i,s,a,l){const h=null!=l?l:-1,y=s.length-1;let _=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(_=s[I],null!=l&&_>=l)break}else s[I]<0&&(i[18]+=65536),(_<h||-1==h)&&(Wf(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Wf(i,s,a,l){const c=a[l]<0,h=a[l+1],_=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(_)}finally{}}}else try{h.call(_)}finally{}}class Fo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function $i(i,s,a){const l=fn(i);let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const y=a[c++],_=a[c++],I=a[c++];l?i.setAttribute(s,_,I,y):s.setAttributeNS(y,_,I)}else{const y=h,_=a[++c];Ti(y)?l&&i.setProperty(s,y,_):l?i.setAttribute(s,y,_):s.setAttribute(y,_),c++}}return c}function Fr(i){return 3===i||4===i||6===i}function Ti(i){return 64===i.charCodeAt(0)}function fa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Lo(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Lo(i,s,a,l,c){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const _=i[h++];if("number"==typeof _){if(_===s){y=-1;break}if(_>s){y=h-1;break}}}for(;h<i.length;){const _=i[h];if("number"==typeof _)break;if(_===a){if(null===l)return void(null!==c&&(i[h+1]=c));if(l===i[h+1])return void(i[h+2]=c)}h++,null!==l&&h++,null!==c&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==c&&i.splice(h++,0,c)}function Mc(i){return-1!==i}function pn(i){return 32767&i}function Hi(i,s){let a=function Rc(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Os=!0;function It(i){const s=Os;return Os=i,s}let nu=0;function Ps(i,s){const a=ks(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ro(l.data,i),ro(s,null),ro(l.blueprint,null));const c=pa(i,s),h=i.injectorIndex;if(Mc(c)){const y=pn(c),_=Hi(c,s),I=_[1].data;for(let T=0;T<8;T++)s[h+T]=_[y+T]|I[y+T]}return s[h+8]=c,h}function ro(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ks(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function pa(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const h=c[1],y=h.type;if(l=2===y?h.declTNode:1===y?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Gi(i,s,a){!function Yn(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(H)&&(l=a[H]),null==l&&(l=a[H]=nu++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Vo(i,s,a){if(a&ht.Optional)return i;Ae(s,"NodeInjector")}function ma(i,s,a,l){if(a&ht.Optional&&void 0===l&&(l=null),0==(a&(ht.Self|ht.Host))){const c=i[9],h=nn(void 0);try{return c?c.get(s,l,a&ht.Optional):qn(s,l,a&ht.Optional)}finally{nn(h)}}return Vo(l,s,a)}function gs(i,s,a,l=ht.Default,c){if(null!==i){const h=function Oc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(H)?i[H]:void 0;return"number"==typeof s?s>=0?255&s:ru:s}(a);if("function"==typeof h){if(!la(s,i,l))return l&ht.Host?Vo(c,a,l):ma(s,a,l,c);try{const y=h(l);if(null!=y||l&ht.Optional)return y;Ae(a)}finally{Xa()}}else if("number"==typeof h){let y=null,_=ks(i,s),I=-1,T=l&ht.Host?s[16][6]:null;for((-1===_||l&ht.SkipSelf)&&(I=-1===_?pa(i,s):s[_+8],-1!==I&&nl(l,!1)?(y=s[1],_=pn(I),s=Hi(I,s)):_=-1);-1!==_;){const x=s[1];if(or(h,_,x.data)){const k=va(_,s,a,y,l,T);if(k!==ya)return k}I=s[_+8],-1!==I&&nl(l,s[1].data[_+8]===T)&&or(h,_,s)?(y=x,_=pn(I),s=Hi(I,s)):_=-1}}}return ma(s,a,l,c)}const ya={};function ru(){return new vr(mn(),Re())}function va(i,s,a,l,c,h){const y=s[1],_=y.data[i+8],x=iu(_,y,a,null==l?Ga(_)&&Os:l!=y&&0!=(3&_.type),c&ht.Host&&h===_);return null!==x?Lr(s,y,x,_):ya}function iu(i,s,a,l,c){const h=i.providerIndexes,y=s.data,_=1048575&h,I=i.directiveStart,x=h>>20,G=c?_+x:i.directiveEnd;for(let X=l?_:_+x;X<G;X++){const Ee=y[X];if(X<I&&a===Ee||X>=I&&Ee.type===a)return X}if(c){const X=y[I];if(X&&ci(X)&&X.type===a)return I}return null}function Lr(i,s,a,l){let c=i[a];const h=s.data;if(function xc(i){return i instanceof Fo}(c)){const y=c;y.resolving&&function We(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ke(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(h[a]));const _=It(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?nn(y.injectImpl):null;la(i,l,ht.Default);try{c=i[a]=y.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Ac(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(l){const y=ra(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&nn(I),It(_),y.resolving=!1,Xa()}}return c}function or(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function nl(i,s){return!(i&ht.Self||i&ht.Host&&s)}class vr{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return gs(this._tNode,this._lView,s,l,a)}}function ar(i){return er(()=>{const s=i.prototype.constructor,a=s[B]||io(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const h=c[B]||io(c);if(h&&h!==a)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function io(i){return $e(i)?()=>{const s=io(re(i));return s&&s()}:di(i)}function zi(i){return function ga(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const h=a[c];if(Fr(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(h===s)return a[c+1];c+=2}}}return null}(mn(),i)}const Ai="__parameters__";function Wi(i,s,a){return er(()=>{const l=function ur(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...h){if(this instanceof c)return l.apply(this,h),this;const y=new c(...h);return _.annotation=y,_;function _(I,T,x){const k=I.hasOwnProperty(Ai)?I[Ai]:Object.defineProperty(I,Ai,{value:[]})[Ai];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(y),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class An{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Pc=new An("AnalyzeForEntryComponents");function Ar(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Ar(l,s)):s!==i&&s.push(l)}return s}function Qr(i,s){i.forEach(a=>Array.isArray(a)?Qr(a,s):s(a))}function il(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ea(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function lr(i,s,a){let l=Fs(i,s);return l>=0?i[1|l]=a:(l=~l,function ol(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function uo(i,s){const a=Fs(i,s);if(a>=0)return i[1|a]}function Fs(i,s){return function uu(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const h=l+(c-l>>1),y=i[h<<a];if(s===y)return h<<a;y>s?c=h:l=h+1}return~(c<<a)}(i,s,1)}const Ls={},fi="__NG_DI_FLAG__",lu="ngTempTokenPath",sh=/\n/gm,cu="__source",du=ge({provide:String,useValue:ge});let Jr;function Ut(i){const s=Jr;return Jr=i,s}function D(i,s=ht.Default){if(void 0===Jr)throw new ke(203,"");return null===Jr?qn(i,void 0,s):Jr.get(i,s&ht.Optional?null:void 0,s)}function C(i,s=ht.Default){return(function En(){return Ir}()||D)(re(i),s)}const F=C;function Z(i){const s=[];for(let a=0;a<i.length;a++){const l=re(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let c,h=ht.Default;for(let y=0;y<l.length;y++){const _=l[y],I=Ne(_);"number"==typeof I?-1===I?c=_.token:h|=I:c=_}s.push(C(c,h))}else s.push(C(l))}return s}function oe(i,s){return i[fi]=s,i.prototype[fi]=s,i}function Ne(i){return i[fi]}const wt=oe(Wi("Inject",i=>({token:i})),-1),_t=oe(Wi("Optional"),8),Cn=oe(Wi("SkipSelf"),4);class hl{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function vs(i){return i instanceof hl?i.changingThisBreaksApplicationSecurity:i}const V_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,f=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var hr=(()=>((hr=hr||{})[hr.NONE=0]="NONE",hr[hr.HTML=1]="HTML",hr[hr.STYLE=2]="STYLE",hr[hr.SCRIPT=3]="SCRIPT",hr[hr.URL=4]="URL",hr[hr.RESOURCE_URL=5]="RESOURCE_URL",hr))();function Gc(i){const s=function zc(){const i=Re();return i&&i[12]}();return s?s.sanitize(hr.URL,i)||"":function _s(i,s){const a=function ch(i){return i instanceof hl&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?vs(i):function m(i){return(i=String(i)).match(V_)||i.match(f)?i:"unsafe:"+i}(fe(i))}const H_="__ngContext__";function mi(i,s){i[H_]=s}function Mm(i){const s=function ph(i){return i[H_]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Pm(i){return i.ngOriginalError}function VI(i,...s){i.error(...s)}class dp{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function LI(i){return i&&i.ngErrorLogger||VI}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Pm(s);for(;a&&Pm(a);)a=Pm(a);return a||null}}const KI=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Lt))();function ho(i){return i instanceof Function?i():i}var Uo=(()=>((Uo=Uo||{})[Uo.Important=1]="Important",Uo[Uo.DashCase=2]="DashCase",Uo))();function Fm(i,s){return undefined(i,s)}function vh(i){const s=i[3];return li(s)?s[3]:s}function pp(i){return Y_(i[13])}function Vm(i){return Y_(i[4])}function Y_(i){for(;null!==i&&!li(i);)i=i[4];return i}function Wc(i,s,a,l,c){if(null!=l){let h,y=!1;li(l)?h=l:bi(l)&&(y=!0,l=l[0]);const _=un(l);0===i&&null!==a?null==c?n0(s,a,_):_u(s,a,_,c||null,!0):1===i&&null!==a?_u(s,a,_,c||null,!0):2===i?function c0(i,s,a){const l=vp(i,s);l&&function s0(i,s,a,l){fn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,_,y):3===i&&s.destroyNode(_),null!=h&&function Bo(i,s,a,l,c){const h=a[7];h!==un(a)&&Wc(s,i,l,h,c);for(let _=10;_<a.length;_++){const I=a[_];Eh(I[1],I,i,s,l,h)}}(s,i,h,a,c)}}function yi(i,s,a){if(fn(i))return i.createElement(s,a);{const l=null!==a?function qa(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function X_(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Rs(c,-1)),a.splice(l,1)}function mp(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&X_(c,l),s>0&&(i[a-1][4]=l[4]);const h=Ea(i,10+s);!function QI(i,s){Eh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=h[19];null!==y&&y.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function e0(i,s){if(!(256&s[2])){const a=s[11];fn(a)&&a.destroyNode&&Eh(i,s,a,3,null,null),function Um(i){let s=i[13];if(!s)return yp(i[1],i);for(;s;){let a=null;if(bi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)bi(s)&&yp(s[1],s),s=s[3];null===s&&(s=i),bi(s)&&yp(s[1],s),a=s&&s[4]}s=a}}(s)}}function yp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Bm(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Fo)){const h=a[l+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const _=c[h[y]],I=h[y+1];try{I.call(_)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function t0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+1],_="function"==typeof y?y(s):un(s[y]),I=l[c=a[h+2]],T=a[h+3];"boolean"==typeof T?_.removeEventListener(a[h],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),h+=2}else{const y=l[c=a[h+1]];a[h].call(y)}if(null!==l){for(let h=c+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&fn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&li(s[3])){a!==s[3]&&X_(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function XI(i,s,a){return function vu(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===$t.None||c===$t.Emulated)return null}return rr(l,a)}(i,s.parent,a)}function _u(i,s,a,l,c){fn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function n0(i,s,a){fn(i)?i.appendChild(s,a):s.appendChild(a)}function r0(i,s,a,l,c){null!==l?_u(i,s,a,l,c):n0(i,s,a)}function vp(i,s){return fn(i)?i.parentNode(s):s.parentNode}let a0=function jm(i,s,a){return 40&i.type?rr(i,a):null};function Kc(i,s,a,l){const c=XI(i,l,s),h=s[11],_=function o0(i,s,a){return a0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)r0(h,c,a[I],_,!1);else r0(h,c,a,_,!1)}function _p(i,s){if(null!==s){const a=s.type;if(3&a)return rr(s,i);if(4&a)return Ep(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return _p(i,l);{const c=i[s.index];return li(c)?Ep(-1,c):un(c)}}if(32&a)return Fm(s,i)()||un(i[s.index]);{const l=l0(i,s);return null!==l?Array.isArray(l)?l[0]:_p(vh(i[16]),l):_p(i,s.next)}}return null}function l0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Ep(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return _p(l,c)}return s[7]}function d0(i,s,a,l,c,h,y){for(;null!=a;){const _=l[a.index],I=a.type;if(y&&0===s&&(_&&mi(un(_),l),a.flags|=4),64!=(64&a.flags))if(8&I)d0(i,s,a.child,l,c,h,!1),Wc(s,i,c,_,h);else if(32&I){const T=Fm(a,l);let x;for(;x=T();)Wc(s,i,c,x,h);Wc(s,i,c,_,h)}else 16&I?Eu(i,s,l,a,c,h):Wc(s,i,c,_,h);a=y?a.projectionNext:a.next}}function Eh(i,s,a,l,c,h){d0(a,l,i.firstChild,s,c,h,!1)}function Eu(i,s,a,l,c,h){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Wc(s,i,c,I[T],h);else d0(i,s,I,y[3],c,h,!0)}function Hm(i,s,a){fn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Gm(i,s,a){fn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function f0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===l||i.charCodeAt(c+h)<=32)return c}a=c+1}}const wh="ng-template";function wu(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==f0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function zm(i){return 4===i.type&&i.value!==wh}function vi(i,s,a){return s===(4!==i.type||a?i.value:wh)}function Iu(i,s,a){let l=4;const c=i.attrs||[],h=function g0(i){for(let s=0;s<i.length;s++)if(Fr(i[s]))return s;return i.length}(c);let y=!1;for(let _=0;_<s.length;_++){const I=s[_];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!vi(i,I,a)||""===I&&1===s.length){if(fo(l))return!1;y=!0}}else{const T=8&l?I:s[++_];if(8&l&&null!==i.attrs){if(!wu(i.attrs,T,a)){if(fo(l))return!1;y=!0}continue}const k=wp(8&l?"class":I,c,zm(i),a);if(-1===k){if(fo(l))return!1;y=!0;continue}if(""!==T){let G;G=k>h?"":c[k+1].toLowerCase();const X=8&l?G:null;if(X&&-1!==f0(X,T,0)||2&l&&T!==G){if(fo(l))return!1;y=!0}}}}else{if(!y&&!fo(l)&&!fo(I))return!1;if(y&&fo(I))continue;y=!1,l=I|1&l}}return fo(l)||y}function fo(i){return 0==(1&i)}function wp(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let h=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)h=!0;else{if(1===y||2===y){let _=s[++c];for(;"string"==typeof _;)_=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=h?1:2}return-1}return function m0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Wm(i,s,a=!1){for(let l=0;l<s.length;l++)if(Iu(i,s[l],a))return!0;return!1}function qm(i,s){return i?":not("+s.trim()+")":s}function v0(i){let s=i[0],a=1,l=2,c="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const _=i[++a];c+="["+y+(_.length>0?'="'+_+'"':"")+"]"}else 8&l?c+="."+y:4&l&&(c+=" "+y);else""!==c&&!fo(y)&&(s+=qm(h,c),c=""),l=y,h=h||!fo(l);a++}return""!==c&&(s+=qm(h,c)),s}const At={};function Km(i){Zm(Vt(),Re(),yr()+i,!1)}function Zm(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&da(s,h,a)}else{const h=i.preOrderHooks;null!==h&&ha(s,h,0,a)}to(a)}function Dp(i,s){return i<<17|s<<2}function js(i){return i>>17&32767}function bp(i){return 2|i}function po(i){return(131068&i)>>2}function Cp(i,s){return-131069&i|s<<2}function Tp(i){return 1|i}function aD(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],h=a[l+1];if(-1!==h){const y=i.data[h];bc(c),y.contentQueries(2,s[h],h)}}}function Zc(i,s,a,l,c,h,y,_,I,T){const x=s.blueprint.slice();return x[0]=c,x[2]=140|l,Ms(x),x[3]=x[15]=i,x[8]=a,x[10]=y||i&&i[10],x[11]=_||i&&i[11],x[12]=I||i&&i[12]||null,x[9]=T||i&&i[9]||null,x[6]=h,x[16]=2==s.type?i[16]:x,x}function Du(i,s,a,l,c){let h=i.data[s];if(null===h)h=function Ah(i,s,a,l,c){const h=_c(),y=Yu(),I=i.data[s]=function x0(i,s,a,l,c,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==h&&(y?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,l,c),function Jd(){return mt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=c;const y=function hs(){const i=mt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return Bi(h,!0),h}function Sh(i,s,a,l){if(0===a)return-1;const c=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function _l(i,s,a){ca(s);try{const l=i.viewQuery;null!==l&&Ph(1,l,a);const c=i.template;null!==c&&El(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&aD(i,s),i.staticViewQueries&&Ph(2,i.viewQuery,a);const h=i.components;null!==h&&function uD(i,s){for(let a=0;a<s.length;a++)yD(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Yr()}}function $o(i,s,a,l){const c=s[2];if(256!=(256&c)){ca(s);try{Ms(s),function No(i){return mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&El(i,s,a,2,l);const y=3==(3&c);if(y){const T=i.preOrderCheckHooks;null!==T&&da(s,T,null)}else{const T=i.preOrderHooks;null!==T&&ha(s,T,0,null),Zn(s,0)}if(function U0(i){for(let s=pp(i);null!==s;s=Vm(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],h=c[3];0==(1024&c[2])&&Rs(h,1),c[2]|=1024}}}(s),function gD(i){for(let s=pp(i);null!==s;s=Vm(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Ui(l)&&$o(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&aD(i,s),y){const T=i.contentCheckHooks;null!==T&&da(s,T)}else{const T=i.contentHooks;null!==T&&ha(s,T,1),Zn(s,1)}!function T0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)to(~c);else{const h=c,y=a[++l],_=a[++l];Ic(y,h),_(2,s[h])}}}finally{to(-1)}}(i,s);const _=i.components;null!==_&&function uy(i,s){for(let a=0;a<s.length;a++)mD(i,s[a])}(s,_);const I=i.viewQuery;if(null!==I&&Ph(2,I,l),y){const T=i.viewCheckHooks;null!==T&&da(s,T)}else{const T=i.viewHooks;null!==T&&ha(s,T,2),Zn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Rs(s[3],-1))}finally{Yr()}}}function Mp(i,s,a,l){const c=s[10],y=Mo(s);try{!y&&c.begin&&c.begin(),y&&_l(i,s,l),$o(i,s,a,l)}finally{!y&&c.end&&c.end()}}function El(i,s,a,l,c){const h=yr(),y=2&l;try{to(-1),y&&s.length>20&&Zm(i,s,20,!1),a(l,c)}finally{to(h)}}function ly(i,s,a){!Ro()||(function dD(i,s,a,l){const c=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Ps(a,s),mi(l,s);const y=a.initialInputs;for(let _=c;_<h;_++){const I=i.data[_],T=ci(I);T&&aA(s,a,I);const x=Lr(s,i,_,a);mi(x,s),null!==y&&V0(0,_-c,x,I,0,y),T&&(ir(a.index,s)[8]=x)}}(i,s,a,rr(a,s)),128==(128&a.flags)&&function O0(i,s,a){const l=a.directiveStart,c=a.directiveEnd,y=a.index,_=function ua(){return mt.lFrame.currentDirectiveIndex}();try{to(y);for(let I=l;I<c;I++){const T=i.data[I],x=s[I];Qu(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&P0(T,x)}}finally{to(-1),Qu(_)}}(i,s,a))}function xh(i,s,a=rr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let h=0;h<l.length;h+=2){const y=l[h+1],_=-1===y?a(s,i):i[y];i[c++]=_}}}function cy(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Qc(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Qc(i,s,a,l,c,h,y,_,I,T){const x=20+l,k=x+c,G=function A0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:At);return a}(x,k),X="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:_,declTNode:s,data:G.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:X,incompleteFirstPass:!1}}function dy(i,s,a,l){const c=vy(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&$0(i).push(l,c.length-1))}function hy(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function N0(i,s,a,l){let c=!1;if(Ro()){const h=function k0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let h=0;h<l.length;h++){const y=l[h];Wm(a,y.selectors,!1)&&(c||(c=[]),Gi(Ps(a,s),i,y.type),ci(y)?(py(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===l?null:{"":-1};if(null!==h){c=!0,Pp(a,i.data.length,h.length);for(let x=0;x<h.length;x++){const k=h[x];k.providersResolver&&k.providersResolver(k)}let _=!1,I=!1,T=Sh(i,s,h.length,null);for(let x=0;x<h.length;x++){const k=h[x];a.mergedAttrs=fa(a.mergedAttrs,k.hostAttrs),L0(i,a,s,T,k),hD(T,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const G=k.type.prototype;!_&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function M0(i,s){const l=s.directiveEnd,c=i.data,h=s.attrs,y=[];let _=null,I=null;for(let T=s.directiveStart;T<l;T++){const x=c[T],k=x.inputs,G=null===h||zm(s)?null:fD(k,h);y.push(G),_=hy(k,T,_),I=hy(x.outputs,T,I)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=_,s.outputs=I}(i,a)}y&&function F0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=a[s[c+1]];if(null==h)throw new ke(-301,!1);l.push(s[c],h)}}}(a,l,y)}return a.mergedAttrs=fa(a.mergedAttrs,a.attrs),c}function cD(i,s,a,l,c,h){const y=h.hostBindings;if(y){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const I=~s.index;(function oA(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(_)!=I&&_.push(I),_.push(l,c,y)}}function P0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function py(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function hD(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;ci(s)&&(a[""]=i)}}function Pp(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function L0(i,s,a,l,c){i.data[l]=c;const h=c.factory||(c.factory=di(c.type)),y=new Fo(h,ci(c),null);i.blueprint[l]=y,a[l]=y,cD(i,s,0,l,Sh(i,a,c.hostVars,At),c)}function aA(i,s,a){const l=rr(s,i),c=cy(a),h=i[10],y=Fp(i,Zc(i,c,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=y}function mo(i,s,a,l,c,h){const y=rr(i,s);!function gy(i,s,a,l,c,h,y){if(null==h)fn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const _=null==y?fe(h):y(h,l||"",c);fn(i)?i.setAttribute(s,c,_,a):a?s.setAttributeNS(a,c,_):s.setAttribute(c,_)}}(s[11],y,h,i.value,a,l,c)}function V0(i,s,a,l,c,h){const y=h[s];if(null!==y){const _=l.setInput;for(let I=0;I<y.length;){const T=y[I++],x=y[I++],k=y[I++];null!==_?l.setInput(a,k,T,x):a[x]=k}}}function fD(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function kp(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function mD(i,s){const a=ir(s,i);if(Ui(a)){const l=a[1];80&a[2]?$o(l,a,l.template,a[8]):a[5]>0&&Jc(a)}}function Jc(i){for(let l=pp(i);null!==l;l=Vm(l))for(let c=10;c<l.length;c++){const h=l[c];if(1024&h[2]){const y=h[1];$o(y,h,y.template,h[8])}else h[5]>0&&Jc(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=ir(a[l],i);Ui(c)&&c[5]>0&&Jc(c)}}function yD(i,s){const a=ir(s,i),l=a[1];(function my(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),_l(l,a,a[8])}function Fp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Nh(i){for(;i;){i[2]|=64;const s=vh(i);if(qd(i)&&!s)return i;i=s}return null}function j0(i){!function yy(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Mm(a),c=l[1];Mp(c,l,c.template,a)}}(i[8])}function Ph(i,s,a){bc(0),s(i,a)}const _D=(()=>Promise.resolve(null))();function vy(i){return i[7]||(i[7]=[])}function $0(i){return i.cleanup||(i.cleanup=[])}function Lp(i,s){const a=i[9],l=a?a.get(dp,null):null;l&&l.handleError(s)}function H0(i,s,a,l,c){for(let h=0;h<a.length;){const y=a[h++],_=a[h++],I=s[y],T=i.data[y];null!==T.setInput?T.setInput(I,c,l,_):I[_]=c}}function Ho(i,s,a){const l=Qs(s,i);!function Q_(i,s,a){fn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Vp(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const _=s[y];"number"==typeof _?h=_:1==h?c=ve(c,_):2==h&&(l=ve(l,_+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Up=new An("INJECTOR",-1);class z0{get(s,a=Ls){if(a===Ls){const l=new Error(`NullInjectorError: No provider for ${ae(s)}!`);throw l.name="NullInjectorError",l}return a}}const Bp=new An("Set Injector scope."),kh={},wD={};let Fh;function _y(){return void 0===Fh&&(Fh=new z0),Fh}function W0(i,s=null,a=null,l){const c=Ey(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Ey(i,s=null,a=null,l){return new ID(i,a,s||_y(),l)}class ID{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Qr(a,_=>this.processProvider(_,s,a)),Qr([s],_=>this.processInjectorType(_,[],h)),this.records.set(Up,Il(void 0,this));const y=this.records.get(Bp);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof s?null:ae(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Ls,l=ht.Default){this.assertNotDestroyed();const c=Ut(this),h=nn(void 0);try{if(!(l&ht.SkipSelf)){let _=this.records.get(s);if(void 0===_){const I=function TD(i){return"function"==typeof i||"object"==typeof i&&i instanceof An}(s)&&_n(s);_=I&&this.injectableDefInScope(I)?Il(jp(s),kh):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(l&ht.Self?_y():this.parent).get(s,a=l&ht.Optional&&a===Ls?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[lu]=y[lu]||[]).unshift(ae(s)),c)throw y;return function ze(i,s,a,l){const c=i[lu];throw s[cu]&&c.unshift(s[cu]),i.message=function ut(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ae(s);if(Array.isArray(s))c=s.map(ae).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let _=s[y];h.push(y+":"+("string"==typeof _?JSON.stringify(_):ae(_)))}c=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(sh,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[lu]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{nn(h),Ut(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ae(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(s,a,l){if(!(s=re(s)))return!1;let c=rs(s);const h=null==c&&s.ngModule||void 0,y=void 0===h?s:h,_=-1!==l.indexOf(y);if(void 0!==h&&(c=rs(h)),null==c)return!1;if(null!=c.imports&&!_){let x;l.push(y);try{Qr(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:G,providers:X}=x[k];Qr(X,Ee=>this.processProvider(Ee,G,X||ct))}}this.injectorDefTypes.add(y);const I=di(y)||(()=>new y);this.records.set(y,Il(I,kh));const T=c.providers;if(null!=T&&!_){const x=s;Qr(T,k=>this.processProvider(k,x,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let c=Xc(s=re(s))?s:re(s&&s.provide);const h=function q0(i,s,a){return bD(i)?Il(void 0,i.useValue):Il(K0(i),kh)}(s);if(Xc(s)||!0!==s.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=Il(void 0,kh,!0),y.factory=()=>Z(y.multi),this.records.set(c,y)),c=s,y.multi.push(s)}this.records.set(c,h)}hydrate(s,a){return a.value===kh&&(a.value=wD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function CD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=re(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function jp(i){const s=_n(i),a=null!==s?s.factory:di(i);if(null!==a)return a;if(i instanceof An)throw new ke(204,!1);if(i instanceof Function)return function DD(i){const s=i.length;if(s>0)throw function wa(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new ke(204,!1);const a=function wr(i){const s=i&&(i[oi]||i[Rn]);if(s){const a=function bn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function K0(i,s,a){let l;if(Xc(i)){const c=re(i);return di(c)||jp(c)}if(bD(i))l=()=>re(i.useValue);else if(function hA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Z(i.deps||[]));else if(function dA(i){return!(!i||!i.useExisting)}(i))l=()=>C(re(i.useExisting));else{const c=re(i&&(i.useClass||i.provide));if(!function Z0(i){return!!i.deps}(i))return di(c)||jp(c);l=()=>new c(...Z(i.deps))}return l}function Il(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function bD(i){return null!==i&&"object"==typeof i&&du in i}function Xc(i){return"function"==typeof i}let Aa=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return W0({name:""},l,a,"");{const h=null!==(c=a.name)&&void 0!==c?c:"";return W0({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Ls,i.NULL=new z0,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>C(Up)}),i.__NG_ELEMENT_ID__=-1,i})();function zp(i,s){fs(Mm(i)[1],mn())}function Dy(i){let s=function xa(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(ci(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ke(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const y=i;y.inputs=Wp(i.inputs),y.declaredInputs=Wp(i.declaredInputs),y.outputs=Wp(i.outputs);const _=c.hostBindings;_&&nE(i,_);const I=c.viewQuery,T=c.contentQueries;if(I&&tE(i,I),T&&MD(i,T),pe(i.inputs,c.inputs),pe(i.declaredInputs,c.declaredInputs),pe(i.outputs,c.outputs),ci(c)&&c.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let y=0;y<h.length;y++){const _=h[y];_&&_.ngInherit&&_(i),_===Dy&&(a=!1)}}s=Object.getPrototypeOf(s)}!function xD(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=fa(c.hostAttrs,a=fa(a,c.hostAttrs))}}(l)}function Wp(i){return i===dn?{}:i===ct?[]:i}function tE(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function MD(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,h)=>{s(l,c,h),a(l,c,h)}:s}function nE(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Br=null;function Cu(){if(!Br){const i=Lt.Symbol;if(i&&i.iterator)Br=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Br=l)}}}return Br}function ed(i){return!!Kp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Cu()in i)}function Kp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function jr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Yp(i,s,a,l){const c=Re();return jr(c,Oo(),s)&&(Vt(),mo(Hn(),c,i,s,a,l)),Yp}function lE(i,s,a,l,c,h,y,_){const I=Re(),T=Vt(),x=i+20,k=T.firstCreatePass?function RD(i,s,a,l,c,h,y,_,I){const T=s.consts,x=Du(s,i,4,y||null,Kr(T,_));N0(s,a,x,Kr(T,I)),fs(s,x);const k=x.tViews=Qc(2,x,l,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,T,I,s,a,l,c,h,y):T.data[x];Bi(k,!1);const G=I[11].createComment("");Kc(T,I,G,k),mi(G,I),Fp(I,I[x]=kp(G,I,G,k)),As(k)&&ly(T,I,k),null!=y&&xh(I,k,_)}function zo(i,s=ht.Default){const a=Re();return null===a?C(i,s):gs(mn(),a,re(i),s)}function vE(){throw new Error("invalid")}function Ly(i,s,a){const l=Re();return jr(l,Oo(),s)&&function Ri(i,s,a,l,c,h,y,_){const I=rr(s,a);let x,T=s.inputs;!_&&null!=T&&(x=T[l])?(H0(i,a,x,l,c),Ga(s)&&function Rp(i,s){const a=ir(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function fy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=y?y(c,s.value||"",l):c,fn(h)?h.setProperty(I,l,c):Ti(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(Vt(),Hn(),l,i,s,l[11],a,!1),Ly}function Ra(i,s,a,l,c){const y=c?"class":"style";H0(i,a,s.inputs[y],y,l)}function Tl(i,s,a,l){const c=Re(),h=Vt(),y=20+i,_=c[11],I=c[y]=yi(_,s,function zf(){return mt.lFrame.currentNamespace}()),T=h.firstCreatePass?function _E(i,s,a,l,c,h,y){const _=s.consts,T=Du(s,i,2,c,Kr(_,h));return N0(s,a,T,Kr(_,y)),null!==T.attrs&&Vp(T,T.attrs,!1),null!==T.mergedAttrs&&Vp(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,h,c,0,s,a,l):h.data[y];Bi(T,!0);const x=T.mergedAttrs;null!==x&&$i(_,I,x);const k=T.classes;null!==k&&Gm(_,I,k);const G=T.styles;return null!==G&&Hm(_,I,G),64!=(64&T.flags)&&Kc(h,c,I,T),0===function yc(){return mt.lFrame.elementDepthCount}()&&mi(I,c),function oa(){mt.lFrame.elementDepthCount++}(),As(T)&&(ly(h,c,T),function Yc(i,s,a){if(ac(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}(h,T,c)),null!==l&&xh(c,T),Tl}function Bh(){let i=mn();Yu()?function aa(){mt.lFrame.isParent=!1}():(i=i.parent,Bi(i,!1));const s=i;!function vc(){mt.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(fs(a,i),ac(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function qf(i){return 0!=(16&i.flags)}(s)&&Ra(a,s,Re(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Tn(i){return 0!=(32&i.flags)}(s)&&Ra(a,s,Re(),s.stylesWithoutHost,!1),Bh}function Al(i,s,a,l){return Tl(i,s,a,l),Bh(),Al}function Vy(){return Re()}function $h(i){return!!i&&"function"==typeof i.then}function Uy(i){return!!i&&"function"==typeof i.subscribe}const By=Uy;function xl(i,s,a,l){const c=Re(),h=Vt(),y=mn();return function lg(i,s,a,l,c,h,y,_){const I=As(l),x=i.firstCreatePass&&$0(i),k=s[8],G=vy(s);let X=!0;if(3&l.type||_){const Ze=rr(l,s),nt=_?_(Ze):Ze,Se=G.length,ft=_?zt=>_(un(zt[l.index])):l.index;if(fn(a)){let zt=null;if(!_&&I&&(zt=function jy(i,s,a,l){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const y=c[h];if(y===a&&c[h+1]===l){const _=s[7],I=c[h+2];return _.length>I?_[I]:null}"string"==typeof y&&(h+=2)}return null}(i,s,c,l.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=h,zt.__ngLastListenerFn__=h,X=!1;else{h=Ml(l,s,k,h,!1);const ln=a.listen(nt,c,h);G.push(h,ln),x&&x.push(c,ft,Se,Se+1)}}else h=Ml(l,s,k,h,!0),nt.addEventListener(c,h,y),G.push(h),x&&x.push(c,ft,Se,y)}else h=Ml(l,s,k,h,!1);const Ee=l.outputs;let Ve;if(X&&null!==Ee&&(Ve=Ee[c])){const Ze=Ve.length;if(Ze)for(let nt=0;nt<Ze;nt+=2){const Fi=s[Ve[nt]][Ve[nt+1]].subscribe(h),Gu=G.length;G.push(h,Fi),x&&x.push(c,l.index,Gu,-(Gu+1))}}}(h,c,c[11],y,i,s,!!a,l),xl}function Hh(i,s,a,l){try{return!1!==a(l)}catch(c){return Lp(i,c),!1}}function Ml(i,s,a,l,c){return function h(y){if(y===Function)return l;const _=2&i.flags?ir(i.index,s):s;0==(32&s[2])&&Nh(_);let I=Hh(s,0,l,y),T=h.__ngNextListenerFn__;for(;T;)I=Hh(s,0,T,y)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function $y(i=1){return function eh(i){return(mt.lFrame.contextLView=function Xu(i,s){for(;i>0;)s=s[15],i--;return s}(i,mt.lFrame.contextLView))[8]}(i)}function Rl(i,s,a,l,c){const h=i[a+1],y=null===s;let _=l?js(h):po(h),I=!1;for(;0!==_&&(!1===I||y);){const x=i[_+1];Ky(i[_],s)&&(I=!0,i[_+1]=l?Tp(x):bp(x)),_=l?js(x):po(x)}I&&(i[a+1]=l?bp(h):Tp(h))}function Ky(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Fs(i,s)>=0}function mg(i,s){return function Pi(i,s,a,l){const c=Re(),h=Vt(),y=function Zr(i){const s=mt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function Qy(i,s,a,l){const c=i.data;if(null===c[a+1]){const h=c[yr()],y=function Yy(i,s){return s>=i.expandoStartIndex}(i,a);(function TE(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!y&&(s=!1),s=function bE(i,s,a,l){const c=function ko(i){const s=mt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=qh(a=yg(null,i,s,a,l),s.attrs,l),h=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=yg(c,i,s,a,l),null===h){let I=function fd(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==po(l))return i[js(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=yg(null,i,s,I[1],l),I=qh(I,s.attrs,l),function KD(i,s,a,l){i[js(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else h=function ZD(i,s,a){let l;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)l=qh(l,i[h].hostAttrs,a);return qh(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(c,h,s,l),function HD(i,s,a,l,c,h){let y=h?s.classBindings:s.styleBindings,_=js(y),I=po(y);i[l]=a;let x,T=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||Fs(k,x)>0)&&(T=!0)}else x=a;if(c)if(0!==I){const G=js(i[_+1]);i[l+1]=Dp(G,_),0!==G&&(i[G+1]=Cp(i[G+1],l)),i[_+1]=function Jm(i,s){return 131071&i|s<<17}(i[_+1],l)}else i[l+1]=Dp(_,0),0!==_&&(i[_+1]=Cp(i[_+1],l)),_=l;else i[l+1]=Dp(I,0),0===_?_=l:i[I+1]=Cp(i[I+1],l),I=l;T&&(i[l+1]=bp(i[l+1])),Rl(i,x,l,!0),Rl(i,x,l,!1),function qy(i,s,a,l,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&Fs(h,s)>=0&&(a[l+1]=Tp(a[l+1]))}(s,x,i,l,h),y=Dp(_,I),h?s.classBindings=y:s.styleBindings=y}(c,h,s,a,y,l)}}(h,i,y,l),s!==At&&jr(c,y,s)&&function vg(i,s,a,l,c,h,y,_){if(!(3&s.type))return;const I=i.data,T=I[_+1];Kh(function Xm(i){return 1==(1&i)}(T)?ev(I,s,a,c,po(T),y):void 0)||(Kh(h)||function Qm(i){return 2==(2&i)}(T)&&(h=ev(I,null,a,c,_,y)),function tD(i,s,a,l,c){const h=fn(i);if(s)c?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:Uo.DashCase;if(null==c)h?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const _="string"==typeof c&&c.endsWith("!important");_&&(c=c.slice(0,-10),y|=Uo.Important),h?i.setStyle(a,l,c,y):a.style.setProperty(l,c,_?"important":"")}}}(l,y,Qs(yr(),a),c,h))}(h,h.data[yr()],c,c[11],i,c[y+1]=function tv(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ae(vs(i)))),i}(s,a),l,y)}(i,s,null,!0),mg}function yg(i,s,a,l,c){let h=null;const y=a.directiveEnd;let _=a.directiveStylingLast;for(-1===_?_=a.directiveStart:_++;_<y&&(h=s[_],l=qh(l,h.hostAttrs,c),h!==i);)_++;return null!==i&&(a.directiveStylingLast=_),l}function qh(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?c=y:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),lr(i,y,!!a||s[++h]))}return void 0===i?null:i}function ev(i,s,a,l,c,h){const y=null===s;let _;for(;c>0;){const I=i[c],T=Array.isArray(I),x=T?I[1]:I,k=null===x;let G=a[c+1];G===At&&(G=k?ct:void 0);let X=k?uo(G,l):x===l?G:void 0;if(T&&!Kh(X)&&(X=uo(I,l)),Kh(X)&&(_=X,y))return _;const Ee=i[c+1];c=y?js(Ee):po(Ee)}if(null!==s){let I=h?s.residualClasses:s.residualStyles;null!=I&&(_=uo(I,l))}return _}function Kh(i){return void 0!==i}function AE(i,s=""){const a=Re(),l=Vt(),c=i+20,h=l.firstCreatePass?Du(l,c,1,s,null):l.data[c],y=a[c]=function gp(i,s){return fn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Kc(l,a,y,h),Bi(h,!1)}function nv(i){return Pl("",i,""),nv}function Pl(i,s,a){const l=Re(),c=function bl(i,s,a,l){return jr(i,Oo(),a)?s+fe(a)+l:At}(l,i,s,a);return c!==At&&Ho(l,yr(),c),Pl}const Zo=void 0;var VE=["en",[["a","p"],["AM","PM"],Zo],[["AM","PM"],Zo,Zo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zo,"{1} 'at' {0}",Zo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function LE(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let $s={};function Cg(i){const s=function UE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Jh(s);if(a)return a;const l=s.split("-")[0];if(a=Jh(l),a)return a;if("en"===l)return VE;throw new Error(`Missing locale data for the locale "${i}".`)}function dv(i){return Cg(i)[vt.PluralCase]}function Jh(i){return i in $s||($s[i]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[i]),$s[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Tg="en-US";let Xh=Tg;function Pg(i,s,a,l,c){if(i=re(i),Array.isArray(i))for(let h=0;h<i.length;h++)Pg(i[h],s,a,l,c);else{const h=Vt(),y=Re();let _=Xc(i)?i:re(i.provide),I=K0(i);const T=mn(),x=1048575&T.providerIndexes,k=T.directiveStart,G=T.providerIndexes>>20;if(Xc(i)||!i.multi){const X=new Fo(I,c,zo),Ee=Eo(_,s,c?x:x+G,k);-1===Ee?(Gi(Ps(T,y),h,_),jl(h,i,s.length),s.push(_),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(X),y.push(X)):(a[Ee]=X,y[Ee]=X)}else{const X=Eo(_,s,x+G,k),Ee=Eo(_,s,x,x+G),Ve=X>=0&&a[X],Ze=Ee>=0&&a[Ee];if(c&&!Ze||!c&&!Ve){Gi(Ps(T,y),h,_);const nt=function Pu(i,s,a,l,c){const h=new Fo(i,a,zo);return h.multi=[],h.index=s,h.componentProviders=0,JE(h,c,l&&!a),h}(c?sf:rf,a.length,c,l,I);!c&&Ze&&(a[Ee].providerFactory=nt),jl(h,i,s.length,0),s.push(_),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(nt),y.push(nt)}else jl(h,i,X>-1?X:Ee,JE(a[c?Ee:X],I,!c&&l));!c&&l&&Ze&&a[Ee].componentProviders++}}}function jl(i,s,a,l){const c=Xc(s),h=function fA(i){return!!i.useClass}(s);if(c||h){const I=(h?re(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[l,I]):T[x+1].push(l,I)}else T.push(a,I)}}}function JE(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Eo(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function rf(i,s,a,l){return kg(this.multi,[])}function sf(i,s,a,l){const c=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,_=Lr(a,a[1],this.providerFactory.index,l);h=_.slice(0,y),kg(c,h);for(let I=y;I<_.length;I++)h.push(_[I])}else h=[],kg(c,h);return h}function kg(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function of(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Iv(i,s,a){const l=Vt();if(l.firstCreatePass){const c=ci(i);Pg(a,l.data,l.blueprint,c,!0),Pg(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class wo{}class Id{resolveComponentFactory(s){throw function af(i){const s=Error(`No component factory found for ${ae(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Dd=(()=>{class i{}return i.NULL=new Id,i})();function Hl(){return ku(mn(),Re())}function ku(i,s){return new Va(rr(i,s))}let Va=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Hl,i})();function XE(i){return i instanceof Va?i.nativeElement:i}class uf{}let lf=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function mb(){const i=Re(),a=ir(mn().index,i);return function ew(i){return i[11]}(bi(a)?a:i)}(),i})(),yb=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class Dv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const bv=new Dv("13.3.11"),Rr={};function cf(i,s,a,l,c=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(un(h)),li(h))for(let _=10;_<h.length;_++){const I=h[_],T=I[1].firstChild;null!==T&&cf(I[1],I,T,l)}const y=a.type;if(8&y)cf(i,s,a.child,l);else if(32&y){const _=Fm(a,s);let I;for(;I=_();)l.push(I)}else if(16&y){const _=l0(s,a);if(Array.isArray(_))l.push(..._);else{const I=vh(s[16]);cf(I[1],I,_,l,!0)}}a=c?a.projectionNext:a.next}return l}class gn{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return cf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(li(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(mp(s,l),Ea(a,l))}this._attachedToViewContainer=!1}e0(this._lView[1],this._lView)}onDestroy(s){dy(this._lView[1],this._lView,null,s)}markForCheck(){Nh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Oh(i,s,a){const l=s[10];l.begin&&l.begin();try{$o(i,s,i.template,a)}catch(c){throw Lp(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _h(i,s){Eh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=s}}class vb extends gn{constructor(s){super(s),this._view=s}detectChanges(){j0(this._view)}checkNoChanges(){}get context(){return null}}class Cv extends Dd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=ot(s);return new bd(a,this.ngModule)}}function Fu(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class bd extends wo{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function _0(i){return i.map(v0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Fu(this.componentDef.inputs)}get outputs(){return Fu(this.componentDef.outputs)}create(s,a,l,c){const h=(c=c||this.ngModule)?function df(i,s){return{get:(a,l,c)=>{const h=i.get(a,Rr,c);return h!==Rr||l===Rr?h:s.get(a,l,c)}}}(s,c.injector):s,y=h.get(uf,ia),_=h.get(yb,null),I=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function Rh(i,s,a){if(fn(i))return i.selectRootElement(s,a===$t.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):yi(y.createRenderer(null,this.componentDef),T,function _b(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),k=this.componentDef.onPush?576:528,G=function Ur(i,s){return{components:[],scheduler:i||KI,clean:_D,playerHandler:s||null,flags:0}}(),X=Qc(0,null,null,1,0,null,null,null,null,null),Ee=Zc(null,X,G,k,null,null,y,I,_,h);let Ve,Ze;ca(Ee);try{const nt=function X0(i,s,a,l,c,h){const y=a[1];a[20]=i;const I=Du(y,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(Vp(I,T,!0),null!==i&&($i(c,i,T),null!==I.classes&&Gm(c,i,I.classes),null!==I.styles&&Hm(c,i,I.styles)));const x=l.createRenderer(i,s),k=Zc(a,cy(s),null,s.onPush?64:16,a[20],I,l,x,h||null,null);return y.firstCreatePass&&(Gi(Ps(I,a),y,s.type),py(y,I),Pp(I,a.length,1)),Fp(a,k),a[20]=k}(x,this.componentDef,Ee,y,I);if(x)if(l)$i(I,x,["ng-version",bv.full]);else{const{attrs:Se,classes:ft}=function Ip(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++l]):8===c&&a.push(h);else{if(!fo(c))break;c=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Se&&$i(I,x,Se),ft&&ft.length>0&&Gm(I,x,ft.join(" "))}if(Ze=Pn(X,20),void 0!==a){const Se=Ze.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const zt=a[ft];Se.push(null!=zt?Array.from(zt):null)}}Ve=function eE(i,s,a,l,c){const h=a[1],y=function sA(i,s,a){const l=mn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),L0(i,l,s,Sh(i,s,1,null),a));const c=Lr(s,i,l.directiveStart,l);mi(c,s);const h=rr(l,s);return h&&mi(h,s),c}(h,a,s);if(l.components.push(y),i[8]=y,c&&c.forEach(I=>I(y,s)),s.contentQueries){const I=mn();s.contentQueries(1,y,I.directiveStart)}const _=mn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(to(_.index),cD(a[1],_,0,_.directiveStart,_.directiveEnd,s),P0(s,y)),y}(nt,this.componentDef,Ee,G,[zp]),_l(X,Ee,null)}finally{Yr()}return new tw(this.componentType,Ve,ku(Ze,Ee),Ee,Ze)}}class tw extends class $l{}{constructor(s,a,l,c,h){super(),this.location=l,this._rootLView=c,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new vb(c),this.componentType=s}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Cd{}class nw{}const Td=new Map;class zl extends Cd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Cv(this);const l=Rt(s);this._bootstrapComponents=ho(l.bootstrap),this._r3Injector=Ey(s,a,[{provide:Cd,useValue:this},{provide:Dd,useValue:this.componentFactoryResolver}],ae(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Aa.THROW_IF_NOT_FOUND,l=ht.Default){return s===Aa||s===Cd||s===Up?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Tv extends nw{constructor(s){super(),this.moduleType=s,null!==Rt(s)&&function Ib(i){const s=new Set;!function a(l){const c=Rt(l,!0),h=c.id;null!==h&&(function rw(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ae(s)} vs ${ae(s.name)}`)}(h,Td.get(h),l),Td.set(h,l));const y=ho(c.imports);for(const _ of y)s.has(_)||(s.add(_),a(_))}(i)}(s)}create(s){return new zl(this.moduleType,s)}}function Av(i,s,a,l){return Rv(Re(),sr(),i,s,a,l)}function Rv(i,s,a,l,c,h){const y=s+a;return jr(i,y,c)?function _o(i,s,a){return i[s]=a}(i,y+1,h?l.call(h,c):l(c)):function Ei(i,s){const a=i[s];return a===At?void 0:a}(i,y+1)}function Ov(i,s){const a=Vt();let l;const c=i+20;a.firstCreatePass?(l=function aw(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const h=l.factory||(l.factory=di(l.type)),y=nn(zo);try{const _=It(!1),I=h();return It(_),function Jp(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Re(),c,I),I}finally{nn(y)}}function uw(i,s,a){const l=i+20,c=Re(),h=function ds(i,s){return i[s]}(c,l);return function hf(i,s){return i[1].data[s].pure}(c,l)?Rv(c,sr(),s,h.transform,a,h):h.transform(a)}function Bg(i){return s=>{setTimeout(i,void 0,s)}}const ki=class bb extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,h,y;let _=s,I=a||(()=>null),T=l;if(s&&"object"==typeof s){const k=s;_=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(h=k.error)||void 0===h?void 0:h.bind(k),T=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(I=Bg(I),_&&(_=Bg(_)),T&&(T=Bg(T)));const x=super.subscribe({next:_,error:I,complete:T});return s instanceof V.w0&&s.add(x),x}};function Wl(){return this._results[Cu()]()}class jg{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Cu(),l=jg.prototype;l[a]||(l[a]=Wl)}get changes(){return this._changes||(this._changes=new ki)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Ar(s);(this._changesDetected=!function rl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],h=s[l];if(a&&(c=a(c),h=a(h)),h!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Io=(()=>{class i{}return i.__NG_ELEMENT_ID__=fw,i})();const hw=Io,Md=class extends hw{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Zc(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),_l(a,l,s),new gn(l)}};function fw(){return ff(mn(),Re())}function ff(i,s){return 4&i.type?new Md(s,i,ku(i,s)):null}let Lu=(()=>{class i{}return i.__NG_ELEMENT_ID__=Cb,i})();function Cb(){return Pv(mn(),Re())}const Tb=Lu,Bn=class extends Tb{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ku(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){const s=pa(this._hostTNode,this._hostLView);if(Mc(s)){const a=Hi(s,this._hostLView),l=pn(s);return new vr(a[1].data[l+8],a)}return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=pf(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,h){const y=s&&!function ao(i){return"function"==typeof i}(s);let _;if(y)_=a;else{const k=a||{};_=k.index,l=k.injector,c=k.projectableNodes,h=k.ngModuleRef}const I=y?s:new bd(ot(s)),T=l||this.parentInjector;if(!h&&null==I.ngModule){const G=(y?T:this.parentInjector).get(Cd,null);G&&(h=G)}const x=I.create(T,c,void 0,h);return this.insert(x.hostView,_),x}insert(s,a){const l=s._lView,c=l[1];if(function Zu(i){return li(i[3])}(l)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=l[3],G=new Bn(k,k[6],k[3]);G.detach(G.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function qc(i,s,a,l){const c=10+l,h=a.length;l>0&&(a[c-1][4]=s),l<h-10?(s[4]=a[c],il(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function JI(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=128}(c,l,y,h);const _=Ep(h,y),I=l[11],T=vp(I,y[7]);return null!==T&&function J_(i,s,a,l,c,h){l[0]=c,l[6]=s,Eh(i,l,a,1,c,h)}(c,y[6],I,l,T,_),s.attachToViewContainerRef(),il(Rd(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=pf(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=mp(this._lContainer,a);l&&(Ea(Rd(this._lContainer),a),e0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=mp(this._lContainer,a);return l&&null!=Ea(Rd(this._lContainer),a)?new gn(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function pf(i){return i[8]}function Rd(i){return i[8]||(i[8]=[])}function Pv(i,s){let a;const l=s[i.index];if(li(l))a=l;else{let c;if(8&i.type)c=un(l);else{const h=s[11];c=h.createComment("");const y=rr(i,s);_u(h,vp(h,y),c,function eD(i,s){return fn(i)?i.nextSibling(s):s.nextSibling}(h,y),!1)}s[i.index]=a=kp(l,s,c,i),Fp(s,a)}return new Bn(a,i,s)}class $g{constructor(s){this.queryList=s,this.matches=null}clone(){return new $g(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vu{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let h=0;h<l;h++){const y=a.getByIndex(h);c.push(this.queries[y.indexInDeclarationView].clone())}return new Vu(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Do(s,a).matches&&this.queries[a].setDirty()}}class Yo{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Hg{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,c);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new Hg(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Gg{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Gg(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=l[c];this.matchTNodeWithReadOption(s,a,pw(a,h)),this.matchTNodeWithReadOption(s,a,iu(a,s,h,!1,!1))}else l===Io?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,iu(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Va||c===Lu||c===Io&&4&a.type)this.addMatch(a.index,-2);else{const h=iu(a,s,c,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function pw(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function kv(i,s,a,l){return-1===a?function Nd(i,s){return 11&i.type?ku(i,s):4&i.type?ff(i,s):null}(s,i):-2===a?function Sb(i,s,a){return a===Va?ku(s,i):a===Io?ff(s,i):a===Lu?Pv(s,i):void 0}(i,s,l):Lr(i,i[1],a,s)}function gr(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const h=i.data,y=a.matches,_=[];for(let I=0;I<y.length;I+=2){const T=y[I];_.push(T<0?null:kv(s,h[T],y[I+1],a.metadata.read))}c.matches=_}return c.matches}function Jt(i,s,a,l){const c=i.queries.getByIndex(a),h=c.matches;if(null!==h){const y=gr(i,s,c,a);for(let _=0;_<h.length;_+=2){const I=h[_];if(I>0)l.push(y[_/2]);else{const T=h[_+1],x=s[-I];for(let k=10;k<x.length;k++){const G=x[k];G[17]===G[3]&&Jt(G[1],G,T,l)}if(null!==x[9]){const k=x[9];for(let G=0;G<k.length;G++){const X=k[G];Jt(X[1],X,T,l)}}}}}return l}function Fv(i){const s=Re(),a=Vt(),l=Dc();bc(l+1);const c=Do(a,l);if(i.dirty&&Mo(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const h=c.crossesNgTemplate?Jt(a,s,l,[]):gr(a,s,c,l);i.reset(h,XE),i.notifyOnChanges()}return!0}return!1}function Ba(i,s,a,l){const c=Vt();if(c.firstCreatePass){const h=mn();(function Od(i,s,a){null===i.queries&&(i.queries=new Hg),i.queries.track(new Gg(s,a))})(c,new Yo(s,a,l),h.index),function yw(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Lv(i,s,a){const l=new jg(4==(4&a));dy(i,s,l,l.destroy),null===s[19]&&(s[19]=new Vu),s[19].queries.push(new $g(l))}(c,Re(),a)}function mw(){return function Ji(i,s){return i[19].queries[s].queryList}(Re(),Dc())}function Do(i,s){return i.queries.getByIndex(s)}function Ef(...i){}const Yv=new An("Application Initializer");let Qv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ef,this.reject=Ef,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if($h(h))a.push(h);else if(By(h)){const y=new Promise((_,I)=>{h.subscribe({complete:_,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(C(Yv,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Nw=new An("AppId",{providedIn:"root",factory:function Ow(){return`${Jv()}${Jv()}${Jv()}`}});function Jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pw=new An("Platform Initializer"),Pb=new An("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kw=new An("appBootstrapListener");let kb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Xv=new An("LocaleId",{providedIn:"root",factory:()=>F(Xv,ht.Optional|ht.SkipSelf)||function Fb(){return"undefined"!=typeof $localize&&$localize.locale||Tg}()}),Lb=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ub{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Fw=(()=>{class i{compileModuleSync(a){return new Tv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),h=ho(Rt(a).declarations).reduce((y,_)=>{const I=ot(_);return I&&y.push(new bd(I)),y},[]);return new Ub(l,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const e_=(()=>Promise.resolve(0))();function Er(i){"undefined"==typeof Zone?e_.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ws{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ki(!1),this.onMicrotaskEmpty=new ki(!1),this.onStable=new ki(!1),this.onError=new ki(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function t_(){let i=Lt.requestAnimationFrame,s=Lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Bb(i){const s=()=>{!function Vw(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Lt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Kg(i),i.isCheckStableRunning=!0,Qo(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Kg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,h,y,_)=>{try{return wf(i),a.invokeTask(c,h,y,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Bu(i)}},onInvoke:(a,l,c,h,y,_,I)=>{try{return wf(i),a.invoke(c,h,y,_,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Bu(i)}},onHasTask:(a,l,c,h)=>{a.hasTask(c,h),l===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Kg(i),Qo(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,c,h)=>(a.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+c,s,n_,Ef,Ef);try{return h.runTask(y,a,l)}finally{h.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const n_={};function Qo(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Kg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function wf(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Bu(i){i._nesting--,Qo(i)}class Yl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ki,this.onMicrotaskEmpty=new ki,this.onStable=new ki,this.onError=new ki}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let ju=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),Er(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Er(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(C(ws))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),If=(()=>{class i{constructor(){this._applications=new Map,Df.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Df.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Uw{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function r_(i){Df=i}let Df=new Uw,$u=null;const i_=new An("AllowMultipleToken"),Bw=new An("PlatformOnDestroy");class bf{constructor(s,a){this.name=s,this.token=a}}function $w(i,s,a=[]){const l=`Platform: ${s}`,c=new An(l);return(h=[])=>{let y=s_();if(!y||y.injector.get(i_,!1)){const _=[...a,...h,{provide:c,useValue:!0}];i?i(_):function Ql(i){if($u&&!$u.get(i_,!1))throw new ke(400,"");$u=i;const s=i.get(Fd),a=i.get(Pw,null);a&&a.forEach(l=>l())}(function $b(i=[],s){return Aa.create({name:s,providers:[{provide:Bp,useValue:"platform"},{provide:Bw,useValue:()=>$u=null},...i]})}(_,l))}return function Hw(i){const s=s_();if(!s)throw new ke(401,"");return s}()}}function s_(){var i;return null!==(i=null==$u?void 0:$u.get(Fd))&&void 0!==i?i:null}let Fd=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const _=function Jl(i,s){let a;return a="noop"===i?new Yl:("zone.js"===i?void 0:i)||new ws({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:ws,useValue:_}];return _.run(()=>{const T=Aa.create({providers:I,parent:this.injector,name:a.moduleType.name}),x=a.create(T),k=x.injector.get(dp,null);if(!k)throw new ke(402,"");return _.runOutsideAngular(()=>{const G=_.onError.subscribe({next:X=>{k.handleError(X)}});x.onDestroy(()=>{u_(this._modules,x),G.unsubscribe()})}),function Xl(i,s,a){try{const l=a();return $h(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,_,()=>{const G=x.injector.get(Qv);return G.runInitializers(),G.donePromise.then(()=>(function ib(i){Ft(i,"Expected localeId to be defined"),"string"==typeof i&&(Xh=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Xv,Tg)||Tg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const c=o_({},l);return function jw(i,s,a){const l=new Tv(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(a){const l=a.injector.get(a_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Bw,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(C(Aa))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function o_(i,s){return Array.isArray(s)?s.reduce(o_,i):Object.assign(Object.assign({},i),s)}let a_=(()=>{class i{constructor(a,l,c,h){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new R.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new R.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),Er(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),x.unsubscribe()}});this.isStable=(0,se.T)(y,_.pipe((0,le.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let c;c=a instanceof wo?a:this._injector.get(Dd).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const h=function Zg(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Cd),_=c.create(Aa.NULL,[],l||c.selector,h),I=_.location.nativeElement,T=_.injector.get(ju,null),x=T&&_.injector.get(If);return T&&x&&x.registerApplication(I,T),_.onDestroy(()=>{this.detachView(_.hostView),u_(this.components,_),x&&x.unregisterApplication(I)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;u_(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(kw,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(C(ws),C(Aa),C(dp),C(Qv))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function u_(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Gw=!0,l_=!1;function Cf(){return l_=!0,Gw}function Jg(){if(l_)throw new Error("Cannot enable prod mode after platform setup.");Gw=!1}let es=(()=>{class i{}return i.__NG_ELEMENT_ID__=zw,i})();function zw(i){return function em(i,s,a){if(Ga(i)&&!a){const l=ir(i.index,s);return new gn(l,l)}return 47&i.type?new gn(s[16],s):null}(mn(),Re(),16==(16&i))}class Bd{constructor(){}supports(s){return ed(s)}create(s){return new Zw(s)}}const Kw=(i,s)=>s;class Zw{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Kw}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,h=null;for(;a||l;){const y=!l||a&&a.currentIndex<Jw(l,c,h)?a:l,_=Jw(y,c,h),I=y.currentIndex;if(y===l)c--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{h||(h=[]);const T=_-c,x=I-c;if(T!=x){for(let G=0;G<T;G++){const X=G<h.length?h[G]:h[G]=0,Ee=X+G;x<=Ee&&Ee<T&&(h[G]=X+1)}h[y.previousIndex]=x-T}}_!==I&&s(y,_,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ed(s))throw new ke(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)h=s[_],y=this._trackByFn(_,h),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,h,y,_)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,_),l=!0),a=a._next}else c=0,function Cy(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Cu()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,_=>{y=this._trackByFn(c,_),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,_,y,c)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,y,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,c)):s=this._addAfter(new Zb(a,l),h,c),s}_verifyReinsertion(s,a,l,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Qw),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Zb{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yw{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Qw{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Yw,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jw(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class im{constructor(){}supports(s){return s instanceof Map||Kp(s)}create(){return new Gr}}class Gr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Kp(s)))throw new ke(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const h=c._prev,y=c._next;return h&&(h._next=y),y&&(y._prev=h),c._next=null,c._prev=null,c}const l=new Yb(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Yb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xw(){return new p_([new Bd])}let p_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Xw()),deps:[[i,new Cn,new _t]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new ke(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:Xw}),i})();function g_(){return new m_([new im])}let m_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||g_()),deps:[[i,new Cn,new _t]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new ke(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:g_}),i})();const y_=$w(null,"core",[]);let Af=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(C(a_))},i.\u0275mod=J({type:i}),i.\u0275inj=Yt({}),i})()},3942:(tt,De,P)=>{P.d(De,{Z:()=>ke});var p=P(2090),V=P(4859),R=P(9681),se=P(1877);class le{constructor(fe,be){this._delegate=fe,this.firebase=be,(0,R._addComponent)(fe,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(fe,be=R._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(fe);return!Ge.isInitialized()&&"EXPLICIT"===(null===(We=Ge.getComponent())||void 0===We?void 0:We.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:be})}_removeServiceInstance(fe,be=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(be)}_addComponent(fe){(0,R._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,R._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ve(){const Be=function ae(Be){const fe={},be={__esModule:!0,initializeApp:function Oe(te,he={}){const _e=R.initializeApp(te,he);if((0,p.r3)(fe,_e.name))return fe[_e.name];const Y=new Be(_e,be);return fe[_e.name]=Y,Y},app:Ge,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function we(te){const he=te.name,_e=he.replace("-compat","");if(R._registerComponent(te)&&"PUBLIC"===te.type){const Y=(ne=Ge())=>{if("function"!=typeof ne[_e])throw pe.create("invalid-app-argument",{appName:he});return ne[_e]()};void 0!==te.serviceProps&&(0,p.ZB)(Y,te.serviceProps),be[_e]=Y,Be.prototype[_e]=function(...ne){return this._getService.bind(this,he).apply(this,te.multipleInstances?ne:[])}}return"PUBLIC"===te.type?be[_e]:null},removeApp:function We(te){delete fe[te]},useAsService:function qe(te,he){return"serverAuth"===he?null:he},modularAPIs:R}};function Ge(te){if(!(0,p.r3)(fe,te=te||R._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:te});return fe[te]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ae(){return Object.keys(fe).map(te=>fe[te])}}),Ge.App=Be,be}(le);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function fe(be){(0,p.ZB)(Be,be)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Be}(),j=new se.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=z;!function xe(Be){(0,R.registerVersion)("@firebase/app-compat","0.1.30",Be)}()},9681:(tt,De,P)=>{P.r(De),P.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>oi,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>cn,_addOrOverwriteComponent:()=>en,_apps:()=>on,_clearComponents:()=>Li,_components:()=>Mn,_getProvider:()=>Yt,_registerComponent:()=>Mt,_removeServiceInstance:()=>_n,deleteApp:()=>ht,getApp:()=>Rn,getApps:()=>is,initializeApp:()=>Ii,onLog:()=>nn,registerVersion:()=>En,setLogLevel:()=>qn});var p=P(5861),V=P(4859),R=P(1877),se=P(2090),le=P(8766);class ge{constructor(B){this.container=B}getPlatformInfoString(){return this.container.getProviders().map(H=>{if(function pe(L){const B=L.getComponent();return"VERSION"===(null==B?void 0:B.type)}(H)){const Me=H.getImmediate();return`${Me.library}/${Me.version}`}return null}).filter(H=>H).join(" ")}}const ae="@firebase/app",z=new R.Yd("@firebase/app"),Ft="[DEFAULT]",Ke={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,Mn=new Map;function cn(L,B){try{L.container.addComponent(B)}catch(H){z.debug(`Component ${B.name} failed to register with FirebaseApp ${L.name}`,H)}}function en(L,B){L.container.addOrOverwriteComponent(B)}function Mt(L){const B=L.name;if(Mn.has(B))return z.debug(`There were multiple attempts to register component ${B}.`),!1;Mn.set(B,L);for(const H of on.values())cn(H,L);return!0}function Yt(L,B){const H=L.container.getProvider("heartbeat").getImmediate({optional:!0});return H&&H.triggerHeartbeat(),L.container.getProvider(B)}function _n(L,B,H=Ft){Yt(L,B).clearInstance(H)}function Li(){Mn.clear()}const bn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class rs{constructor(B,H,Me){this._isDeleted=!1,this._options=Object.assign({},B),this._config=Object.assign({},H),this._name=H.name,this._automaticDataCollectionEnabled=H.automaticDataCollectionEnabled,this._container=Me,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B){this.checkDestroyed(),this._automaticDataCollectionEnabled=B}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(B){this._isDeleted=B}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}}const oi="9.9.1";function Ii(L,B={}){"object"!=typeof B&&(B={name:B});const H=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},B),Me=H.name;if("string"!=typeof Me||!Me)throw bn.create("bad-app-name",{appName:String(Me)});const He=on.get(Me);if(He){if((0,se.vZ)(L,He.options)&&(0,se.vZ)(H,He.config))return He;throw bn.create("duplicate-app",{appName:Me})}const yt=new V.H0(Me);for(const Kt of Mn.values())yt.addComponent(Kt);const Qt=new rs(L,H,yt);return on.set(Me,Qt),Qt}function Rn(L=Ft){const B=on.get(L);if(!B)throw bn.create("no-app",{appName:L});return B}function is(){return Array.from(on.values())}function ht(L){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(L){const B=L.name;on.has(B)&&(on.delete(B),yield Promise.all(L.container.getProviders().map(H=>H.delete())),L.isDeleted=!0)})).apply(this,arguments)}function En(L,B,H){var Me;let He=null!==(Me=Ke[L])&&void 0!==Me?Me:L;H&&(He+=`-${H}`);const yt=He.match(/\s|\//),Qt=B.match(/\s|\//);if(yt||Qt){const Kt=[`Unable to register library "${He}" with version "${B}":`];return yt&&Kt.push(`library name "${He}" contains illegal characters (whitespace or "/")`),yt&&Qt&&Kt.push("and"),Qt&&Kt.push(`version name "${B}" contains illegal characters (whitespace or "/")`),void z.warn(Kt.join(" "))}Mt(new V.wA(`${He}-version`,()=>({library:He,version:B}),"VERSION"))}function nn(L,B){if(null!==L&&"function"!=typeof L)throw bn.create("invalid-log-argument");(0,R.Am)(L,B)}function qn(L){(0,R.Ub)(L)}const wn="firebase-heartbeat-store";let tr=null;function Cs(){return tr||(tr=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(L,B)=>{0===B&&L.createObjectStore(wn)}}).catch(L=>{throw bn.create("storage-open",{originalErrorMessage:L.message})})),tr}function lt(){return(lt=(0,p.Z)(function*(L){var B;try{return(yield Cs()).transaction(wn).objectStore(wn).get(ui(L))}catch(H){throw bn.create("storage-get",{originalErrorMessage:null===(B=H)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function rt(L,B){return ai.apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(L,B){var H;try{const He=(yield Cs()).transaction(wn,"readwrite");return yield He.objectStore(wn).put(B,ui(L)),He.done}catch(Me){throw bn.create("storage-set",{originalErrorMessage:null===(H=Me)||void 0===H?void 0:H.message})}})).apply(this,arguments)}function ui(L){return`${L.name}!${L.options.appId}`}class Nn{constructor(B){this.container=B,this._heartbeatsCache=null;const H=this.container.getProvider("app").getImmediate();this._storage=new Pr(H),this._heartbeatsCachePromise=this._storage.read().then(Me=>(this._heartbeatsCache=Me,Me))}triggerHeartbeat(){var B=this;return(0,p.Z)(function*(){const Me=B.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),He=dn();if(null===B._heartbeatsCache&&(B._heartbeatsCache=yield B._heartbeatsCachePromise),B._heartbeatsCache.lastSentHeartbeatDate!==He&&!B._heartbeatsCache.heartbeats.some(yt=>yt.date===He))return B._heartbeatsCache.heartbeats.push({date:He,agent:Me}),B._heartbeatsCache.heartbeats=B._heartbeatsCache.heartbeats.filter(yt=>{const Qt=new Date(yt.date).valueOf();return Date.now()-Qt<=2592e6}),B._storage.overwrite(B._heartbeatsCache)})()}getHeartbeatsHeader(){var B=this;return(0,p.Z)(function*(){if(null===B._heartbeatsCache&&(yield B._heartbeatsCachePromise),null===B._heartbeatsCache||0===B._heartbeatsCache.heartbeats.length)return"";const H=dn(),{heartbeatsToSend:Me,unsentEntries:He}=function ct(L,B=1024){const H=[];let Me=L.slice();for(const He of L){const yt=H.find(Qt=>Qt.agent===He.agent);if(yt){if(yt.dates.push(He.date),$(H)>B){yt.dates.pop();break}}else if(H.push({agent:He.agent,dates:[He.date]}),$(H)>B){H.pop();break}Me=Me.slice(1)}return{heartbeatsToSend:H,unsentEntries:Me}}(B._heartbeatsCache.heartbeats),yt=(0,se.L)(JSON.stringify({version:2,heartbeats:Me}));return B._heartbeatsCache.lastSentHeartbeatDate=H,He.length>0?(B._heartbeatsCache.heartbeats=He,yield B._storage.overwrite(B._heartbeatsCache)):(B._heartbeatsCache.heartbeats=[],B._storage.overwrite(B._heartbeatsCache)),yt})()}}function dn(){return(new Date).toISOString().substring(0,10)}class Pr{constructor(B){this.app=B,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var B=this;return(0,p.Z)(function*(){return(yield B._canUseIndexedDBPromise)&&(yield function $t(L){return lt.apply(this,arguments)}(B.app))||{heartbeats:[]}})()}overwrite(B){var H=this;return(0,p.Z)(function*(){var Me;if(yield H._canUseIndexedDBPromise){const yt=yield H.read();return rt(H.app,{lastSentHeartbeatDate:null!==(Me=B.lastSentHeartbeatDate)&&void 0!==Me?Me:yt.lastSentHeartbeatDate,heartbeats:B.heartbeats})}})()}add(B){var H=this;return(0,p.Z)(function*(){var Me;if(yield H._canUseIndexedDBPromise){const yt=yield H.read();return rt(H.app,{lastSentHeartbeatDate:null!==(Me=B.lastSentHeartbeatDate)&&void 0!==Me?Me:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...B.heartbeats]})}})()}}function $(L){return(0,se.L)(JSON.stringify({version:2,heartbeats:L})).length}!function U(L){Mt(new V.wA("platform-logger",B=>new ge(B),"PRIVATE")),Mt(new V.wA("heartbeat",B=>new Nn(B),"PRIVATE")),En(ae,"0.7.29",L),En(ae,"0.7.29","esm2017"),En("fire-js","")}("")},4859:(tt,De,P)=>{P.d(De,{H0:()=>ae,wA:()=>R});var p=P(5861),V=P(2090);class R{constructor(z,j,re){this.name=z,this.instanceFactory=j,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const se="[DEFAULT]";class le{constructor(z,j){this.name=z,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const j=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(j)){const re=new V.BH;if(this.instancesDeferred.set(j,re),this.isInitialized(j)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:j});$e&&re.resolve($e)}catch($e){}}return this.instancesDeferred.get(j).promise}getImmediate(z){var j;const re=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),$e=null!==(j=null==z?void 0:z.optional)&&void 0!==j&&j;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(xe){if($e)return null;throw xe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function pe(ve){return"EAGER"===ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:se})}catch(j){}for(const[j,re]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(j);try{const xe=this.getOrInitializeService({instanceIdentifier:$e});re.resolve(xe)}catch(xe){}}}}clearInstance(z=se){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,p.Z)(function*(){const j=Array.from(z.instances.values());yield Promise.all([...j.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...j.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=se){return this.instances.has(z)}getOptions(z=se){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:j={}}=z,re=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:re,options:j});for(const[xe,ke]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(xe)&&ke.resolve($e);return $e}onInit(z,j){var re;const $e=this.normalizeInstanceIdentifier(j),xe=null!==(re=this.onInitCallbacks.get($e))&&void 0!==re?re:new Set;xe.add(z),this.onInitCallbacks.set($e,xe);const ke=this.instances.get($e);return ke&&z(ke,$e),()=>{xe.delete(z)}}invokeOnInitCallbacks(z,j){const re=this.onInitCallbacks.get(j);if(re)for(const $e of re)try{$e(z,j)}catch(xe){}}getOrInitializeService({instanceIdentifier:z,options:j={}}){let re=this.instances.get(z);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=z,ve===se?void 0:ve),options:j}),this.instances.set(z,re),this.instancesOptions.set(z,j),this.invokeOnInitCallbacks(re,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,re)}catch($e){}var ve;return re||null}normalizeInstanceIdentifier(z=se){return this.component?this.component.multipleInstances?z:se:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const j=this.getProvider(z.name);if(j.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);j.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const j=new le(z,this);return this.providers.set(z,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(tt,De,P)=>{P.d(De,{Am:()=>ve,Ub:()=>ae,Yd:()=>pe,in:()=>V});const p=[];var V=(()=>{return(z=V||(V={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",V;var z})();const R={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},se=V.INFO,le={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ge=(z,j,...re)=>{if(j<z.logLevel)return;const $e=(new Date).toISOString(),xe=le[j];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[xe](`[${$e}]  ${z.name}:`,...re)};class pe{constructor(j){this.name=j,this._logLevel=se,this._logHandler=ge,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in V))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?R[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...j),this._logHandler(this,V.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...j),this._logHandler(this,V.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,V.INFO,...j),this._logHandler(this,V.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,V.WARN,...j),this._logHandler(this,V.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...j),this._logHandler(this,V.ERROR,...j)}}function ae(z){p.forEach(j=>{j.setLogLevel(z)})}function ve(z,j){for(const re of p){let $e=null;j&&j.level&&($e=R[j.level]),re.userLogHandler=null===z?null:(xe,ke,...Be)=>{const fe=Be.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(We){return null}}).filter(be=>be).join(" ");ke>=(null!=$e?$e:xe.logLevel)&&z({level:V[ke].toLowerCase(),message:fe,args:Be,type:xe.name})}}}},8766:(tt,De,P)=>{P.d(De,{Lj:()=>Oe,X3:()=>Ge});var p=P(5861);let R,se;const pe=new WeakMap,ae=new WeakMap,ve=new WeakMap,z=new WeakMap,j=new WeakMap;let xe={get(he,_e,Y){if(he instanceof IDBTransaction){if("done"===_e)return ae.get(he);if("objectStoreNames"===_e)return he.objectStoreNames||ve.get(he);if("store"===_e)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return be(he[_e])},set:(he,_e,Y)=>(he[_e]=Y,!0),has:(he,_e)=>he instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in he};function fe(he){return"function"==typeof he?function Be(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(..._e){return he.apply(We(this),_e),be(pe.get(this))}:function(..._e){return be(he.apply(We(this),_e))}:function(_e,...Y){const ne=he.call(We(this),_e,...Y);return ve.set(ne,_e.sort?_e.sort():[_e]),be(ne)}}(he):(he instanceof IDBTransaction&&function $e(he){if(ae.has(he))return;const _e=new Promise((Y,ne)=>{const ie=()=>{he.removeEventListener("complete",ye),he.removeEventListener("error",ue),he.removeEventListener("abort",ue)},ye=()=>{Y(),ie()},ue=()=>{ne(he.error||new DOMException("AbortError","AbortError")),ie()};he.addEventListener("complete",ye),he.addEventListener("error",ue),he.addEventListener("abort",ue)});ae.set(he,_e)}(he),((he,_e)=>_e.some(Y=>he instanceof Y))(he,function le(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,xe):he)}function be(he){if(he instanceof IDBRequest)return function re(he){const _e=new Promise((Y,ne)=>{const ie=()=>{he.removeEventListener("success",ye),he.removeEventListener("error",ue)},ye=()=>{Y(be(he.result)),ie()},ue=()=>{ne(he.error),ie()};he.addEventListener("success",ye),he.addEventListener("error",ue)});return _e.then(Y=>{Y instanceof IDBCursor&&pe.set(Y,he)}).catch(()=>{}),j.set(_e,he),_e}(he);if(z.has(he))return z.get(he);const _e=fe(he);return _e!==he&&(z.set(he,_e),j.set(_e,he)),_e}const We=he=>j.get(he);function Ge(he,_e,{blocked:Y,upgrade:ne,blocking:ie,terminated:ye}={}){const ue=indexedDB.open(he,_e),Fe=be(ue);return ne&&ue.addEventListener("upgradeneeded",dt=>{ne(be(ue.result),dt.oldVersion,dt.newVersion,be(ue.transaction))}),Y&&ue.addEventListener("blocked",()=>Y()),Fe.then(dt=>{ye&&dt.addEventListener("close",()=>ye()),ie&&dt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Fe}function Oe(he,{blocked:_e}={}){const Y=indexedDB.deleteDatabase(he);return _e&&Y.addEventListener("blocked",()=>_e()),be(Y).then(()=>{})}const Ae=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],qe=new Map;function te(he,_e){if(!(he instanceof IDBDatabase)||_e in he||"string"!=typeof _e)return;if(qe.get(_e))return qe.get(_e);const Y=_e.replace(/FromIndex$/,""),ne=_e!==Y,ie=we.includes(Y);if(!(Y in(ne?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ae.includes(Y))return;const ye=function(){var ue=(0,p.Z)(function*(Fe,...dt){const qt=this.transaction(Fe,ie?"readwrite":"readonly");let Ft=qt.store;return ne&&(Ft=Ft.index(dt.shift())),(yield Promise.all([Ft[Y](...dt),ie&&qt.done]))[0]});return function(dt){return ue.apply(this,arguments)}}();return qe.set(_e,ye),ye}!function ke(he){xe=he(xe)}(he=>Hx($x({},he),{get:(_e,Y,ne)=>te(_e,Y)||he.get(_e,Y,ne),has:(_e,Y)=>!!te(_e,Y)||he.has(_e,Y)}))},5861:(tt,De,P)=>{function p(R,se,le,ge,pe,ae,ve){try{var z=R[ae](ve),j=z.value}catch(re){return void le(re)}z.done?se(j):Promise.resolve(j).then(ge,pe)}function V(R){return function(){var se=this,le=arguments;return new Promise(function(ge,pe){var ae=R.apply(se,le);function ve(j){p(ae,ge,pe,ve,z,"next",j)}function z(j){p(ae,ge,pe,ve,z,"throw",j)}ve(void 0)})}}P.d(De,{Z:()=>V})}},tt=>{tt(tt.s=2938)}]);